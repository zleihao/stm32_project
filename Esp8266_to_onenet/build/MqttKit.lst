ARM GAS  /tmp/ccYLmkow.s 			page 1


   1              		.cpu cortex-m3
   2              		.eabi_attribute 20, 1
   3              		.eabi_attribute 21, 1
   4              		.eabi_attribute 23, 3
   5              		.eabi_attribute 24, 1
   6              		.eabi_attribute 25, 1
   7              		.eabi_attribute 26, 1
   8              		.eabi_attribute 30, 1
   9              		.eabi_attribute 34, 1
  10              		.eabi_attribute 18, 4
  11              		.file	"MqttKit.c"
  12              		.text
  13              	.Ltext0:
  14              		.cfi_sections	.debug_frame
  15              		.section	.text.MQTT_NewBuffer,"ax",%progbits
  16              		.align	1
  17              		.global	MQTT_NewBuffer
  18              		.arch armv7-m
  19              		.syntax unified
  20              		.thumb
  21              		.thumb_func
  22              		.fpu softvfp
  24              	MQTT_NewBuffer:
  25              	.LVL0:
  26              	.LFB0:
  27              		.file 1 "./Hardware/MQTT/MqttKit.c"
   1:./Hardware/MQTT/MqttKit.c **** /**
   2:./Hardware/MQTT/MqttKit.c **** 	************************************************************
   3:./Hardware/MQTT/MqttKit.c **** 	************************************************************
   4:./Hardware/MQTT/MqttKit.c **** 	************************************************************
   5:./Hardware/MQTT/MqttKit.c **** 	*	文件名： 	MqttKit.c
   6:./Hardware/MQTT/MqttKit.c **** 	*
   7:./Hardware/MQTT/MqttKit.c **** 	*	作者： 		张继瑞
   8:./Hardware/MQTT/MqttKit.c **** 	*
   9:./Hardware/MQTT/MqttKit.c **** 	*	日期： 		2018-04-27
  10:./Hardware/MQTT/MqttKit.c **** 	*
  11:./Hardware/MQTT/MqttKit.c **** 	*	版本： 		V1.4
  12:./Hardware/MQTT/MqttKit.c **** 	*
  13:./Hardware/MQTT/MqttKit.c **** 	*	说明： 		MQTT协议
  14:./Hardware/MQTT/MqttKit.c **** 	*
  15:./Hardware/MQTT/MqttKit.c **** 	*	修改记录：	V1.1：解决MQTT_PacketSubscribe订阅不为2个topic
  16:./Hardware/MQTT/MqttKit.c **** 	*						个数时协议错误的bug
  17:./Hardware/MQTT/MqttKit.c **** 	*				V1.2：修复MQTT_PacketCmdResp的bug
  18:./Hardware/MQTT/MqttKit.c **** 	*				V1.3：将strncpy替换为memcpy，解决潜在bug
  19:./Hardware/MQTT/MqttKit.c **** 	*				V1.4：修复	MQTT_PacketPublishAck
  20:./Hardware/MQTT/MqttKit.c **** 	*							MQTT_PacketPublishRel
  21:./Hardware/MQTT/MqttKit.c **** 	*							函数封包错误的bug
  22:./Hardware/MQTT/MqttKit.c **** 	*				V1.5：增加	MQTT_UnPacketCmd
  23:./Hardware/MQTT/MqttKit.c **** 	*							MQTT_UnPacketPublish
  24:./Hardware/MQTT/MqttKit.c **** 	*							接口对消息内容长度的提取参数
  25:./Hardware/MQTT/MqttKit.c **** 	************************************************************
  26:./Hardware/MQTT/MqttKit.c **** 	************************************************************
  27:./Hardware/MQTT/MqttKit.c **** 	************************************************************
  28:./Hardware/MQTT/MqttKit.c **** **/
  29:./Hardware/MQTT/MqttKit.c **** 
  30:./Hardware/MQTT/MqttKit.c **** //协议头文件
  31:./Hardware/MQTT/MqttKit.c **** #include "MqttKit.h"
ARM GAS  /tmp/ccYLmkow.s 			page 2


  32:./Hardware/MQTT/MqttKit.c **** 
  33:./Hardware/MQTT/MqttKit.c **** //C库
  34:./Hardware/MQTT/MqttKit.c **** #include <string.h>
  35:./Hardware/MQTT/MqttKit.c **** 
  36:./Hardware/MQTT/MqttKit.c **** 
  37:./Hardware/MQTT/MqttKit.c **** #define CMD_TOPIC_PREFIX		"$creq"
  38:./Hardware/MQTT/MqttKit.c **** 
  39:./Hardware/MQTT/MqttKit.c **** 
  40:./Hardware/MQTT/MqttKit.c **** //==========================================================
  41:./Hardware/MQTT/MqttKit.c **** //	函数名称：	EDP_NewBuffer
  42:./Hardware/MQTT/MqttKit.c **** //
  43:./Hardware/MQTT/MqttKit.c **** //	函数功能：	申请内存
  44:./Hardware/MQTT/MqttKit.c **** //
  45:./Hardware/MQTT/MqttKit.c **** //	入口参数：	edpPacket：包结构体
  46:./Hardware/MQTT/MqttKit.c **** //				size：大小
  47:./Hardware/MQTT/MqttKit.c **** //
  48:./Hardware/MQTT/MqttKit.c **** //	返回参数：	无
  49:./Hardware/MQTT/MqttKit.c **** //
  50:./Hardware/MQTT/MqttKit.c **** //	说明：		1.可使用动态分配来分配内存
  51:./Hardware/MQTT/MqttKit.c **** //				2.可使用局部或全局数组来指定内存
  52:./Hardware/MQTT/MqttKit.c **** //==========================================================
  53:./Hardware/MQTT/MqttKit.c **** void MQTT_NewBuffer(MQTT_PACKET_STRUCTURE *mqttPacket, uint32 size)
  54:./Hardware/MQTT/MqttKit.c **** {
  28              		.loc 1 54 1 view -0
  29              		.cfi_startproc
  30              		@ args = 0, pretend = 0, frame = 0
  31              		@ frame_needed = 0, uses_anonymous_args = 0
  32              		.loc 1 54 1 is_stmt 0 view .LVU1
  33 0000 38B5     		push	{r3, r4, r5, lr}
  34              	.LCFI0:
  35              		.cfi_def_cfa_offset 16
  36              		.cfi_offset 3, -16
  37              		.cfi_offset 4, -12
  38              		.cfi_offset 5, -8
  39              		.cfi_offset 14, -4
  40 0002 0446     		mov	r4, r0
  41 0004 0D46     		mov	r5, r1
  55:./Hardware/MQTT/MqttKit.c **** 	
  56:./Hardware/MQTT/MqttKit.c **** 	uint32 i = 0;
  42              		.loc 1 56 2 is_stmt 1 view .LVU2
  43              	.LVL1:
  57:./Hardware/MQTT/MqttKit.c **** 
  58:./Hardware/MQTT/MqttKit.c **** 	if(mqttPacket->_data == NULL)
  44              		.loc 1 58 2 view .LVU3
  45              		.loc 1 58 15 is_stmt 0 view .LVU4
  46 0006 0368     		ldr	r3, [r0]
  47              		.loc 1 58 4 view .LVU5
  48 0008 1BB1     		cbz	r3, .L9
  59:./Hardware/MQTT/MqttKit.c **** 	{
  60:./Hardware/MQTT/MqttKit.c **** 		mqttPacket->_memFlag = MEM_FLAG_ALLOC;
  61:./Hardware/MQTT/MqttKit.c **** 		
  62:./Hardware/MQTT/MqttKit.c **** 		mqttPacket->_data = (uint8 *)MQTT_MallocBuffer(size);
  63:./Hardware/MQTT/MqttKit.c **** 		if(mqttPacket->_data != NULL)
  64:./Hardware/MQTT/MqttKit.c **** 		{
  65:./Hardware/MQTT/MqttKit.c **** 			mqttPacket->_len = 0;
  66:./Hardware/MQTT/MqttKit.c **** 			
  67:./Hardware/MQTT/MqttKit.c **** 			mqttPacket->_size = size;
ARM GAS  /tmp/ccYLmkow.s 			page 3


  68:./Hardware/MQTT/MqttKit.c **** 			
  69:./Hardware/MQTT/MqttKit.c **** 			for(; i < mqttPacket->_size; i++)
  70:./Hardware/MQTT/MqttKit.c **** 				mqttPacket->_data[i] = 0;
  71:./Hardware/MQTT/MqttKit.c **** 		}
  72:./Hardware/MQTT/MqttKit.c **** 	}
  73:./Hardware/MQTT/MqttKit.c **** 	else
  74:./Hardware/MQTT/MqttKit.c **** 	{
  75:./Hardware/MQTT/MqttKit.c **** 		mqttPacket->_memFlag = MEM_FLAG_STATIC;
  49              		.loc 1 75 3 is_stmt 1 view .LVU6
  50              		.loc 1 75 24 is_stmt 0 view .LVU7
  51 000a 0223     		movs	r3, #2
  52 000c 0373     		strb	r3, [r0, #12]
  76:./Hardware/MQTT/MqttKit.c **** 		
  77:./Hardware/MQTT/MqttKit.c **** 		for(; i < mqttPacket->_size; i++)
  53              		.loc 1 77 3 is_stmt 1 view .LVU8
  56:./Hardware/MQTT/MqttKit.c **** 
  54              		.loc 1 56 9 is_stmt 0 view .LVU9
  55 000e 0023     		movs	r3, #0
  56              		.loc 1 77 3 view .LVU10
  57 0010 18E0     		b	.L6
  58              	.L9:
  60:./Hardware/MQTT/MqttKit.c **** 		
  59              		.loc 1 60 3 is_stmt 1 view .LVU11
  60:./Hardware/MQTT/MqttKit.c **** 		
  60              		.loc 1 60 24 is_stmt 0 view .LVU12
  61 0012 0123     		movs	r3, #1
  62 0014 0373     		strb	r3, [r0, #12]
  62:./Hardware/MQTT/MqttKit.c **** 		if(mqttPacket->_data != NULL)
  63              		.loc 1 62 3 is_stmt 1 view .LVU13
  62:./Hardware/MQTT/MqttKit.c **** 		if(mqttPacket->_data != NULL)
  64              		.loc 1 62 32 is_stmt 0 view .LVU14
  65 0016 0846     		mov	r0, r1
  66              	.LVL2:
  62:./Hardware/MQTT/MqttKit.c **** 		if(mqttPacket->_data != NULL)
  67              		.loc 1 62 32 view .LVU15
  68 0018 FFF7FEFF 		bl	malloc
  69              	.LVL3:
  62:./Hardware/MQTT/MqttKit.c **** 		if(mqttPacket->_data != NULL)
  70              		.loc 1 62 21 view .LVU16
  71 001c 2060     		str	r0, [r4]
  63:./Hardware/MQTT/MqttKit.c **** 		{
  72              		.loc 1 63 3 is_stmt 1 view .LVU17
  63:./Hardware/MQTT/MqttKit.c **** 		{
  73              		.loc 1 63 5 is_stmt 0 view .LVU18
  74 001e C8B1     		cbz	r0, .L1
  65:./Hardware/MQTT/MqttKit.c **** 			
  75              		.loc 1 65 4 is_stmt 1 view .LVU19
  65:./Hardware/MQTT/MqttKit.c **** 			
  76              		.loc 1 65 21 is_stmt 0 view .LVU20
  77 0020 0023     		movs	r3, #0
  78 0022 6360     		str	r3, [r4, #4]
  67:./Hardware/MQTT/MqttKit.c **** 			
  79              		.loc 1 67 4 is_stmt 1 view .LVU21
  67:./Hardware/MQTT/MqttKit.c **** 			
  80              		.loc 1 67 22 is_stmt 0 view .LVU22
  81 0024 A560     		str	r5, [r4, #8]
  69:./Hardware/MQTT/MqttKit.c **** 				mqttPacket->_data[i] = 0;
ARM GAS  /tmp/ccYLmkow.s 			page 4


  82              		.loc 1 69 4 is_stmt 1 view .LVU23
  83 0026 03E0     		b	.L4
  84              	.LVL4:
  85              	.L5:
  70:./Hardware/MQTT/MqttKit.c **** 		}
  86              		.loc 1 70 5 discriminator 2 view .LVU24
  70:./Hardware/MQTT/MqttKit.c **** 		}
  87              		.loc 1 70 15 is_stmt 0 discriminator 2 view .LVU25
  88 0028 2268     		ldr	r2, [r4]
  70:./Hardware/MQTT/MqttKit.c **** 		}
  89              		.loc 1 70 26 discriminator 2 view .LVU26
  90 002a 0021     		movs	r1, #0
  91 002c D154     		strb	r1, [r2, r3]
  69:./Hardware/MQTT/MqttKit.c **** 				mqttPacket->_data[i] = 0;
  92              		.loc 1 69 33 is_stmt 1 discriminator 2 view .LVU27
  69:./Hardware/MQTT/MqttKit.c **** 				mqttPacket->_data[i] = 0;
  93              		.loc 1 69 34 is_stmt 0 discriminator 2 view .LVU28
  94 002e 0133     		adds	r3, r3, #1
  95              	.LVL5:
  96              	.L4:
  69:./Hardware/MQTT/MqttKit.c **** 				mqttPacket->_data[i] = 0;
  97              		.loc 1 69 10 is_stmt 1 discriminator 1 view .LVU29
  69:./Hardware/MQTT/MqttKit.c **** 				mqttPacket->_data[i] = 0;
  98              		.loc 1 69 24 is_stmt 0 discriminator 1 view .LVU30
  99 0030 A268     		ldr	r2, [r4, #8]
  69:./Hardware/MQTT/MqttKit.c **** 				mqttPacket->_data[i] = 0;
 100              		.loc 1 69 4 discriminator 1 view .LVU31
 101 0032 9A42     		cmp	r2, r3
 102 0034 F8D8     		bhi	.L5
 103 0036 0DE0     		b	.L1
 104              	.LVL6:
 105              	.L7:
  78:./Hardware/MQTT/MqttKit.c **** 			mqttPacket->_data[i] = 0;
 106              		.loc 1 78 4 is_stmt 1 discriminator 2 view .LVU32
 107              		.loc 1 78 14 is_stmt 0 discriminator 2 view .LVU33
 108 0038 2268     		ldr	r2, [r4]
 109              		.loc 1 78 25 discriminator 2 view .LVU34
 110 003a 4FF0000C 		mov	ip, #0
 111 003e 02F803C0 		strb	ip, [r2, r3]
  77:./Hardware/MQTT/MqttKit.c **** 			mqttPacket->_data[i] = 0;
 112              		.loc 1 77 32 is_stmt 1 discriminator 2 view .LVU35
  77:./Hardware/MQTT/MqttKit.c **** 			mqttPacket->_data[i] = 0;
 113              		.loc 1 77 33 is_stmt 0 discriminator 2 view .LVU36
 114 0042 0133     		adds	r3, r3, #1
 115              	.LVL7:
 116              	.L6:
  77:./Hardware/MQTT/MqttKit.c **** 			mqttPacket->_data[i] = 0;
 117              		.loc 1 77 9 is_stmt 1 discriminator 1 view .LVU37
  77:./Hardware/MQTT/MqttKit.c **** 			mqttPacket->_data[i] = 0;
 118              		.loc 1 77 23 is_stmt 0 discriminator 1 view .LVU38
 119 0044 A268     		ldr	r2, [r4, #8]
  77:./Hardware/MQTT/MqttKit.c **** 			mqttPacket->_data[i] = 0;
 120              		.loc 1 77 3 discriminator 1 view .LVU39
 121 0046 9A42     		cmp	r2, r3
 122 0048 F6D8     		bhi	.L7
  79:./Hardware/MQTT/MqttKit.c **** 		
  80:./Hardware/MQTT/MqttKit.c **** 		mqttPacket->_len = 0;
ARM GAS  /tmp/ccYLmkow.s 			page 5


 123              		.loc 1 80 3 is_stmt 1 view .LVU40
 124              		.loc 1 80 20 is_stmt 0 view .LVU41
 125 004a 0023     		movs	r3, #0
 126              	.LVL8:
 127              		.loc 1 80 20 view .LVU42
 128 004c 6360     		str	r3, [r4, #4]
  81:./Hardware/MQTT/MqttKit.c **** 		
  82:./Hardware/MQTT/MqttKit.c **** 		if(mqttPacket->_size < size)
 129              		.loc 1 82 3 is_stmt 1 view .LVU43
 130              		.loc 1 82 5 is_stmt 0 view .LVU44
 131 004e AA42     		cmp	r2, r5
 132 0050 00D2     		bcs	.L1
  83:./Hardware/MQTT/MqttKit.c **** 			mqttPacket->_data = NULL;
 133              		.loc 1 83 4 is_stmt 1 view .LVU45
 134              		.loc 1 83 22 is_stmt 0 view .LVU46
 135 0052 2360     		str	r3, [r4]
 136              	.LVL9:
 137              	.L1:
  84:./Hardware/MQTT/MqttKit.c **** 	}
  85:./Hardware/MQTT/MqttKit.c **** 
  86:./Hardware/MQTT/MqttKit.c **** }
 138              		.loc 1 86 1 view .LVU47
 139 0054 38BD     		pop	{r3, r4, r5, pc}
 140              		.loc 1 86 1 view .LVU48
 141              		.cfi_endproc
 142              	.LFE0:
 144              		.section	.text.MQTT_DeleteBuffer,"ax",%progbits
 145              		.align	1
 146              		.global	MQTT_DeleteBuffer
 147              		.syntax unified
 148              		.thumb
 149              		.thumb_func
 150              		.fpu softvfp
 152              	MQTT_DeleteBuffer:
 153              	.LVL10:
 154              	.LFB1:
  87:./Hardware/MQTT/MqttKit.c **** 
  88:./Hardware/MQTT/MqttKit.c **** //==========================================================
  89:./Hardware/MQTT/MqttKit.c **** //	函数名称：	MQTT_DeleteBuffer
  90:./Hardware/MQTT/MqttKit.c **** //
  91:./Hardware/MQTT/MqttKit.c **** //	函数功能：	释放数据内存
  92:./Hardware/MQTT/MqttKit.c **** //
  93:./Hardware/MQTT/MqttKit.c **** //	入口参数：	edpPacket：包结构体
  94:./Hardware/MQTT/MqttKit.c **** //
  95:./Hardware/MQTT/MqttKit.c **** //	返回参数：	无
  96:./Hardware/MQTT/MqttKit.c **** //
  97:./Hardware/MQTT/MqttKit.c **** //	说明：		
  98:./Hardware/MQTT/MqttKit.c **** //==========================================================
  99:./Hardware/MQTT/MqttKit.c **** void MQTT_DeleteBuffer(MQTT_PACKET_STRUCTURE *mqttPacket)
 100:./Hardware/MQTT/MqttKit.c **** {
 155              		.loc 1 100 1 is_stmt 1 view -0
 156              		.cfi_startproc
 157              		@ args = 0, pretend = 0, frame = 0
 158              		@ frame_needed = 0, uses_anonymous_args = 0
 159              		.loc 1 100 1 is_stmt 0 view .LVU50
 160 0000 10B5     		push	{r4, lr}
 161              	.LCFI1:
ARM GAS  /tmp/ccYLmkow.s 			page 6


 162              		.cfi_def_cfa_offset 8
 163              		.cfi_offset 4, -8
 164              		.cfi_offset 14, -4
 165 0002 0446     		mov	r4, r0
 101:./Hardware/MQTT/MqttKit.c **** 
 102:./Hardware/MQTT/MqttKit.c **** 	if(mqttPacket->_memFlag == MEM_FLAG_ALLOC)
 166              		.loc 1 102 2 is_stmt 1 view .LVU51
 167              		.loc 1 102 15 is_stmt 0 view .LVU52
 168 0004 037B     		ldrb	r3, [r0, #12]	@ zero_extendqisi2
 169              		.loc 1 102 4 view .LVU53
 170 0006 012B     		cmp	r3, #1
 171 0008 05D0     		beq	.L13
 172              	.LVL11:
 173              	.L11:
 103:./Hardware/MQTT/MqttKit.c **** 		MQTT_FreeBuffer(mqttPacket->_data);
 104:./Hardware/MQTT/MqttKit.c **** 	
 105:./Hardware/MQTT/MqttKit.c **** 	mqttPacket->_data = NULL;
 174              		.loc 1 105 2 is_stmt 1 view .LVU54
 175              		.loc 1 105 20 is_stmt 0 view .LVU55
 176 000a 0023     		movs	r3, #0
 177 000c 2360     		str	r3, [r4]
 106:./Hardware/MQTT/MqttKit.c **** 	mqttPacket->_len = 0;
 178              		.loc 1 106 2 is_stmt 1 view .LVU56
 179              		.loc 1 106 19 is_stmt 0 view .LVU57
 180 000e 6360     		str	r3, [r4, #4]
 107:./Hardware/MQTT/MqttKit.c **** 	mqttPacket->_size = 0;
 181              		.loc 1 107 2 is_stmt 1 view .LVU58
 182              		.loc 1 107 20 is_stmt 0 view .LVU59
 183 0010 A360     		str	r3, [r4, #8]
 108:./Hardware/MQTT/MqttKit.c **** 	mqttPacket->_memFlag = MEM_FLAG_NULL;
 184              		.loc 1 108 2 is_stmt 1 view .LVU60
 185              		.loc 1 108 23 is_stmt 0 view .LVU61
 186 0012 2373     		strb	r3, [r4, #12]
 109:./Hardware/MQTT/MqttKit.c **** 
 110:./Hardware/MQTT/MqttKit.c **** }
 187              		.loc 1 110 1 view .LVU62
 188 0014 10BD     		pop	{r4, pc}
 189              	.LVL12:
 190              	.L13:
 103:./Hardware/MQTT/MqttKit.c **** 	
 191              		.loc 1 103 3 is_stmt 1 view .LVU63
 192 0016 0068     		ldr	r0, [r0]
 193              	.LVL13:
 103:./Hardware/MQTT/MqttKit.c **** 	
 194              		.loc 1 103 3 is_stmt 0 view .LVU64
 195 0018 FFF7FEFF 		bl	free
 196              	.LVL14:
 197 001c F5E7     		b	.L11
 198              		.cfi_endproc
 199              	.LFE1:
 201              		.section	.text.MQTT_DumpLength,"ax",%progbits
 202              		.align	1
 203              		.global	MQTT_DumpLength
 204              		.syntax unified
 205              		.thumb
 206              		.thumb_func
 207              		.fpu softvfp
ARM GAS  /tmp/ccYLmkow.s 			page 7


 209              	MQTT_DumpLength:
 210              	.LVL15:
 211              	.LFB2:
 111:./Hardware/MQTT/MqttKit.c **** 
 112:./Hardware/MQTT/MqttKit.c **** int32 MQTT_DumpLength(size_t len, uint8 *buf)
 113:./Hardware/MQTT/MqttKit.c **** {
 212              		.loc 1 113 1 is_stmt 1 view -0
 213              		.cfi_startproc
 214              		@ args = 0, pretend = 0, frame = 0
 215              		@ frame_needed = 0, uses_anonymous_args = 0
 216              		@ link register save eliminated.
 217              		.loc 1 113 1 is_stmt 0 view .LVU66
 218 0000 0346     		mov	r3, r0
 114:./Hardware/MQTT/MqttKit.c **** 	
 115:./Hardware/MQTT/MqttKit.c **** 	int32 i = 0;
 219              		.loc 1 115 2 is_stmt 1 view .LVU67
 220              	.LVL16:
 116:./Hardware/MQTT/MqttKit.c **** 	
 117:./Hardware/MQTT/MqttKit.c **** 	for(i = 1; i <= 4; ++i)
 221              		.loc 1 117 2 view .LVU68
 222              		.loc 1 117 8 is_stmt 0 view .LVU69
 223 0002 0120     		movs	r0, #1
 224              	.LVL17:
 225              	.L15:
 226              		.loc 1 117 13 is_stmt 1 discriminator 1 view .LVU70
 227              		.loc 1 117 2 is_stmt 0 discriminator 1 view .LVU71
 228 0004 0428     		cmp	r0, #4
 229 0006 0ADC     		bgt	.L18
 118:./Hardware/MQTT/MqttKit.c **** 	{
 119:./Hardware/MQTT/MqttKit.c **** 		*buf = len % 128;
 230              		.loc 1 119 3 is_stmt 1 view .LVU72
 231              		.loc 1 119 14 is_stmt 0 view .LVU73
 232 0008 03F07F02 		and	r2, r3, #127
 233              		.loc 1 119 8 view .LVU74
 234 000c 0A70     		strb	r2, [r1]
 120:./Hardware/MQTT/MqttKit.c **** 		len >>= 7;
 235              		.loc 1 120 3 is_stmt 1 view .LVU75
 236              	.LVL18:
 121:./Hardware/MQTT/MqttKit.c **** 		if(len > 0)
 237              		.loc 1 121 3 view .LVU76
 238              		.loc 1 121 5 is_stmt 0 view .LVU77
 239 000e DB09     		lsrs	r3, r3, #7
 240              	.LVL19:
 241              		.loc 1 121 5 view .LVU78
 242 0010 07D0     		beq	.L14
 122:./Hardware/MQTT/MqttKit.c **** 		{
 123:./Hardware/MQTT/MqttKit.c **** 			*buf |= 128;
 243              		.loc 1 123 4 is_stmt 1 view .LVU79
 244              		.loc 1 123 9 is_stmt 0 view .LVU80
 245 0012 62F07F02 		orn	r2, r2, #127
 246 0016 01F8012B 		strb	r2, [r1], #1
 247              	.LVL20:
 124:./Hardware/MQTT/MqttKit.c **** 			++buf;
 248              		.loc 1 124 4 is_stmt 1 view .LVU81
 117:./Hardware/MQTT/MqttKit.c **** 	{
 249              		.loc 1 117 21 view .LVU82
 250 001a 0130     		adds	r0, r0, #1
ARM GAS  /tmp/ccYLmkow.s 			page 8


 251              	.LVL21:
 117:./Hardware/MQTT/MqttKit.c **** 	{
 252              		.loc 1 117 21 is_stmt 0 view .LVU83
 253 001c F2E7     		b	.L15
 254              	.L18:
 125:./Hardware/MQTT/MqttKit.c **** 		}
 126:./Hardware/MQTT/MqttKit.c **** 		else
 127:./Hardware/MQTT/MqttKit.c **** 		{
 128:./Hardware/MQTT/MqttKit.c **** 			return i;
 129:./Hardware/MQTT/MqttKit.c **** 		}
 130:./Hardware/MQTT/MqttKit.c **** 	}
 131:./Hardware/MQTT/MqttKit.c **** 
 132:./Hardware/MQTT/MqttKit.c **** 	return -1;
 255              		.loc 1 132 9 view .LVU84
 256 001e 4FF0FF30 		mov	r0, #-1
 257              	.LVL22:
 258              	.L14:
 133:./Hardware/MQTT/MqttKit.c **** }
 259              		.loc 1 133 1 view .LVU85
 260 0022 7047     		bx	lr
 261              		.cfi_endproc
 262              	.LFE2:
 264              		.section	.text.MQTT_ReadLength,"ax",%progbits
 265              		.align	1
 266              		.global	MQTT_ReadLength
 267              		.syntax unified
 268              		.thumb
 269              		.thumb_func
 270              		.fpu softvfp
 272              	MQTT_ReadLength:
 273              	.LVL23:
 274              	.LFB3:
 134:./Hardware/MQTT/MqttKit.c **** 
 135:./Hardware/MQTT/MqttKit.c **** int32 MQTT_ReadLength(const uint8 *stream, int32 size, uint32 *len)
 136:./Hardware/MQTT/MqttKit.c **** {
 275              		.loc 1 136 1 is_stmt 1 view -0
 276              		.cfi_startproc
 277              		@ args = 0, pretend = 0, frame = 0
 278              		@ frame_needed = 0, uses_anonymous_args = 0
 137:./Hardware/MQTT/MqttKit.c **** 	
 138:./Hardware/MQTT/MqttKit.c **** 	int32 i;
 279              		.loc 1 138 2 view .LVU87
 139:./Hardware/MQTT/MqttKit.c **** 	const uint8 *in = stream;
 280              		.loc 1 139 2 view .LVU88
 140:./Hardware/MQTT/MqttKit.c **** 	uint32 multiplier = 1;
 281              		.loc 1 140 2 view .LVU89
 141:./Hardware/MQTT/MqttKit.c **** 
 142:./Hardware/MQTT/MqttKit.c **** 	*len = 0;
 282              		.loc 1 142 2 view .LVU90
 283              		.loc 1 142 7 is_stmt 0 view .LVU91
 284 0000 0023     		movs	r3, #0
 285 0002 1360     		str	r3, [r2]
 143:./Hardware/MQTT/MqttKit.c **** 	for(i = 0; i < size; ++i)
 286              		.loc 1 143 2 is_stmt 1 view .LVU92
 287              	.LVL24:
 140:./Hardware/MQTT/MqttKit.c **** 	uint32 multiplier = 1;
 288              		.loc 1 140 9 is_stmt 0 view .LVU93
ARM GAS  /tmp/ccYLmkow.s 			page 9


 289 0004 4FF0010C 		mov	ip, #1
 290              	.LVL25:
 291              		.loc 1 143 13 is_stmt 1 view .LVU94
 292              		.loc 1 143 2 is_stmt 0 view .LVU95
 293 0008 8B42     		cmp	r3, r1
 294 000a 1BDA     		bge	.L29
 136:./Hardware/MQTT/MqttKit.c **** 	
 295              		.loc 1 136 1 view .LVU96
 296 000c 10B5     		push	{r4, lr}
 297              	.LCFI2:
 298              		.cfi_def_cfa_offset 8
 299              		.cfi_offset 4, -8
 300              		.cfi_offset 14, -4
 301              	.L23:
 144:./Hardware/MQTT/MqttKit.c **** 	{
 145:./Hardware/MQTT/MqttKit.c **** 		*len += (in[i] & 0x7f) * multiplier;
 302              		.loc 1 145 3 is_stmt 1 view .LVU97
 303              		.loc 1 145 14 is_stmt 0 view .LVU98
 304 000e C45C     		ldrb	r4, [r0, r3]	@ zero_extendqisi2
 305              		.loc 1 145 18 view .LVU99
 306 0010 04F07F04 		and	r4, r4, #127
 307              		.loc 1 145 8 view .LVU100
 308 0014 D2F800E0 		ldr	lr, [r2]
 309 0018 0CFB04E4 		mla	r4, ip, r4, lr
 310 001c 1460     		str	r4, [r2]
 146:./Hardware/MQTT/MqttKit.c **** 
 147:./Hardware/MQTT/MqttKit.c **** 		if(!(in[i] & 0x80))
 311              		.loc 1 147 3 is_stmt 1 view .LVU101
 312              		.loc 1 147 6 is_stmt 0 view .LVU102
 313 001e C456     		ldrsb	r4, [r0, r3]
 314              		.loc 1 147 5 view .LVU103
 315 0020 002C     		cmp	r4, #0
 316 0022 0ADA     		bge	.L30
 148:./Hardware/MQTT/MqttKit.c **** 		{
 149:./Hardware/MQTT/MqttKit.c **** 			return i + 1;
 150:./Hardware/MQTT/MqttKit.c **** 		}
 151:./Hardware/MQTT/MqttKit.c **** 
 152:./Hardware/MQTT/MqttKit.c **** 		multiplier <<= 7;
 317              		.loc 1 152 3 is_stmt 1 view .LVU104
 318              		.loc 1 152 14 is_stmt 0 view .LVU105
 319 0024 4FEACC1C 		lsl	ip, ip, #7
 320              	.LVL26:
 153:./Hardware/MQTT/MqttKit.c **** 		if(multiplier >= 2097152)		//128 * *128 * *128
 321              		.loc 1 153 3 is_stmt 1 view .LVU106
 322              		.loc 1 153 5 is_stmt 0 view .LVU107
 323 0028 BCF5001F 		cmp	ip, #2097152
 324 002c 07D2     		bcs	.L24
 143:./Hardware/MQTT/MqttKit.c **** 	{
 325              		.loc 1 143 23 is_stmt 1 discriminator 2 view .LVU108
 326 002e 0133     		adds	r3, r3, #1
 327              	.LVL27:
 143:./Hardware/MQTT/MqttKit.c **** 	{
 328              		.loc 1 143 13 discriminator 2 view .LVU109
 143:./Hardware/MQTT/MqttKit.c **** 	{
 329              		.loc 1 143 2 is_stmt 0 discriminator 2 view .LVU110
 330 0030 8B42     		cmp	r3, r1
 331 0032 ECDB     		blt	.L23
ARM GAS  /tmp/ccYLmkow.s 			page 10


 154:./Hardware/MQTT/MqttKit.c **** 		{
 155:./Hardware/MQTT/MqttKit.c **** 			return -2;					// error, out of range
 156:./Hardware/MQTT/MqttKit.c **** 		}
 157:./Hardware/MQTT/MqttKit.c **** 	}
 158:./Hardware/MQTT/MqttKit.c **** 
 159:./Hardware/MQTT/MqttKit.c **** 	return -1;							// not complete
 332              		.loc 1 159 9 view .LVU111
 333 0034 4FF0FF30 		mov	r0, #-1
 334              	.LVL28:
 335              		.loc 1 159 9 view .LVU112
 336 0038 03E0     		b	.L19
 337              	.LVL29:
 338              	.L30:
 149:./Hardware/MQTT/MqttKit.c **** 		}
 339              		.loc 1 149 4 is_stmt 1 view .LVU113
 149:./Hardware/MQTT/MqttKit.c **** 		}
 340              		.loc 1 149 13 is_stmt 0 view .LVU114
 341 003a 581C     		adds	r0, r3, #1
 342              	.LVL30:
 149:./Hardware/MQTT/MqttKit.c **** 		}
 343              		.loc 1 149 13 view .LVU115
 344 003c 01E0     		b	.L19
 345              	.LVL31:
 346              	.L24:
 155:./Hardware/MQTT/MqttKit.c **** 		}
 347              		.loc 1 155 11 view .LVU116
 348 003e 6FF00100 		mvn	r0, #1
 349              	.LVL32:
 350              	.L19:
 160:./Hardware/MQTT/MqttKit.c **** 
 161:./Hardware/MQTT/MqttKit.c **** }
 351              		.loc 1 161 1 view .LVU117
 352 0042 10BD     		pop	{r4, pc}
 353              	.LVL33:
 354              	.L29:
 355              	.LCFI3:
 356              		.cfi_def_cfa_offset 0
 357              		.cfi_restore 4
 358              		.cfi_restore 14
 159:./Hardware/MQTT/MqttKit.c **** 
 359              		.loc 1 159 9 view .LVU118
 360 0044 4FF0FF30 		mov	r0, #-1
 361              	.LVL34:
 362              		.loc 1 161 1 view .LVU119
 363 0048 7047     		bx	lr
 364              		.cfi_endproc
 365              	.LFE3:
 367              		.section	.rodata.MQTT_UnPacketRecv.str1.4,"aMS",%progbits,1
 368              		.align	2
 369              	.LC0:
 370 0000 24637265 		.ascii	"$creq\000"
 370      7100
 371              		.section	.text.MQTT_UnPacketRecv,"ax",%progbits
 372              		.align	1
 373              		.global	MQTT_UnPacketRecv
 374              		.syntax unified
 375              		.thumb
ARM GAS  /tmp/ccYLmkow.s 			page 11


 376              		.thumb_func
 377              		.fpu softvfp
 379              	MQTT_UnPacketRecv:
 380              	.LVL35:
 381              	.LFB4:
 162:./Hardware/MQTT/MqttKit.c **** 
 163:./Hardware/MQTT/MqttKit.c **** //==========================================================
 164:./Hardware/MQTT/MqttKit.c **** //	函数名称：	MQTT_UnPacketRecv
 165:./Hardware/MQTT/MqttKit.c **** //
 166:./Hardware/MQTT/MqttKit.c **** //	函数功能：	MQTT数据接收类型判断
 167:./Hardware/MQTT/MqttKit.c **** //
 168:./Hardware/MQTT/MqttKit.c **** //	入口参数：	dataPtr：接收的数据指针
 169:./Hardware/MQTT/MqttKit.c **** //
 170:./Hardware/MQTT/MqttKit.c **** //	返回参数：	0-成功		其他-失败原因
 171:./Hardware/MQTT/MqttKit.c **** //
 172:./Hardware/MQTT/MqttKit.c **** //	说明：		
 173:./Hardware/MQTT/MqttKit.c **** //==========================================================
 174:./Hardware/MQTT/MqttKit.c **** uint8 MQTT_UnPacketRecv(uint8 *dataPtr)
 175:./Hardware/MQTT/MqttKit.c **** {
 382              		.loc 1 175 1 is_stmt 1 view -0
 383              		.cfi_startproc
 384              		@ args = 0, pretend = 0, frame = 8
 385              		@ frame_needed = 0, uses_anonymous_args = 0
 386              		.loc 1 175 1 is_stmt 0 view .LVU121
 387 0000 30B5     		push	{r4, r5, lr}
 388              	.LCFI4:
 389              		.cfi_def_cfa_offset 12
 390              		.cfi_offset 4, -12
 391              		.cfi_offset 5, -8
 392              		.cfi_offset 14, -4
 393 0002 83B0     		sub	sp, sp, #12
 394              	.LCFI5:
 395              		.cfi_def_cfa_offset 24
 176:./Hardware/MQTT/MqttKit.c **** 	
 177:./Hardware/MQTT/MqttKit.c **** 	uint8 status = 255;
 396              		.loc 1 177 2 is_stmt 1 view .LVU122
 397              	.LVL36:
 178:./Hardware/MQTT/MqttKit.c **** 	uint8 type = dataPtr[0] >> 4;				//类型检查
 398              		.loc 1 178 2 view .LVU123
 399              		.loc 1 178 22 is_stmt 0 view .LVU124
 400 0004 0478     		ldrb	r4, [r0]	@ zero_extendqisi2
 401              		.loc 1 178 8 view .LVU125
 402 0006 2409     		lsrs	r4, r4, #4
 403              	.LVL37:
 179:./Hardware/MQTT/MqttKit.c **** 	
 180:./Hardware/MQTT/MqttKit.c **** 	if(type < 1 || type > 14)
 404              		.loc 1 180 2 is_stmt 1 view .LVU126
 405              		.loc 1 180 14 is_stmt 0 view .LVU127
 406 0008 631E     		subs	r3, r4, #1
 407 000a DBB2     		uxtb	r3, r3
 408              		.loc 1 180 4 view .LVU128
 409 000c 0D2B     		cmp	r3, #13
 410 000e 26D8     		bhi	.L35
 411 0010 0546     		mov	r5, r0
 181:./Hardware/MQTT/MqttKit.c **** 		return status;
 182:./Hardware/MQTT/MqttKit.c **** 	
 183:./Hardware/MQTT/MqttKit.c **** 	if(type == MQTT_PKT_PUBLISH)
ARM GAS  /tmp/ccYLmkow.s 			page 12


 412              		.loc 1 183 2 is_stmt 1 view .LVU129
 413              		.loc 1 183 4 is_stmt 0 view .LVU130
 414 0012 032C     		cmp	r4, #3
 415 0014 02D0     		beq	.L37
 416              	.LVL38:
 417              	.L32:
 184:./Hardware/MQTT/MqttKit.c **** 	{
 185:./Hardware/MQTT/MqttKit.c **** 		uint8 *msgPtr;
 186:./Hardware/MQTT/MqttKit.c **** 		uint32 remain_len = 0;
 187:./Hardware/MQTT/MqttKit.c **** 		
 188:./Hardware/MQTT/MqttKit.c **** 		msgPtr = dataPtr + MQTT_ReadLength(dataPtr + 1, 4, &remain_len) + 1;
 189:./Hardware/MQTT/MqttKit.c **** 		
 190:./Hardware/MQTT/MqttKit.c **** 		if(remain_len < 2 || dataPtr[0] & 0x01)					//retain
 191:./Hardware/MQTT/MqttKit.c **** 			return 255;
 192:./Hardware/MQTT/MqttKit.c **** 		
 193:./Hardware/MQTT/MqttKit.c **** 		if(remain_len < ((uint16)msgPtr[0] << 8 | msgPtr[1]) + 2)
 194:./Hardware/MQTT/MqttKit.c **** 			return 255;
 195:./Hardware/MQTT/MqttKit.c **** 		
 196:./Hardware/MQTT/MqttKit.c **** 		if(strstr((int8 *)msgPtr + 2, CMD_TOPIC_PREFIX) != NULL)	//如果是命令下发
 197:./Hardware/MQTT/MqttKit.c **** 			status = MQTT_PKT_CMD;
 198:./Hardware/MQTT/MqttKit.c **** 		else
 199:./Hardware/MQTT/MqttKit.c **** 			status = MQTT_PKT_PUBLISH;
 200:./Hardware/MQTT/MqttKit.c **** 	}
 201:./Hardware/MQTT/MqttKit.c **** 	else
 202:./Hardware/MQTT/MqttKit.c **** 		status = type;
 203:./Hardware/MQTT/MqttKit.c **** 	
 204:./Hardware/MQTT/MqttKit.c **** 	return status;
 205:./Hardware/MQTT/MqttKit.c **** 
 206:./Hardware/MQTT/MqttKit.c **** }
 418              		.loc 1 206 1 view .LVU131
 419 0016 2046     		mov	r0, r4
 420 0018 03B0     		add	sp, sp, #12
 421              	.LCFI6:
 422              		.cfi_remember_state
 423              		.cfi_def_cfa_offset 12
 424              		@ sp needed
 425 001a 30BD     		pop	{r4, r5, pc}
 426              	.LVL39:
 427              	.L37:
 428              	.LCFI7:
 429              		.cfi_restore_state
 430              	.LBB2:
 185:./Hardware/MQTT/MqttKit.c **** 		uint32 remain_len = 0;
 431              		.loc 1 185 3 is_stmt 1 view .LVU132
 186:./Hardware/MQTT/MqttKit.c **** 		
 432              		.loc 1 186 3 view .LVU133
 186:./Hardware/MQTT/MqttKit.c **** 		
 433              		.loc 1 186 10 is_stmt 0 view .LVU134
 434 001c 0023     		movs	r3, #0
 435 001e 0193     		str	r3, [sp, #4]
 188:./Hardware/MQTT/MqttKit.c **** 		
 436              		.loc 1 188 3 is_stmt 1 view .LVU135
 188:./Hardware/MQTT/MqttKit.c **** 		
 437              		.loc 1 188 22 is_stmt 0 view .LVU136
 438 0020 01AA     		add	r2, sp, #4
 439 0022 0421     		movs	r1, #4
 440 0024 0130     		adds	r0, r0, #1
ARM GAS  /tmp/ccYLmkow.s 			page 13


 441              	.LVL40:
 188:./Hardware/MQTT/MqttKit.c **** 		
 442              		.loc 1 188 22 view .LVU137
 443 0026 FFF7FEFF 		bl	MQTT_ReadLength
 444              	.LVL41:
 188:./Hardware/MQTT/MqttKit.c **** 		
 445              		.loc 1 188 67 view .LVU138
 446 002a 431C     		adds	r3, r0, #1
 188:./Hardware/MQTT/MqttKit.c **** 		
 447              		.loc 1 188 10 view .LVU139
 448 002c E818     		adds	r0, r5, r3
 449              	.LVL42:
 190:./Hardware/MQTT/MqttKit.c **** 			return 255;
 450              		.loc 1 190 3 is_stmt 1 view .LVU140
 190:./Hardware/MQTT/MqttKit.c **** 			return 255;
 451              		.loc 1 190 17 is_stmt 0 view .LVU141
 452 002e 019A     		ldr	r2, [sp, #4]
 190:./Hardware/MQTT/MqttKit.c **** 			return 255;
 453              		.loc 1 190 5 view .LVU142
 454 0030 012A     		cmp	r2, #1
 455 0032 12D9     		bls	.L33
 190:./Hardware/MQTT/MqttKit.c **** 			return 255;
 456              		.loc 1 190 31 discriminator 1 view .LVU143
 457 0034 2978     		ldrb	r1, [r5]	@ zero_extendqisi2
 190:./Hardware/MQTT/MqttKit.c **** 			return 255;
 458              		.loc 1 190 21 discriminator 1 view .LVU144
 459 0036 11F0010F 		tst	r1, #1
 460 003a 0ED1     		bne	.L33
 193:./Hardware/MQTT/MqttKit.c **** 			return 255;
 461              		.loc 1 193 3 is_stmt 1 view .LVU145
 193:./Hardware/MQTT/MqttKit.c **** 			return 255;
 462              		.loc 1 193 34 is_stmt 0 view .LVU146
 463 003c E95C     		ldrb	r1, [r5, r3]	@ zero_extendqisi2
 193:./Hardware/MQTT/MqttKit.c **** 			return 255;
 464              		.loc 1 193 51 view .LVU147
 465 003e 4378     		ldrb	r3, [r0, #1]	@ zero_extendqisi2
 193:./Hardware/MQTT/MqttKit.c **** 			return 255;
 466              		.loc 1 193 43 view .LVU148
 467 0040 43EA0123 		orr	r3, r3, r1, lsl #8
 193:./Hardware/MQTT/MqttKit.c **** 			return 255;
 468              		.loc 1 193 56 view .LVU149
 469 0044 0233     		adds	r3, r3, #2
 193:./Hardware/MQTT/MqttKit.c **** 			return 255;
 470              		.loc 1 193 5 view .LVU150
 471 0046 9A42     		cmp	r2, r3
 472 0048 07D3     		bcc	.L33
 196:./Hardware/MQTT/MqttKit.c **** 			status = MQTT_PKT_CMD;
 473              		.loc 1 196 3 is_stmt 1 view .LVU151
 196:./Hardware/MQTT/MqttKit.c **** 			status = MQTT_PKT_CMD;
 474              		.loc 1 196 6 is_stmt 0 view .LVU152
 475 004a 0649     		ldr	r1, .L38
 476 004c 0230     		adds	r0, r0, #2
 477              	.LVL43:
 196:./Hardware/MQTT/MqttKit.c **** 			status = MQTT_PKT_CMD;
 478              		.loc 1 196 6 view .LVU153
 479 004e FFF7FEFF 		bl	strstr
 480              	.LVL44:
ARM GAS  /tmp/ccYLmkow.s 			page 14


 196:./Hardware/MQTT/MqttKit.c **** 			status = MQTT_PKT_CMD;
 481              		.loc 1 196 5 view .LVU154
 482 0052 0028     		cmp	r0, #0
 483 0054 DFD0     		beq	.L32
 197:./Hardware/MQTT/MqttKit.c **** 		else
 484              		.loc 1 197 11 view .LVU155
 485 0056 0F24     		movs	r4, #15
 486              	.LVL45:
 197:./Hardware/MQTT/MqttKit.c **** 		else
 487              		.loc 1 197 11 view .LVU156
 488 0058 DDE7     		b	.L32
 489              	.LVL46:
 490              	.L33:
 191:./Hardware/MQTT/MqttKit.c **** 		
 491              		.loc 1 191 11 discriminator 1 view .LVU157
 492 005a FF24     		movs	r4, #255
 493              	.LVL47:
 191:./Hardware/MQTT/MqttKit.c **** 		
 494              		.loc 1 191 11 discriminator 1 view .LVU158
 495 005c DBE7     		b	.L32
 496              	.LVL48:
 497              	.L35:
 191:./Hardware/MQTT/MqttKit.c **** 		
 498              		.loc 1 191 11 discriminator 1 view .LVU159
 499              	.LBE2:
 181:./Hardware/MQTT/MqttKit.c **** 	
 500              		.loc 1 181 10 view .LVU160
 501 005e FF24     		movs	r4, #255
 502              	.LVL49:
 181:./Hardware/MQTT/MqttKit.c **** 	
 503              		.loc 1 181 10 view .LVU161
 504 0060 D9E7     		b	.L32
 505              	.L39:
 506 0062 00BF     		.align	2
 507              	.L38:
 508 0064 00000000 		.word	.LC0
 509              		.cfi_endproc
 510              	.LFE4:
 512              		.section	.rodata.MQTT_PacketConnect.str1.4,"aMS",%progbits,1
 513              		.align	2
 514              	.LC1:
 515 0000 00       		.ascii	"\000"
 516              		.section	.text.MQTT_PacketConnect,"ax",%progbits
 517              		.align	1
 518              		.global	MQTT_PacketConnect
 519              		.syntax unified
 520              		.thumb
 521              		.thumb_func
 522              		.fpu softvfp
 524              	MQTT_PacketConnect:
 525              	.LVL50:
 526              	.LFB5:
 207:./Hardware/MQTT/MqttKit.c **** 
 208:./Hardware/MQTT/MqttKit.c **** //==========================================================
 209:./Hardware/MQTT/MqttKit.c **** //	函数名称：	MQTT_PacketConnect
 210:./Hardware/MQTT/MqttKit.c **** //
 211:./Hardware/MQTT/MqttKit.c **** //	函数功能：	连接消息组包
ARM GAS  /tmp/ccYLmkow.s 			page 15


 212:./Hardware/MQTT/MqttKit.c **** //
 213:./Hardware/MQTT/MqttKit.c **** //	入口参数：	user：用户名：产品ID
 214:./Hardware/MQTT/MqttKit.c **** //				password：密码：鉴权信息或apikey
 215:./Hardware/MQTT/MqttKit.c **** //				devid：设备ID
 216:./Hardware/MQTT/MqttKit.c **** //				cTime：连接保持时间
 217:./Hardware/MQTT/MqttKit.c **** //				clean_session：离线消息清除标志
 218:./Hardware/MQTT/MqttKit.c **** //				qos：重发标志
 219:./Hardware/MQTT/MqttKit.c **** //				will_topic：异常离线topic
 220:./Hardware/MQTT/MqttKit.c **** //				will_msg：异常离线消息
 221:./Hardware/MQTT/MqttKit.c **** //				will_retain：消息推送标志
 222:./Hardware/MQTT/MqttKit.c **** //				mqttPacket：包指针
 223:./Hardware/MQTT/MqttKit.c **** //
 224:./Hardware/MQTT/MqttKit.c **** //	返回参数：	0-成功		其他-失败
 225:./Hardware/MQTT/MqttKit.c **** //
 226:./Hardware/MQTT/MqttKit.c **** //	说明：		
 227:./Hardware/MQTT/MqttKit.c **** //==========================================================
 228:./Hardware/MQTT/MqttKit.c **** uint8 MQTT_PacketConnect(const int8 *user, const int8 *password, const int8 *devid,
 229:./Hardware/MQTT/MqttKit.c **** 						uint16 cTime, uint1 clean_session, uint1 qos,
 230:./Hardware/MQTT/MqttKit.c **** 						const int8 *will_topic, const int8 *will_msg, int32 will_retain,
 231:./Hardware/MQTT/MqttKit.c **** 						MQTT_PACKET_STRUCTURE *mqttPacket)
 232:./Hardware/MQTT/MqttKit.c **** {
 527              		.loc 1 232 1 is_stmt 1 view -0
 528              		.cfi_startproc
 529              		@ args = 24, pretend = 0, frame = 16
 530              		@ frame_needed = 0, uses_anonymous_args = 0
 531              		.loc 1 232 1 is_stmt 0 view .LVU163
 532 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 533              	.LCFI8:
 534              		.cfi_def_cfa_offset 36
 535              		.cfi_offset 4, -36
 536              		.cfi_offset 5, -32
 537              		.cfi_offset 6, -28
 538              		.cfi_offset 7, -24
 539              		.cfi_offset 8, -20
 540              		.cfi_offset 9, -16
 541              		.cfi_offset 10, -12
 542              		.cfi_offset 11, -8
 543              		.cfi_offset 14, -4
 544 0004 85B0     		sub	sp, sp, #20
 545              	.LCFI9:
 546              		.cfi_def_cfa_offset 56
 547 0006 0190     		str	r0, [sp, #4]
 548 0008 0F46     		mov	r7, r1
 549 000a 1646     		mov	r6, r2
 550 000c 0393     		str	r3, [sp, #12]
 551 000e 9DF83850 		ldrb	r5, [sp, #56]	@ zero_extendqisi2
 552 0012 9DF83CB0 		ldrb	fp, [sp, #60]	@ zero_extendqisi2
 553 0016 139C     		ldr	r4, [sp, #76]
 233:./Hardware/MQTT/MqttKit.c **** 	
 234:./Hardware/MQTT/MqttKit.c **** 	uint8 flags = 0;
 554              		.loc 1 234 2 is_stmt 1 view .LVU164
 555              	.LVL51:
 235:./Hardware/MQTT/MqttKit.c **** 	uint8 will_topic_len = 0;
 556              		.loc 1 235 2 view .LVU165
 236:./Hardware/MQTT/MqttKit.c **** 	uint16 total_len = 15;
 557              		.loc 1 236 2 view .LVU166
 237:./Hardware/MQTT/MqttKit.c **** 	int16 len = 0, devid_len = strlen(devid);
ARM GAS  /tmp/ccYLmkow.s 			page 16


 558              		.loc 1 237 2 view .LVU167
 559              		.loc 1 237 29 is_stmt 0 view .LVU168
 560 0018 1046     		mov	r0, r2
 561              	.LVL52:
 562              		.loc 1 237 29 view .LVU169
 563 001a FFF7FEFF 		bl	strlen
 564              	.LVL53:
 565              		.loc 1 237 29 view .LVU170
 566 001e 0290     		str	r0, [sp, #8]
 567              	.LVL54:
 238:./Hardware/MQTT/MqttKit.c **** 	
 239:./Hardware/MQTT/MqttKit.c **** 	if(!devid)
 568              		.loc 1 239 2 is_stmt 1 view .LVU171
 569              		.loc 1 239 4 is_stmt 0 view .LVU172
 570 0020 002E     		cmp	r6, #0
 571 0022 00F03A81 		beq	.L52
 572 0026 0FFA80FA 		sxth	r10, r0
 240:./Hardware/MQTT/MqttKit.c **** 		return 1;
 241:./Hardware/MQTT/MqttKit.c **** 	
 242:./Hardware/MQTT/MqttKit.c **** 	total_len += devid_len + 2;
 573              		.loc 1 242 2 is_stmt 1 view .LVU173
 574              		.loc 1 242 12 is_stmt 0 view .LVU174
 575 002a 00F11109 		add	r9, r0, #17
 576 002e 1FFA89F9 		uxth	r9, r9
 577              	.LVL55:
 243:./Hardware/MQTT/MqttKit.c **** 	
 244:./Hardware/MQTT/MqttKit.c **** 	//断线后，是否清理离线消息：1-清理	0-不清理-------------------------------------
 245:./Hardware/MQTT/MqttKit.c **** 	if(clean_session)
 578              		.loc 1 245 2 is_stmt 1 view .LVU175
 579              		.loc 1 245 4 is_stmt 0 view .LVU176
 580 0032 1DBB     		cbnz	r5, .L53
 234:./Hardware/MQTT/MqttKit.c **** 	uint8 will_topic_len = 0;
 581              		.loc 1 234 8 view .LVU177
 582 0034 4FF00008 		mov	r8, #0
 583              	.L42:
 584              	.LVL56:
 246:./Hardware/MQTT/MqttKit.c **** 	{
 247:./Hardware/MQTT/MqttKit.c **** 		flags |= MQTT_CONNECT_CLEAN_SESSION;
 248:./Hardware/MQTT/MqttKit.c **** 	}
 249:./Hardware/MQTT/MqttKit.c **** 	
 250:./Hardware/MQTT/MqttKit.c **** 	//异常掉线情况下，服务器发布的topic-------------------------------------------------
 251:./Hardware/MQTT/MqttKit.c **** 	if(will_topic)
 585              		.loc 1 251 2 is_stmt 1 view .LVU178
 586              		.loc 1 251 4 is_stmt 0 view .LVU179
 587 0038 109B     		ldr	r3, [sp, #64]
 588 003a 8BB1     		cbz	r3, .L43
 252:./Hardware/MQTT/MqttKit.c **** 	{
 253:./Hardware/MQTT/MqttKit.c **** 		flags |= MQTT_CONNECT_WILL_FLAG;
 589              		.loc 1 253 3 is_stmt 1 view .LVU180
 590              		.loc 1 253 9 is_stmt 0 view .LVU181
 591 003c 48F00408 		orr	r8, r8, #4
 592              	.LVL57:
 254:./Hardware/MQTT/MqttKit.c **** 		will_topic_len = strlen(will_topic);
 593              		.loc 1 254 3 is_stmt 1 view .LVU182
 594              		.loc 1 254 20 is_stmt 0 view .LVU183
 595 0040 1846     		mov	r0, r3
 596              	.LVL58:
ARM GAS  /tmp/ccYLmkow.s 			page 17


 597              		.loc 1 254 20 view .LVU184
 598 0042 FFF7FEFF 		bl	strlen
 599              	.LVL59:
 600              		.loc 1 254 18 view .LVU185
 601 0046 C5B2     		uxtb	r5, r0
 602              	.LVL60:
 255:./Hardware/MQTT/MqttKit.c **** 		total_len += 4 + will_topic_len + strlen(will_msg);
 603              		.loc 1 255 3 is_stmt 1 view .LVU186
 604              		.loc 1 255 37 is_stmt 0 view .LVU187
 605 0048 1198     		ldr	r0, [sp, #68]
 606 004a FFF7FEFF 		bl	strlen
 607              	.LVL61:
 608              		.loc 1 255 35 view .LVU188
 609 004e 0544     		add	r5, r5, r0
 610              	.LVL62:
 611              		.loc 1 255 35 view .LVU189
 612 0050 ADB2     		uxth	r5, r5
 613              		.loc 1 255 13 view .LVU190
 614 0052 A944     		add	r9, r9, r5
 615              	.LVL63:
 616              		.loc 1 255 13 view .LVU191
 617 0054 1FFA89F9 		uxth	r9, r9
 618 0058 09F10409 		add	r9, r9, #4
 619 005c 1FFA89F9 		uxth	r9, r9
 620              	.LVL64:
 621              	.L43:
 256:./Hardware/MQTT/MqttKit.c **** 	}
 257:./Hardware/MQTT/MqttKit.c **** 	
 258:./Hardware/MQTT/MqttKit.c **** 	//qos级别--主要用于PUBLISH（发布态）消息的，保证消息传递的次数------------
 259:./Hardware/MQTT/MqttKit.c **** 	switch((unsigned char)qos)
 622              		.loc 1 259 2 is_stmt 1 view .LVU192
 623 0060 BBF1010F 		cmp	fp, #1
 624 0064 0DD0     		beq	.L44
 625              		.loc 1 259 2 is_stmt 0 view .LVU193
 626 0066 BBF1020F 		cmp	fp, #2
 627 006a 00F0EF80 		beq	.L45
 628 006e BBF1000F 		cmp	fp, #0
 629 0072 08D0     		beq	.L46
 630 0074 0220     		movs	r0, #2
 631              	.LVL65:
 632              	.L41:
 260:./Hardware/MQTT/MqttKit.c **** 	{
 261:./Hardware/MQTT/MqttKit.c **** 		case MQTT_QOS_LEVEL0:
 262:./Hardware/MQTT/MqttKit.c **** 			flags |= MQTT_CONNECT_WILL_QOS0;							//最多一次
 263:./Hardware/MQTT/MqttKit.c **** 		break;
 264:./Hardware/MQTT/MqttKit.c **** 		
 265:./Hardware/MQTT/MqttKit.c **** 		case MQTT_QOS_LEVEL1:
 266:./Hardware/MQTT/MqttKit.c **** 			flags |= (MQTT_CONNECT_WILL_FLAG | MQTT_CONNECT_WILL_QOS1);	//最少一次
 267:./Hardware/MQTT/MqttKit.c **** 		break;
 268:./Hardware/MQTT/MqttKit.c **** 		
 269:./Hardware/MQTT/MqttKit.c **** 		case MQTT_QOS_LEVEL2:
 270:./Hardware/MQTT/MqttKit.c **** 			flags |= (MQTT_CONNECT_WILL_FLAG | MQTT_CONNECT_WILL_QOS2);	//只有一次
 271:./Hardware/MQTT/MqttKit.c **** 		break;
 272:./Hardware/MQTT/MqttKit.c **** 		
 273:./Hardware/MQTT/MqttKit.c **** 		default:
 274:./Hardware/MQTT/MqttKit.c **** 		return 2;
 275:./Hardware/MQTT/MqttKit.c **** 	}
ARM GAS  /tmp/ccYLmkow.s 			page 18


 276:./Hardware/MQTT/MqttKit.c **** 	
 277:./Hardware/MQTT/MqttKit.c **** 	//主要用于PUBLISH(发布态)的消息，表示服务器要保留这次推送的信息，如果
 278:./Hardware/MQTT/MqttKit.c **** 	if(will_retain)
 279:./Hardware/MQTT/MqttKit.c **** 	{
 280:./Hardware/MQTT/MqttKit.c **** 		flags |= (MQTT_CONNECT_WILL_FLAG | MQTT_CONNECT_WILL_RETAIN);
 281:./Hardware/MQTT/MqttKit.c **** 	}
 282:./Hardware/MQTT/MqttKit.c **** 	
 283:./Hardware/MQTT/MqttKit.c **** 	//账号为空 密码为空---------------------------------------------------------------------
 284:./Hardware/MQTT/MqttKit.c **** 	if(!user || !password)
 285:./Hardware/MQTT/MqttKit.c **** 	{
 286:./Hardware/MQTT/MqttKit.c **** 		return 3;
 287:./Hardware/MQTT/MqttKit.c **** 	}
 288:./Hardware/MQTT/MqttKit.c **** 	flags |= MQTT_CONNECT_USER_NAME | MQTT_CONNECT_PASSORD;
 289:./Hardware/MQTT/MqttKit.c **** 	
 290:./Hardware/MQTT/MqttKit.c **** 	total_len += strlen(user) + strlen(password) + 4;
 291:./Hardware/MQTT/MqttKit.c **** 	
 292:./Hardware/MQTT/MqttKit.c **** 	//分配内存-----------------------------------------------------------------------------
 293:./Hardware/MQTT/MqttKit.c **** 	MQTT_NewBuffer(mqttPacket, total_len);
 294:./Hardware/MQTT/MqttKit.c **** 	if(mqttPacket->_data == NULL)
 295:./Hardware/MQTT/MqttKit.c **** 		return 4;
 296:./Hardware/MQTT/MqttKit.c **** 	
 297:./Hardware/MQTT/MqttKit.c **** 	memset(mqttPacket->_data, 0, total_len);
 298:./Hardware/MQTT/MqttKit.c **** 	
 299:./Hardware/MQTT/MqttKit.c **** /*************************************固定头部***********************************************/
 300:./Hardware/MQTT/MqttKit.c **** 	
 301:./Hardware/MQTT/MqttKit.c **** 	//固定头部----------------------连接请求类型--------------------------------------------
 302:./Hardware/MQTT/MqttKit.c **** 	mqttPacket->_data[mqttPacket->_len++] = MQTT_PKT_CONNECT << 4;
 303:./Hardware/MQTT/MqttKit.c **** 	
 304:./Hardware/MQTT/MqttKit.c **** 	//固定头部----------------------剩余长度值-----------------------------------------------
 305:./Hardware/MQTT/MqttKit.c **** 	len = MQTT_DumpLength(total_len - 5, mqttPacket->_data + mqttPacket->_len);
 306:./Hardware/MQTT/MqttKit.c **** 	if(len < 0)
 307:./Hardware/MQTT/MqttKit.c **** 	{
 308:./Hardware/MQTT/MqttKit.c **** 		MQTT_DeleteBuffer(mqttPacket);
 309:./Hardware/MQTT/MqttKit.c **** 		return 5;
 310:./Hardware/MQTT/MqttKit.c **** 	}
 311:./Hardware/MQTT/MqttKit.c **** 	else
 312:./Hardware/MQTT/MqttKit.c **** 		mqttPacket->_len += len;
 313:./Hardware/MQTT/MqttKit.c **** 	
 314:./Hardware/MQTT/MqttKit.c **** /*************************************可变头部***********************************************/
 315:./Hardware/MQTT/MqttKit.c **** 	
 316:./Hardware/MQTT/MqttKit.c **** 	//可变头部----------------------协议名长度 和 协议名---------------------------------
 317:./Hardware/MQTT/MqttKit.c **** 	mqttPacket->_data[mqttPacket->_len++] = 0;
 318:./Hardware/MQTT/MqttKit.c **** 	mqttPacket->_data[mqttPacket->_len++] = 4;
 319:./Hardware/MQTT/MqttKit.c **** 	mqttPacket->_data[mqttPacket->_len++] = 'M';
 320:./Hardware/MQTT/MqttKit.c **** 	mqttPacket->_data[mqttPacket->_len++] = 'Q';
 321:./Hardware/MQTT/MqttKit.c **** 	mqttPacket->_data[mqttPacket->_len++] = 'T';
 322:./Hardware/MQTT/MqttKit.c **** 	mqttPacket->_data[mqttPacket->_len++] = 'T';
 323:./Hardware/MQTT/MqttKit.c **** 	
 324:./Hardware/MQTT/MqttKit.c **** 	//可变头部----------------------protocol level 4-----------------------------------------
 325:./Hardware/MQTT/MqttKit.c **** 	mqttPacket->_data[mqttPacket->_len++] = 4;
 326:./Hardware/MQTT/MqttKit.c **** 	
 327:./Hardware/MQTT/MqttKit.c **** 	//可变头部----------------------连接标志(该函数开头处理的数据)------------------
 328:./Hardware/MQTT/MqttKit.c ****     mqttPacket->_data[mqttPacket->_len++] = flags;
 329:./Hardware/MQTT/MqttKit.c **** 	
 330:./Hardware/MQTT/MqttKit.c **** 	//可变头部----------------------保持连接的时间(秒)------------------------------------
 331:./Hardware/MQTT/MqttKit.c **** 	mqttPacket->_data[mqttPacket->_len++] = MOSQ_MSB(cTime);
 332:./Hardware/MQTT/MqttKit.c **** 	mqttPacket->_data[mqttPacket->_len++] = MOSQ_LSB(cTime);
ARM GAS  /tmp/ccYLmkow.s 			page 19


 333:./Hardware/MQTT/MqttKit.c **** 	 
 334:./Hardware/MQTT/MqttKit.c **** /*************************************消息体************************************************/
 335:./Hardware/MQTT/MqttKit.c **** 
 336:./Hardware/MQTT/MqttKit.c **** 	//消息体----------------------------devid长度、devid-------------------------------------
 337:./Hardware/MQTT/MqttKit.c **** 	mqttPacket->_data[mqttPacket->_len++] = MOSQ_MSB(devid_len);
 338:./Hardware/MQTT/MqttKit.c **** 	mqttPacket->_data[mqttPacket->_len++] = MOSQ_LSB(devid_len);
 339:./Hardware/MQTT/MqttKit.c **** 	
 340:./Hardware/MQTT/MqttKit.c **** 	strncat((int8 *)mqttPacket->_data + mqttPacket->_len, devid, devid_len);
 341:./Hardware/MQTT/MqttKit.c **** 	mqttPacket->_len += devid_len;
 342:./Hardware/MQTT/MqttKit.c **** 	
 343:./Hardware/MQTT/MqttKit.c **** 	//消息体----------------------------will_flag 和 will_msg---------------------------------
 344:./Hardware/MQTT/MqttKit.c **** 	if(flags & MQTT_CONNECT_WILL_FLAG)
 345:./Hardware/MQTT/MqttKit.c **** 	{
 346:./Hardware/MQTT/MqttKit.c **** 		unsigned short mLen = 0;
 347:./Hardware/MQTT/MqttKit.c **** 		
 348:./Hardware/MQTT/MqttKit.c **** 		if(!will_msg)
 349:./Hardware/MQTT/MqttKit.c **** 			will_msg = "";
 350:./Hardware/MQTT/MqttKit.c **** 		
 351:./Hardware/MQTT/MqttKit.c **** 		mLen = strlen(will_topic);
 352:./Hardware/MQTT/MqttKit.c **** 		mqttPacket->_data[mqttPacket->_len++] = MOSQ_MSB(mLen);
 353:./Hardware/MQTT/MqttKit.c **** 		mqttPacket->_data[mqttPacket->_len++] = MOSQ_LSB(mLen);
 354:./Hardware/MQTT/MqttKit.c **** 		strncat((int8 *)mqttPacket->_data + mqttPacket->_len, will_topic, mLen);
 355:./Hardware/MQTT/MqttKit.c **** 		mqttPacket->_len += mLen;
 356:./Hardware/MQTT/MqttKit.c **** 		
 357:./Hardware/MQTT/MqttKit.c **** 		mLen = strlen(will_msg);
 358:./Hardware/MQTT/MqttKit.c **** 		mqttPacket->_data[mqttPacket->_len++] = MOSQ_MSB(mLen);
 359:./Hardware/MQTT/MqttKit.c **** 		mqttPacket->_data[mqttPacket->_len++] = MOSQ_LSB(mLen);
 360:./Hardware/MQTT/MqttKit.c **** 		strncat((int8 *)mqttPacket->_data + mqttPacket->_len, will_msg, mLen);
 361:./Hardware/MQTT/MqttKit.c **** 		mqttPacket->_len += mLen;
 362:./Hardware/MQTT/MqttKit.c **** 	}
 363:./Hardware/MQTT/MqttKit.c **** 	
 364:./Hardware/MQTT/MqttKit.c **** 	//消息体----------------------------use---------------------------------------------------
 365:./Hardware/MQTT/MqttKit.c **** 	if(flags & MQTT_CONNECT_USER_NAME)
 366:./Hardware/MQTT/MqttKit.c **** 	{
 367:./Hardware/MQTT/MqttKit.c **** 		unsigned short user_len = strlen(user);
 368:./Hardware/MQTT/MqttKit.c **** 		
 369:./Hardware/MQTT/MqttKit.c **** 		mqttPacket->_data[mqttPacket->_len++] = MOSQ_MSB(user_len);
 370:./Hardware/MQTT/MqttKit.c **** 		mqttPacket->_data[mqttPacket->_len++] = MOSQ_LSB(user_len);
 371:./Hardware/MQTT/MqttKit.c **** 		strncat((int8 *)mqttPacket->_data + mqttPacket->_len, user, user_len);
 372:./Hardware/MQTT/MqttKit.c **** 		mqttPacket->_len += user_len;
 373:./Hardware/MQTT/MqttKit.c **** 	}
 374:./Hardware/MQTT/MqttKit.c **** 
 375:./Hardware/MQTT/MqttKit.c **** 	//消息体----------------------------password----------------------------------------------
 376:./Hardware/MQTT/MqttKit.c **** 	if(flags & MQTT_CONNECT_PASSORD)
 377:./Hardware/MQTT/MqttKit.c **** 	{
 378:./Hardware/MQTT/MqttKit.c **** 		unsigned short psw_len = strlen(password);
 379:./Hardware/MQTT/MqttKit.c **** 		
 380:./Hardware/MQTT/MqttKit.c **** 		mqttPacket->_data[mqttPacket->_len++] = MOSQ_MSB(psw_len);
 381:./Hardware/MQTT/MqttKit.c **** 		mqttPacket->_data[mqttPacket->_len++] = MOSQ_LSB(psw_len);
 382:./Hardware/MQTT/MqttKit.c **** 		strncat((int8 *)mqttPacket->_data + mqttPacket->_len, password, psw_len);
 383:./Hardware/MQTT/MqttKit.c **** 		mqttPacket->_len += psw_len;
 384:./Hardware/MQTT/MqttKit.c **** 	}
 385:./Hardware/MQTT/MqttKit.c **** 
 386:./Hardware/MQTT/MqttKit.c **** 	return 0;
 387:./Hardware/MQTT/MqttKit.c **** 
 388:./Hardware/MQTT/MqttKit.c **** }
 633              		.loc 1 388 1 view .LVU194
ARM GAS  /tmp/ccYLmkow.s 			page 20


 634 0076 05B0     		add	sp, sp, #20
 635              	.LCFI10:
 636              		.cfi_remember_state
 637              		.cfi_def_cfa_offset 36
 638              		@ sp needed
 639 0078 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 640              	.LVL66:
 641              	.L53:
 642              	.LCFI11:
 643              		.cfi_restore_state
 247:./Hardware/MQTT/MqttKit.c **** 	}
 644              		.loc 1 247 9 view .LVU195
 645 007c 4FF00208 		mov	r8, #2
 646 0080 DAE7     		b	.L42
 647              	.LVL67:
 648              	.L44:
 266:./Hardware/MQTT/MqttKit.c **** 		break;
 649              		.loc 1 266 4 is_stmt 1 view .LVU196
 266:./Hardware/MQTT/MqttKit.c **** 		break;
 650              		.loc 1 266 10 is_stmt 0 view .LVU197
 651 0082 48F00C08 		orr	r8, r8, #12
 652              	.LVL68:
 267:./Hardware/MQTT/MqttKit.c **** 		
 653              		.loc 1 267 3 is_stmt 1 view .LVU198
 654              	.L46:
 278:./Hardware/MQTT/MqttKit.c **** 	{
 655              		.loc 1 278 2 view .LVU199
 278:./Hardware/MQTT/MqttKit.c **** 	{
 656              		.loc 1 278 4 is_stmt 0 view .LVU200
 657 0086 129B     		ldr	r3, [sp, #72]
 658 0088 0BB1     		cbz	r3, .L47
 280:./Hardware/MQTT/MqttKit.c **** 	}
 659              		.loc 1 280 3 is_stmt 1 view .LVU201
 280:./Hardware/MQTT/MqttKit.c **** 	}
 660              		.loc 1 280 9 is_stmt 0 view .LVU202
 661 008a 48F02408 		orr	r8, r8, #36
 662              	.LVL69:
 663              	.L47:
 284:./Hardware/MQTT/MqttKit.c **** 	{
 664              		.loc 1 284 2 is_stmt 1 view .LVU203
 284:./Hardware/MQTT/MqttKit.c **** 	{
 665              		.loc 1 284 4 is_stmt 0 view .LVU204
 666 008e 0198     		ldr	r0, [sp, #4]
 667 0090 0028     		cmp	r0, #0
 668 0092 00F00481 		beq	.L54
 284:./Hardware/MQTT/MqttKit.c **** 	{
 669              		.loc 1 284 11 discriminator 1 view .LVU205
 670 0096 002F     		cmp	r7, #0
 671 0098 00F00381 		beq	.L55
 288:./Hardware/MQTT/MqttKit.c **** 	
 672              		.loc 1 288 2 is_stmt 1 view .LVU206
 288:./Hardware/MQTT/MqttKit.c **** 	
 673              		.loc 1 288 8 is_stmt 0 view .LVU207
 674 009c 48F0C00B 		orr	fp, r8, #192
 675              	.LVL70:
 290:./Hardware/MQTT/MqttKit.c **** 	
 676              		.loc 1 290 2 is_stmt 1 view .LVU208
ARM GAS  /tmp/ccYLmkow.s 			page 21


 290:./Hardware/MQTT/MqttKit.c **** 	
 677              		.loc 1 290 15 is_stmt 0 view .LVU209
 678 00a0 FFF7FEFF 		bl	strlen
 679              	.LVL71:
 680 00a4 0546     		mov	r5, r0
 290:./Hardware/MQTT/MqttKit.c **** 	
 681              		.loc 1 290 30 view .LVU210
 682 00a6 3846     		mov	r0, r7
 683 00a8 FFF7FEFF 		bl	strlen
 684              	.LVL72:
 290:./Hardware/MQTT/MqttKit.c **** 	
 685              		.loc 1 290 28 view .LVU211
 686 00ac 0544     		add	r5, r5, r0
 687 00ae ADB2     		uxth	r5, r5
 290:./Hardware/MQTT/MqttKit.c **** 	
 688              		.loc 1 290 12 view .LVU212
 689 00b0 A944     		add	r9, r9, r5
 690              	.LVL73:
 290:./Hardware/MQTT/MqttKit.c **** 	
 691              		.loc 1 290 12 view .LVU213
 692 00b2 1FFA89F9 		uxth	r9, r9
 693 00b6 09F10409 		add	r9, r9, #4
 694 00ba 1FFA89F9 		uxth	r9, r9
 695              	.LVL74:
 293:./Hardware/MQTT/MqttKit.c **** 	if(mqttPacket->_data == NULL)
 696              		.loc 1 293 2 is_stmt 1 view .LVU214
 697 00be 4946     		mov	r1, r9
 698 00c0 2046     		mov	r0, r4
 699 00c2 FFF7FEFF 		bl	MQTT_NewBuffer
 700              	.LVL75:
 294:./Hardware/MQTT/MqttKit.c **** 		return 4;
 701              		.loc 1 294 2 view .LVU215
 294:./Hardware/MQTT/MqttKit.c **** 		return 4;
 702              		.loc 1 294 15 is_stmt 0 view .LVU216
 703 00c6 2068     		ldr	r0, [r4]
 294:./Hardware/MQTT/MqttKit.c **** 		return 4;
 704              		.loc 1 294 4 view .LVU217
 705 00c8 0028     		cmp	r0, #0
 706 00ca 00F0EC80 		beq	.L56
 297:./Hardware/MQTT/MqttKit.c **** 	
 707              		.loc 1 297 2 is_stmt 1 view .LVU218
 708 00ce 4A46     		mov	r2, r9
 709 00d0 0021     		movs	r1, #0
 710 00d2 FFF7FEFF 		bl	memset
 711              	.LVL76:
 302:./Hardware/MQTT/MqttKit.c **** 	
 712              		.loc 1 302 2 view .LVU219
 302:./Hardware/MQTT/MqttKit.c **** 	
 713              		.loc 1 302 12 is_stmt 0 view .LVU220
 714 00d6 2268     		ldr	r2, [r4]
 302:./Hardware/MQTT/MqttKit.c **** 	
 715              		.loc 1 302 30 view .LVU221
 716 00d8 6368     		ldr	r3, [r4, #4]
 302:./Hardware/MQTT/MqttKit.c **** 	
 717              		.loc 1 302 36 view .LVU222
 718 00da 591C     		adds	r1, r3, #1
 719 00dc 6160     		str	r1, [r4, #4]
ARM GAS  /tmp/ccYLmkow.s 			page 22


 302:./Hardware/MQTT/MqttKit.c **** 	
 720              		.loc 1 302 40 view .LVU223
 721 00de 1021     		movs	r1, #16
 722 00e0 D154     		strb	r1, [r2, r3]
 305:./Hardware/MQTT/MqttKit.c **** 	if(len < 0)
 723              		.loc 1 305 2 is_stmt 1 view .LVU224
 305:./Hardware/MQTT/MqttKit.c **** 	if(len < 0)
 724              		.loc 1 305 49 is_stmt 0 view .LVU225
 725 00e2 2168     		ldr	r1, [r4]
 305:./Hardware/MQTT/MqttKit.c **** 	if(len < 0)
 726              		.loc 1 305 69 view .LVU226
 727 00e4 6368     		ldr	r3, [r4, #4]
 305:./Hardware/MQTT/MqttKit.c **** 	if(len < 0)
 728              		.loc 1 305 8 view .LVU227
 729 00e6 1944     		add	r1, r1, r3
 730 00e8 A9F10500 		sub	r0, r9, #5
 731 00ec FFF7FEFF 		bl	MQTT_DumpLength
 732              	.LVL77:
 305:./Hardware/MQTT/MqttKit.c **** 	if(len < 0)
 733              		.loc 1 305 6 view .LVU228
 734 00f0 00B2     		sxth	r0, r0
 735              	.LVL78:
 306:./Hardware/MQTT/MqttKit.c **** 	{
 736              		.loc 1 306 2 is_stmt 1 view .LVU229
 306:./Hardware/MQTT/MqttKit.c **** 	{
 737              		.loc 1 306 4 is_stmt 0 view .LVU230
 738 00f2 0028     		cmp	r0, #0
 739 00f4 C0F2AD80 		blt	.L59
 312:./Hardware/MQTT/MqttKit.c **** 	
 740              		.loc 1 312 3 is_stmt 1 view .LVU231
 312:./Hardware/MQTT/MqttKit.c **** 	
 741              		.loc 1 312 20 is_stmt 0 view .LVU232
 742 00f8 6368     		ldr	r3, [r4, #4]
 743 00fa 1844     		add	r0, r0, r3
 744              	.LVL79:
 312:./Hardware/MQTT/MqttKit.c **** 	
 745              		.loc 1 312 20 view .LVU233
 746 00fc 6060     		str	r0, [r4, #4]
 317:./Hardware/MQTT/MqttKit.c **** 	mqttPacket->_data[mqttPacket->_len++] = 4;
 747              		.loc 1 317 2 is_stmt 1 view .LVU234
 317:./Hardware/MQTT/MqttKit.c **** 	mqttPacket->_data[mqttPacket->_len++] = 4;
 748              		.loc 1 317 12 is_stmt 0 view .LVU235
 749 00fe 2368     		ldr	r3, [r4]
 317:./Hardware/MQTT/MqttKit.c **** 	mqttPacket->_data[mqttPacket->_len++] = 4;
 750              		.loc 1 317 36 view .LVU236
 751 0100 421C     		adds	r2, r0, #1
 752 0102 6260     		str	r2, [r4, #4]
 317:./Hardware/MQTT/MqttKit.c **** 	mqttPacket->_data[mqttPacket->_len++] = 4;
 753              		.loc 1 317 40 view .LVU237
 754 0104 0022     		movs	r2, #0
 755 0106 1A54     		strb	r2, [r3, r0]
 318:./Hardware/MQTT/MqttKit.c **** 	mqttPacket->_data[mqttPacket->_len++] = 'M';
 756              		.loc 1 318 2 is_stmt 1 view .LVU238
 318:./Hardware/MQTT/MqttKit.c **** 	mqttPacket->_data[mqttPacket->_len++] = 'M';
 757              		.loc 1 318 12 is_stmt 0 view .LVU239
 758 0108 2168     		ldr	r1, [r4]
 318:./Hardware/MQTT/MqttKit.c **** 	mqttPacket->_data[mqttPacket->_len++] = 'M';
ARM GAS  /tmp/ccYLmkow.s 			page 23


 759              		.loc 1 318 30 view .LVU240
 760 010a 6368     		ldr	r3, [r4, #4]
 318:./Hardware/MQTT/MqttKit.c **** 	mqttPacket->_data[mqttPacket->_len++] = 'M';
 761              		.loc 1 318 36 view .LVU241
 762 010c 5A1C     		adds	r2, r3, #1
 763 010e 6260     		str	r2, [r4, #4]
 318:./Hardware/MQTT/MqttKit.c **** 	mqttPacket->_data[mqttPacket->_len++] = 'M';
 764              		.loc 1 318 40 view .LVU242
 765 0110 0422     		movs	r2, #4
 766 0112 CA54     		strb	r2, [r1, r3]
 319:./Hardware/MQTT/MqttKit.c **** 	mqttPacket->_data[mqttPacket->_len++] = 'Q';
 767              		.loc 1 319 2 is_stmt 1 view .LVU243
 319:./Hardware/MQTT/MqttKit.c **** 	mqttPacket->_data[mqttPacket->_len++] = 'Q';
 768              		.loc 1 319 12 is_stmt 0 view .LVU244
 769 0114 2168     		ldr	r1, [r4]
 319:./Hardware/MQTT/MqttKit.c **** 	mqttPacket->_data[mqttPacket->_len++] = 'Q';
 770              		.loc 1 319 30 view .LVU245
 771 0116 6368     		ldr	r3, [r4, #4]
 319:./Hardware/MQTT/MqttKit.c **** 	mqttPacket->_data[mqttPacket->_len++] = 'Q';
 772              		.loc 1 319 36 view .LVU246
 773 0118 581C     		adds	r0, r3, #1
 774 011a 6060     		str	r0, [r4, #4]
 319:./Hardware/MQTT/MqttKit.c **** 	mqttPacket->_data[mqttPacket->_len++] = 'Q';
 775              		.loc 1 319 40 view .LVU247
 776 011c 4D20     		movs	r0, #77
 777 011e C854     		strb	r0, [r1, r3]
 320:./Hardware/MQTT/MqttKit.c **** 	mqttPacket->_data[mqttPacket->_len++] = 'T';
 778              		.loc 1 320 2 is_stmt 1 view .LVU248
 320:./Hardware/MQTT/MqttKit.c **** 	mqttPacket->_data[mqttPacket->_len++] = 'T';
 779              		.loc 1 320 12 is_stmt 0 view .LVU249
 780 0120 2168     		ldr	r1, [r4]
 320:./Hardware/MQTT/MqttKit.c **** 	mqttPacket->_data[mqttPacket->_len++] = 'T';
 781              		.loc 1 320 30 view .LVU250
 782 0122 6368     		ldr	r3, [r4, #4]
 320:./Hardware/MQTT/MqttKit.c **** 	mqttPacket->_data[mqttPacket->_len++] = 'T';
 783              		.loc 1 320 36 view .LVU251
 784 0124 581C     		adds	r0, r3, #1
 785 0126 6060     		str	r0, [r4, #4]
 320:./Hardware/MQTT/MqttKit.c **** 	mqttPacket->_data[mqttPacket->_len++] = 'T';
 786              		.loc 1 320 40 view .LVU252
 787 0128 5120     		movs	r0, #81
 788 012a C854     		strb	r0, [r1, r3]
 321:./Hardware/MQTT/MqttKit.c **** 	mqttPacket->_data[mqttPacket->_len++] = 'T';
 789              		.loc 1 321 2 is_stmt 1 view .LVU253
 321:./Hardware/MQTT/MqttKit.c **** 	mqttPacket->_data[mqttPacket->_len++] = 'T';
 790              		.loc 1 321 12 is_stmt 0 view .LVU254
 791 012c 2068     		ldr	r0, [r4]
 321:./Hardware/MQTT/MqttKit.c **** 	mqttPacket->_data[mqttPacket->_len++] = 'T';
 792              		.loc 1 321 30 view .LVU255
 793 012e 6368     		ldr	r3, [r4, #4]
 321:./Hardware/MQTT/MqttKit.c **** 	mqttPacket->_data[mqttPacket->_len++] = 'T';
 794              		.loc 1 321 36 view .LVU256
 795 0130 591C     		adds	r1, r3, #1
 796 0132 6160     		str	r1, [r4, #4]
 321:./Hardware/MQTT/MqttKit.c **** 	mqttPacket->_data[mqttPacket->_len++] = 'T';
 797              		.loc 1 321 40 view .LVU257
 798 0134 5421     		movs	r1, #84
ARM GAS  /tmp/ccYLmkow.s 			page 24


 799 0136 C154     		strb	r1, [r0, r3]
 322:./Hardware/MQTT/MqttKit.c **** 	
 800              		.loc 1 322 2 is_stmt 1 view .LVU258
 322:./Hardware/MQTT/MqttKit.c **** 	
 801              		.loc 1 322 12 is_stmt 0 view .LVU259
 802 0138 2068     		ldr	r0, [r4]
 322:./Hardware/MQTT/MqttKit.c **** 	
 803              		.loc 1 322 30 view .LVU260
 804 013a 6368     		ldr	r3, [r4, #4]
 322:./Hardware/MQTT/MqttKit.c **** 	
 805              		.loc 1 322 36 view .LVU261
 806 013c 5D1C     		adds	r5, r3, #1
 807 013e 6560     		str	r5, [r4, #4]
 322:./Hardware/MQTT/MqttKit.c **** 	
 808              		.loc 1 322 40 view .LVU262
 809 0140 C154     		strb	r1, [r0, r3]
 325:./Hardware/MQTT/MqttKit.c **** 	
 810              		.loc 1 325 2 is_stmt 1 view .LVU263
 325:./Hardware/MQTT/MqttKit.c **** 	
 811              		.loc 1 325 12 is_stmt 0 view .LVU264
 812 0142 2168     		ldr	r1, [r4]
 325:./Hardware/MQTT/MqttKit.c **** 	
 813              		.loc 1 325 30 view .LVU265
 814 0144 6368     		ldr	r3, [r4, #4]
 325:./Hardware/MQTT/MqttKit.c **** 	
 815              		.loc 1 325 36 view .LVU266
 816 0146 581C     		adds	r0, r3, #1
 817 0148 6060     		str	r0, [r4, #4]
 325:./Hardware/MQTT/MqttKit.c **** 	
 818              		.loc 1 325 40 view .LVU267
 819 014a CA54     		strb	r2, [r1, r3]
 328:./Hardware/MQTT/MqttKit.c **** 	
 820              		.loc 1 328 5 is_stmt 1 view .LVU268
 328:./Hardware/MQTT/MqttKit.c **** 	
 821              		.loc 1 328 15 is_stmt 0 view .LVU269
 822 014c 2268     		ldr	r2, [r4]
 328:./Hardware/MQTT/MqttKit.c **** 	
 823              		.loc 1 328 33 view .LVU270
 824 014e 6368     		ldr	r3, [r4, #4]
 328:./Hardware/MQTT/MqttKit.c **** 	
 825              		.loc 1 328 39 view .LVU271
 826 0150 591C     		adds	r1, r3, #1
 827 0152 6160     		str	r1, [r4, #4]
 328:./Hardware/MQTT/MqttKit.c **** 	
 828              		.loc 1 328 43 view .LVU272
 829 0154 02F803B0 		strb	fp, [r2, r3]
 331:./Hardware/MQTT/MqttKit.c **** 	mqttPacket->_data[mqttPacket->_len++] = MOSQ_LSB(cTime);
 830              		.loc 1 331 2 is_stmt 1 view .LVU273
 331:./Hardware/MQTT/MqttKit.c **** 	mqttPacket->_data[mqttPacket->_len++] = MOSQ_LSB(cTime);
 831              		.loc 1 331 12 is_stmt 0 view .LVU274
 832 0158 2268     		ldr	r2, [r4]
 331:./Hardware/MQTT/MqttKit.c **** 	mqttPacket->_data[mqttPacket->_len++] = MOSQ_LSB(cTime);
 833              		.loc 1 331 30 view .LVU275
 834 015a 6368     		ldr	r3, [r4, #4]
 331:./Hardware/MQTT/MqttKit.c **** 	mqttPacket->_data[mqttPacket->_len++] = MOSQ_LSB(cTime);
 835              		.loc 1 331 36 view .LVU276
 836 015c 591C     		adds	r1, r3, #1
ARM GAS  /tmp/ccYLmkow.s 			page 25


 837 015e 6160     		str	r1, [r4, #4]
 331:./Hardware/MQTT/MqttKit.c **** 	mqttPacket->_data[mqttPacket->_len++] = MOSQ_LSB(cTime);
 838              		.loc 1 331 42 view .LVU277
 839 0160 0398     		ldr	r0, [sp, #12]
 840 0162 010A     		lsrs	r1, r0, #8
 331:./Hardware/MQTT/MqttKit.c **** 	mqttPacket->_data[mqttPacket->_len++] = MOSQ_LSB(cTime);
 841              		.loc 1 331 40 view .LVU278
 842 0164 D154     		strb	r1, [r2, r3]
 332:./Hardware/MQTT/MqttKit.c **** 	 
 843              		.loc 1 332 2 is_stmt 1 view .LVU279
 332:./Hardware/MQTT/MqttKit.c **** 	 
 844              		.loc 1 332 12 is_stmt 0 view .LVU280
 845 0166 2268     		ldr	r2, [r4]
 332:./Hardware/MQTT/MqttKit.c **** 	 
 846              		.loc 1 332 30 view .LVU281
 847 0168 6368     		ldr	r3, [r4, #4]
 332:./Hardware/MQTT/MqttKit.c **** 	 
 848              		.loc 1 332 36 view .LVU282
 849 016a 591C     		adds	r1, r3, #1
 850 016c 6160     		str	r1, [r4, #4]
 332:./Hardware/MQTT/MqttKit.c **** 	 
 851              		.loc 1 332 40 view .LVU283
 852 016e D054     		strb	r0, [r2, r3]
 337:./Hardware/MQTT/MqttKit.c **** 	mqttPacket->_data[mqttPacket->_len++] = MOSQ_LSB(devid_len);
 853              		.loc 1 337 2 is_stmt 1 view .LVU284
 337:./Hardware/MQTT/MqttKit.c **** 	mqttPacket->_data[mqttPacket->_len++] = MOSQ_LSB(devid_len);
 854              		.loc 1 337 12 is_stmt 0 view .LVU285
 855 0170 2268     		ldr	r2, [r4]
 337:./Hardware/MQTT/MqttKit.c **** 	mqttPacket->_data[mqttPacket->_len++] = MOSQ_LSB(devid_len);
 856              		.loc 1 337 30 view .LVU286
 857 0172 6368     		ldr	r3, [r4, #4]
 337:./Hardware/MQTT/MqttKit.c **** 	mqttPacket->_data[mqttPacket->_len++] = MOSQ_LSB(devid_len);
 858              		.loc 1 337 36 view .LVU287
 859 0174 591C     		adds	r1, r3, #1
 860 0176 6160     		str	r1, [r4, #4]
 337:./Hardware/MQTT/MqttKit.c **** 	mqttPacket->_data[mqttPacket->_len++] = MOSQ_LSB(devid_len);
 861              		.loc 1 337 42 view .LVU288
 862 0178 CAF30721 		ubfx	r1, r10, #8, #8
 337:./Hardware/MQTT/MqttKit.c **** 	mqttPacket->_data[mqttPacket->_len++] = MOSQ_LSB(devid_len);
 863              		.loc 1 337 40 view .LVU289
 864 017c D154     		strb	r1, [r2, r3]
 338:./Hardware/MQTT/MqttKit.c **** 	
 865              		.loc 1 338 2 is_stmt 1 view .LVU290
 338:./Hardware/MQTT/MqttKit.c **** 	
 866              		.loc 1 338 12 is_stmt 0 view .LVU291
 867 017e 2268     		ldr	r2, [r4]
 338:./Hardware/MQTT/MqttKit.c **** 	
 868              		.loc 1 338 30 view .LVU292
 869 0180 6368     		ldr	r3, [r4, #4]
 338:./Hardware/MQTT/MqttKit.c **** 	
 870              		.loc 1 338 36 view .LVU293
 871 0182 591C     		adds	r1, r3, #1
 872 0184 6160     		str	r1, [r4, #4]
 338:./Hardware/MQTT/MqttKit.c **** 	
 873              		.loc 1 338 40 view .LVU294
 874 0186 0299     		ldr	r1, [sp, #8]
 875 0188 D154     		strb	r1, [r2, r3]
ARM GAS  /tmp/ccYLmkow.s 			page 26


 340:./Hardware/MQTT/MqttKit.c **** 	mqttPacket->_len += devid_len;
 876              		.loc 1 340 2 is_stmt 1 view .LVU295
 340:./Hardware/MQTT/MqttKit.c **** 	mqttPacket->_len += devid_len;
 877              		.loc 1 340 28 is_stmt 0 view .LVU296
 878 018a 2068     		ldr	r0, [r4]
 340:./Hardware/MQTT/MqttKit.c **** 	mqttPacket->_len += devid_len;
 879              		.loc 1 340 48 view .LVU297
 880 018c 6368     		ldr	r3, [r4, #4]
 340:./Hardware/MQTT/MqttKit.c **** 	mqttPacket->_len += devid_len;
 881              		.loc 1 340 2 view .LVU298
 882 018e 5246     		mov	r2, r10
 883 0190 3146     		mov	r1, r6
 884 0192 1844     		add	r0, r0, r3
 885 0194 FFF7FEFF 		bl	strncat
 886              	.LVL80:
 341:./Hardware/MQTT/MqttKit.c **** 	
 887              		.loc 1 341 2 is_stmt 1 view .LVU299
 341:./Hardware/MQTT/MqttKit.c **** 	
 888              		.loc 1 341 19 is_stmt 0 view .LVU300
 889 0198 6568     		ldr	r5, [r4, #4]
 890 019a 5544     		add	r5, r5, r10
 891 019c 6560     		str	r5, [r4, #4]
 344:./Hardware/MQTT/MqttKit.c **** 	{
 892              		.loc 1 344 2 is_stmt 1 view .LVU301
 344:./Hardware/MQTT/MqttKit.c **** 	{
 893              		.loc 1 344 4 is_stmt 0 view .LVU302
 894 019e 18F0040F 		tst	r8, #4
 895 01a2 34D0     		beq	.L49
 896              	.LBB3:
 346:./Hardware/MQTT/MqttKit.c **** 		
 897              		.loc 1 346 3 is_stmt 1 view .LVU303
 898              	.LVL81:
 348:./Hardware/MQTT/MqttKit.c **** 			will_msg = "";
 899              		.loc 1 348 3 view .LVU304
 348:./Hardware/MQTT/MqttKit.c **** 			will_msg = "";
 900              		.loc 1 348 5 is_stmt 0 view .LVU305
 901 01a4 119B     		ldr	r3, [sp, #68]
 902 01a6 002B     		cmp	r3, #0
 903 01a8 58D0     		beq	.L60
 904              	.LVL82:
 905              	.L50:
 351:./Hardware/MQTT/MqttKit.c **** 		mqttPacket->_data[mqttPacket->_len++] = MOSQ_MSB(mLen);
 906              		.loc 1 351 3 is_stmt 1 view .LVU306
 351:./Hardware/MQTT/MqttKit.c **** 		mqttPacket->_data[mqttPacket->_len++] = MOSQ_MSB(mLen);
 907              		.loc 1 351 10 is_stmt 0 view .LVU307
 908 01aa 1098     		ldr	r0, [sp, #64]
 909 01ac FFF7FEFF 		bl	strlen
 910              	.LVL83:
 351:./Hardware/MQTT/MqttKit.c **** 		mqttPacket->_data[mqttPacket->_len++] = MOSQ_MSB(mLen);
 911              		.loc 1 351 8 view .LVU308
 912 01b0 86B2     		uxth	r6, r0
 913              	.LVL84:
 352:./Hardware/MQTT/MqttKit.c **** 		mqttPacket->_data[mqttPacket->_len++] = MOSQ_LSB(mLen);
 914              		.loc 1 352 3 is_stmt 1 view .LVU309
 352:./Hardware/MQTT/MqttKit.c **** 		mqttPacket->_data[mqttPacket->_len++] = MOSQ_LSB(mLen);
 915              		.loc 1 352 13 is_stmt 0 view .LVU310
 916 01b2 2368     		ldr	r3, [r4]
ARM GAS  /tmp/ccYLmkow.s 			page 27


 352:./Hardware/MQTT/MqttKit.c **** 		mqttPacket->_data[mqttPacket->_len++] = MOSQ_LSB(mLen);
 917              		.loc 1 352 37 view .LVU311
 918 01b4 6A1C     		adds	r2, r5, #1
 919 01b6 6260     		str	r2, [r4, #4]
 352:./Hardware/MQTT/MqttKit.c **** 		mqttPacket->_data[mqttPacket->_len++] = MOSQ_LSB(mLen);
 920              		.loc 1 352 43 view .LVU312
 921 01b8 C0F30722 		ubfx	r2, r0, #8, #8
 352:./Hardware/MQTT/MqttKit.c **** 		mqttPacket->_data[mqttPacket->_len++] = MOSQ_LSB(mLen);
 922              		.loc 1 352 41 view .LVU313
 923 01bc 5A55     		strb	r2, [r3, r5]
 353:./Hardware/MQTT/MqttKit.c **** 		strncat((int8 *)mqttPacket->_data + mqttPacket->_len, will_topic, mLen);
 924              		.loc 1 353 3 is_stmt 1 view .LVU314
 353:./Hardware/MQTT/MqttKit.c **** 		strncat((int8 *)mqttPacket->_data + mqttPacket->_len, will_topic, mLen);
 925              		.loc 1 353 13 is_stmt 0 view .LVU315
 926 01be 2268     		ldr	r2, [r4]
 353:./Hardware/MQTT/MqttKit.c **** 		strncat((int8 *)mqttPacket->_data + mqttPacket->_len, will_topic, mLen);
 927              		.loc 1 353 31 view .LVU316
 928 01c0 6368     		ldr	r3, [r4, #4]
 353:./Hardware/MQTT/MqttKit.c **** 		strncat((int8 *)mqttPacket->_data + mqttPacket->_len, will_topic, mLen);
 929              		.loc 1 353 37 view .LVU317
 930 01c2 591C     		adds	r1, r3, #1
 931 01c4 6160     		str	r1, [r4, #4]
 353:./Hardware/MQTT/MqttKit.c **** 		strncat((int8 *)mqttPacket->_data + mqttPacket->_len, will_topic, mLen);
 932              		.loc 1 353 41 view .LVU318
 933 01c6 D054     		strb	r0, [r2, r3]
 354:./Hardware/MQTT/MqttKit.c **** 		mqttPacket->_len += mLen;
 934              		.loc 1 354 3 is_stmt 1 view .LVU319
 354:./Hardware/MQTT/MqttKit.c **** 		mqttPacket->_len += mLen;
 935              		.loc 1 354 29 is_stmt 0 view .LVU320
 936 01c8 2068     		ldr	r0, [r4]
 354:./Hardware/MQTT/MqttKit.c **** 		mqttPacket->_len += mLen;
 937              		.loc 1 354 49 view .LVU321
 938 01ca 6368     		ldr	r3, [r4, #4]
 354:./Hardware/MQTT/MqttKit.c **** 		mqttPacket->_len += mLen;
 939              		.loc 1 354 3 view .LVU322
 940 01cc 3246     		mov	r2, r6
 941 01ce 1099     		ldr	r1, [sp, #64]
 942 01d0 1844     		add	r0, r0, r3
 943 01d2 FFF7FEFF 		bl	strncat
 944              	.LVL85:
 355:./Hardware/MQTT/MqttKit.c **** 		
 945              		.loc 1 355 3 is_stmt 1 view .LVU323
 355:./Hardware/MQTT/MqttKit.c **** 		
 946              		.loc 1 355 20 is_stmt 0 view .LVU324
 947 01d6 6568     		ldr	r5, [r4, #4]
 948 01d8 3544     		add	r5, r5, r6
 949 01da 6560     		str	r5, [r4, #4]
 357:./Hardware/MQTT/MqttKit.c **** 		mqttPacket->_data[mqttPacket->_len++] = MOSQ_MSB(mLen);
 950              		.loc 1 357 3 is_stmt 1 view .LVU325
 357:./Hardware/MQTT/MqttKit.c **** 		mqttPacket->_data[mqttPacket->_len++] = MOSQ_MSB(mLen);
 951              		.loc 1 357 10 is_stmt 0 view .LVU326
 952 01dc 1198     		ldr	r0, [sp, #68]
 953 01de FFF7FEFF 		bl	strlen
 954              	.LVL86:
 357:./Hardware/MQTT/MqttKit.c **** 		mqttPacket->_data[mqttPacket->_len++] = MOSQ_MSB(mLen);
 955              		.loc 1 357 8 view .LVU327
 956 01e2 86B2     		uxth	r6, r0
ARM GAS  /tmp/ccYLmkow.s 			page 28


 957              	.LVL87:
 358:./Hardware/MQTT/MqttKit.c **** 		mqttPacket->_data[mqttPacket->_len++] = MOSQ_LSB(mLen);
 958              		.loc 1 358 3 is_stmt 1 view .LVU328
 358:./Hardware/MQTT/MqttKit.c **** 		mqttPacket->_data[mqttPacket->_len++] = MOSQ_LSB(mLen);
 959              		.loc 1 358 13 is_stmt 0 view .LVU329
 960 01e4 2368     		ldr	r3, [r4]
 358:./Hardware/MQTT/MqttKit.c **** 		mqttPacket->_data[mqttPacket->_len++] = MOSQ_LSB(mLen);
 961              		.loc 1 358 37 view .LVU330
 962 01e6 6A1C     		adds	r2, r5, #1
 963 01e8 6260     		str	r2, [r4, #4]
 358:./Hardware/MQTT/MqttKit.c **** 		mqttPacket->_data[mqttPacket->_len++] = MOSQ_LSB(mLen);
 964              		.loc 1 358 43 view .LVU331
 965 01ea C0F30722 		ubfx	r2, r0, #8, #8
 358:./Hardware/MQTT/MqttKit.c **** 		mqttPacket->_data[mqttPacket->_len++] = MOSQ_LSB(mLen);
 966              		.loc 1 358 41 view .LVU332
 967 01ee 5A55     		strb	r2, [r3, r5]
 359:./Hardware/MQTT/MqttKit.c **** 		strncat((int8 *)mqttPacket->_data + mqttPacket->_len, will_msg, mLen);
 968              		.loc 1 359 3 is_stmt 1 view .LVU333
 359:./Hardware/MQTT/MqttKit.c **** 		strncat((int8 *)mqttPacket->_data + mqttPacket->_len, will_msg, mLen);
 969              		.loc 1 359 13 is_stmt 0 view .LVU334
 970 01f0 2268     		ldr	r2, [r4]
 359:./Hardware/MQTT/MqttKit.c **** 		strncat((int8 *)mqttPacket->_data + mqttPacket->_len, will_msg, mLen);
 971              		.loc 1 359 31 view .LVU335
 972 01f2 6368     		ldr	r3, [r4, #4]
 359:./Hardware/MQTT/MqttKit.c **** 		strncat((int8 *)mqttPacket->_data + mqttPacket->_len, will_msg, mLen);
 973              		.loc 1 359 37 view .LVU336
 974 01f4 591C     		adds	r1, r3, #1
 975 01f6 6160     		str	r1, [r4, #4]
 359:./Hardware/MQTT/MqttKit.c **** 		strncat((int8 *)mqttPacket->_data + mqttPacket->_len, will_msg, mLen);
 976              		.loc 1 359 41 view .LVU337
 977 01f8 D054     		strb	r0, [r2, r3]
 360:./Hardware/MQTT/MqttKit.c **** 		mqttPacket->_len += mLen;
 978              		.loc 1 360 3 is_stmt 1 view .LVU338
 360:./Hardware/MQTT/MqttKit.c **** 		mqttPacket->_len += mLen;
 979              		.loc 1 360 29 is_stmt 0 view .LVU339
 980 01fa 2068     		ldr	r0, [r4]
 360:./Hardware/MQTT/MqttKit.c **** 		mqttPacket->_len += mLen;
 981              		.loc 1 360 49 view .LVU340
 982 01fc 6368     		ldr	r3, [r4, #4]
 360:./Hardware/MQTT/MqttKit.c **** 		mqttPacket->_len += mLen;
 983              		.loc 1 360 3 view .LVU341
 984 01fe 3246     		mov	r2, r6
 985 0200 1199     		ldr	r1, [sp, #68]
 986 0202 1844     		add	r0, r0, r3
 987 0204 FFF7FEFF 		bl	strncat
 988              	.LVL88:
 361:./Hardware/MQTT/MqttKit.c **** 	}
 989              		.loc 1 361 3 is_stmt 1 view .LVU342
 361:./Hardware/MQTT/MqttKit.c **** 	}
 990              		.loc 1 361 20 is_stmt 0 view .LVU343
 991 0208 6368     		ldr	r3, [r4, #4]
 992 020a 3344     		add	r3, r3, r6
 993 020c 6360     		str	r3, [r4, #4]
 994              	.LVL89:
 995              	.L49:
 361:./Hardware/MQTT/MqttKit.c **** 	}
 996              		.loc 1 361 20 view .LVU344
ARM GAS  /tmp/ccYLmkow.s 			page 29


 997              	.LBE3:
 365:./Hardware/MQTT/MqttKit.c **** 	{
 998              		.loc 1 365 2 is_stmt 1 view .LVU345
 365:./Hardware/MQTT/MqttKit.c **** 	{
 999              		.loc 1 365 4 is_stmt 0 view .LVU346
 1000 020e 1BF0800F 		tst	fp, #128
 1001 0212 26D1     		bne	.L61
 1002              	.L51:
 376:./Hardware/MQTT/MqttKit.c **** 	{
 1003              		.loc 1 376 2 is_stmt 1 view .LVU347
 1004              	.LBB4:
 378:./Hardware/MQTT/MqttKit.c **** 		
 1005              		.loc 1 378 3 view .LVU348
 378:./Hardware/MQTT/MqttKit.c **** 		
 1006              		.loc 1 378 28 is_stmt 0 view .LVU349
 1007 0214 3846     		mov	r0, r7
 1008 0216 FFF7FEFF 		bl	strlen
 1009              	.LVL90:
 378:./Hardware/MQTT/MqttKit.c **** 		
 1010              		.loc 1 378 18 view .LVU350
 1011 021a 85B2     		uxth	r5, r0
 1012              	.LVL91:
 380:./Hardware/MQTT/MqttKit.c **** 		mqttPacket->_data[mqttPacket->_len++] = MOSQ_LSB(psw_len);
 1013              		.loc 1 380 3 is_stmt 1 view .LVU351
 380:./Hardware/MQTT/MqttKit.c **** 		mqttPacket->_data[mqttPacket->_len++] = MOSQ_LSB(psw_len);
 1014              		.loc 1 380 13 is_stmt 0 view .LVU352
 1015 021c 2268     		ldr	r2, [r4]
 380:./Hardware/MQTT/MqttKit.c **** 		mqttPacket->_data[mqttPacket->_len++] = MOSQ_LSB(psw_len);
 1016              		.loc 1 380 31 view .LVU353
 1017 021e 6368     		ldr	r3, [r4, #4]
 380:./Hardware/MQTT/MqttKit.c **** 		mqttPacket->_data[mqttPacket->_len++] = MOSQ_LSB(psw_len);
 1018              		.loc 1 380 37 view .LVU354
 1019 0220 591C     		adds	r1, r3, #1
 1020 0222 6160     		str	r1, [r4, #4]
 380:./Hardware/MQTT/MqttKit.c **** 		mqttPacket->_data[mqttPacket->_len++] = MOSQ_LSB(psw_len);
 1021              		.loc 1 380 43 view .LVU355
 1022 0224 C0F30721 		ubfx	r1, r0, #8, #8
 380:./Hardware/MQTT/MqttKit.c **** 		mqttPacket->_data[mqttPacket->_len++] = MOSQ_LSB(psw_len);
 1023              		.loc 1 380 41 view .LVU356
 1024 0228 D154     		strb	r1, [r2, r3]
 381:./Hardware/MQTT/MqttKit.c **** 		strncat((int8 *)mqttPacket->_data + mqttPacket->_len, password, psw_len);
 1025              		.loc 1 381 3 is_stmt 1 view .LVU357
 381:./Hardware/MQTT/MqttKit.c **** 		strncat((int8 *)mqttPacket->_data + mqttPacket->_len, password, psw_len);
 1026              		.loc 1 381 13 is_stmt 0 view .LVU358
 1027 022a 2268     		ldr	r2, [r4]
 381:./Hardware/MQTT/MqttKit.c **** 		strncat((int8 *)mqttPacket->_data + mqttPacket->_len, password, psw_len);
 1028              		.loc 1 381 31 view .LVU359
 1029 022c 6368     		ldr	r3, [r4, #4]
 381:./Hardware/MQTT/MqttKit.c **** 		strncat((int8 *)mqttPacket->_data + mqttPacket->_len, password, psw_len);
 1030              		.loc 1 381 37 view .LVU360
 1031 022e 591C     		adds	r1, r3, #1
 1032 0230 6160     		str	r1, [r4, #4]
 381:./Hardware/MQTT/MqttKit.c **** 		strncat((int8 *)mqttPacket->_data + mqttPacket->_len, password, psw_len);
 1033              		.loc 1 381 41 view .LVU361
 1034 0232 D054     		strb	r0, [r2, r3]
 382:./Hardware/MQTT/MqttKit.c **** 		mqttPacket->_len += psw_len;
 1035              		.loc 1 382 3 is_stmt 1 view .LVU362
ARM GAS  /tmp/ccYLmkow.s 			page 30


 382:./Hardware/MQTT/MqttKit.c **** 		mqttPacket->_len += psw_len;
 1036              		.loc 1 382 29 is_stmt 0 view .LVU363
 1037 0234 2068     		ldr	r0, [r4]
 382:./Hardware/MQTT/MqttKit.c **** 		mqttPacket->_len += psw_len;
 1038              		.loc 1 382 49 view .LVU364
 1039 0236 6368     		ldr	r3, [r4, #4]
 382:./Hardware/MQTT/MqttKit.c **** 		mqttPacket->_len += psw_len;
 1040              		.loc 1 382 3 view .LVU365
 1041 0238 2A46     		mov	r2, r5
 1042 023a 3946     		mov	r1, r7
 1043 023c 1844     		add	r0, r0, r3
 1044 023e FFF7FEFF 		bl	strncat
 1045              	.LVL92:
 383:./Hardware/MQTT/MqttKit.c **** 	}
 1046              		.loc 1 383 3 is_stmt 1 view .LVU366
 383:./Hardware/MQTT/MqttKit.c **** 	}
 1047              		.loc 1 383 20 is_stmt 0 view .LVU367
 1048 0242 6368     		ldr	r3, [r4, #4]
 1049 0244 2B44     		add	r3, r3, r5
 1050 0246 6360     		str	r3, [r4, #4]
 1051              	.LBE4:
 386:./Hardware/MQTT/MqttKit.c **** 
 1052              		.loc 1 386 2 is_stmt 1 view .LVU368
 386:./Hardware/MQTT/MqttKit.c **** 
 1053              		.loc 1 386 9 is_stmt 0 view .LVU369
 1054 0248 0020     		movs	r0, #0
 1055 024a 14E7     		b	.L41
 1056              	.LVL93:
 1057              	.L45:
 270:./Hardware/MQTT/MqttKit.c **** 		break;
 1058              		.loc 1 270 4 is_stmt 1 view .LVU370
 270:./Hardware/MQTT/MqttKit.c **** 		break;
 1059              		.loc 1 270 10 is_stmt 0 view .LVU371
 1060 024c 48F01408 		orr	r8, r8, #20
 1061              	.LVL94:
 271:./Hardware/MQTT/MqttKit.c **** 		
 1062              		.loc 1 271 3 is_stmt 1 view .LVU372
 1063 0250 19E7     		b	.L46
 1064              	.LVL95:
 1065              	.L59:
 308:./Hardware/MQTT/MqttKit.c **** 		return 5;
 1066              		.loc 1 308 3 view .LVU373
 1067 0252 2046     		mov	r0, r4
 1068              	.LVL96:
 308:./Hardware/MQTT/MqttKit.c **** 		return 5;
 1069              		.loc 1 308 3 is_stmt 0 view .LVU374
 1070 0254 FFF7FEFF 		bl	MQTT_DeleteBuffer
 1071              	.LVL97:
 309:./Hardware/MQTT/MqttKit.c **** 	}
 1072              		.loc 1 309 3 is_stmt 1 view .LVU375
 309:./Hardware/MQTT/MqttKit.c **** 	}
 1073              		.loc 1 309 10 is_stmt 0 view .LVU376
 1074 0258 0520     		movs	r0, #5
 1075 025a 0CE7     		b	.L41
 1076              	.LVL98:
 1077              	.L60:
 1078              	.LBB5:
ARM GAS  /tmp/ccYLmkow.s 			page 31


 349:./Hardware/MQTT/MqttKit.c **** 		
 1079              		.loc 1 349 13 view .LVU377
 1080 025c 134B     		ldr	r3, .L62
 1081 025e 1193     		str	r3, [sp, #68]
 1082              	.LVL99:
 349:./Hardware/MQTT/MqttKit.c **** 		
 1083              		.loc 1 349 13 view .LVU378
 1084 0260 A3E7     		b	.L50
 1085              	.LVL100:
 1086              	.L61:
 349:./Hardware/MQTT/MqttKit.c **** 		
 1087              		.loc 1 349 13 view .LVU379
 1088              	.LBE5:
 1089              	.LBB6:
 367:./Hardware/MQTT/MqttKit.c **** 		
 1090              		.loc 1 367 3 is_stmt 1 view .LVU380
 367:./Hardware/MQTT/MqttKit.c **** 		
 1091              		.loc 1 367 29 is_stmt 0 view .LVU381
 1092 0262 019E     		ldr	r6, [sp, #4]
 1093 0264 3046     		mov	r0, r6
 1094 0266 FFF7FEFF 		bl	strlen
 1095              	.LVL101:
 367:./Hardware/MQTT/MqttKit.c **** 		
 1096              		.loc 1 367 18 view .LVU382
 1097 026a 85B2     		uxth	r5, r0
 1098              	.LVL102:
 369:./Hardware/MQTT/MqttKit.c **** 		mqttPacket->_data[mqttPacket->_len++] = MOSQ_LSB(user_len);
 1099              		.loc 1 369 3 is_stmt 1 view .LVU383
 369:./Hardware/MQTT/MqttKit.c **** 		mqttPacket->_data[mqttPacket->_len++] = MOSQ_LSB(user_len);
 1100              		.loc 1 369 13 is_stmt 0 view .LVU384
 1101 026c 2268     		ldr	r2, [r4]
 369:./Hardware/MQTT/MqttKit.c **** 		mqttPacket->_data[mqttPacket->_len++] = MOSQ_LSB(user_len);
 1102              		.loc 1 369 31 view .LVU385
 1103 026e 6368     		ldr	r3, [r4, #4]
 369:./Hardware/MQTT/MqttKit.c **** 		mqttPacket->_data[mqttPacket->_len++] = MOSQ_LSB(user_len);
 1104              		.loc 1 369 37 view .LVU386
 1105 0270 591C     		adds	r1, r3, #1
 1106 0272 6160     		str	r1, [r4, #4]
 369:./Hardware/MQTT/MqttKit.c **** 		mqttPacket->_data[mqttPacket->_len++] = MOSQ_LSB(user_len);
 1107              		.loc 1 369 43 view .LVU387
 1108 0274 C0F30721 		ubfx	r1, r0, #8, #8
 369:./Hardware/MQTT/MqttKit.c **** 		mqttPacket->_data[mqttPacket->_len++] = MOSQ_LSB(user_len);
 1109              		.loc 1 369 41 view .LVU388
 1110 0278 D154     		strb	r1, [r2, r3]
 370:./Hardware/MQTT/MqttKit.c **** 		strncat((int8 *)mqttPacket->_data + mqttPacket->_len, user, user_len);
 1111              		.loc 1 370 3 is_stmt 1 view .LVU389
 370:./Hardware/MQTT/MqttKit.c **** 		strncat((int8 *)mqttPacket->_data + mqttPacket->_len, user, user_len);
 1112              		.loc 1 370 13 is_stmt 0 view .LVU390
 1113 027a 2268     		ldr	r2, [r4]
 370:./Hardware/MQTT/MqttKit.c **** 		strncat((int8 *)mqttPacket->_data + mqttPacket->_len, user, user_len);
 1114              		.loc 1 370 31 view .LVU391
 1115 027c 6368     		ldr	r3, [r4, #4]
 370:./Hardware/MQTT/MqttKit.c **** 		strncat((int8 *)mqttPacket->_data + mqttPacket->_len, user, user_len);
 1116              		.loc 1 370 37 view .LVU392
 1117 027e 591C     		adds	r1, r3, #1
 1118 0280 6160     		str	r1, [r4, #4]
 370:./Hardware/MQTT/MqttKit.c **** 		strncat((int8 *)mqttPacket->_data + mqttPacket->_len, user, user_len);
ARM GAS  /tmp/ccYLmkow.s 			page 32


 1119              		.loc 1 370 41 view .LVU393
 1120 0282 D054     		strb	r0, [r2, r3]
 371:./Hardware/MQTT/MqttKit.c **** 		mqttPacket->_len += user_len;
 1121              		.loc 1 371 3 is_stmt 1 view .LVU394
 371:./Hardware/MQTT/MqttKit.c **** 		mqttPacket->_len += user_len;
 1122              		.loc 1 371 29 is_stmt 0 view .LVU395
 1123 0284 2068     		ldr	r0, [r4]
 371:./Hardware/MQTT/MqttKit.c **** 		mqttPacket->_len += user_len;
 1124              		.loc 1 371 49 view .LVU396
 1125 0286 6368     		ldr	r3, [r4, #4]
 371:./Hardware/MQTT/MqttKit.c **** 		mqttPacket->_len += user_len;
 1126              		.loc 1 371 3 view .LVU397
 1127 0288 2A46     		mov	r2, r5
 1128 028a 3146     		mov	r1, r6
 1129 028c 1844     		add	r0, r0, r3
 1130 028e FFF7FEFF 		bl	strncat
 1131              	.LVL103:
 372:./Hardware/MQTT/MqttKit.c **** 	}
 1132              		.loc 1 372 3 is_stmt 1 view .LVU398
 372:./Hardware/MQTT/MqttKit.c **** 	}
 1133              		.loc 1 372 20 is_stmt 0 view .LVU399
 1134 0292 6368     		ldr	r3, [r4, #4]
 1135 0294 2B44     		add	r3, r3, r5
 1136 0296 6360     		str	r3, [r4, #4]
 1137 0298 BCE7     		b	.L51
 1138              	.LVL104:
 1139              	.L52:
 372:./Hardware/MQTT/MqttKit.c **** 	}
 1140              		.loc 1 372 20 view .LVU400
 1141              	.LBE6:
 240:./Hardware/MQTT/MqttKit.c **** 	
 1142              		.loc 1 240 10 view .LVU401
 1143 029a 0120     		movs	r0, #1
 1144              	.LVL105:
 240:./Hardware/MQTT/MqttKit.c **** 	
 1145              		.loc 1 240 10 view .LVU402
 1146 029c EBE6     		b	.L41
 1147              	.LVL106:
 1148              	.L54:
 286:./Hardware/MQTT/MqttKit.c **** 	}
 1149              		.loc 1 286 10 view .LVU403
 1150 029e 0320     		movs	r0, #3
 1151 02a0 E9E6     		b	.L41
 1152              	.L55:
 1153 02a2 0320     		movs	r0, #3
 1154 02a4 E7E6     		b	.L41
 1155              	.LVL107:
 1156              	.L56:
 295:./Hardware/MQTT/MqttKit.c **** 	
 1157              		.loc 1 295 10 view .LVU404
 1158 02a6 0420     		movs	r0, #4
 1159 02a8 E5E6     		b	.L41
 1160              	.L63:
 1161 02aa 00BF     		.align	2
 1162              	.L62:
 1163 02ac 00000000 		.word	.LC1
 1164              		.cfi_endproc
ARM GAS  /tmp/ccYLmkow.s 			page 33


 1165              	.LFE5:
 1167              		.section	.text.MQTT_PacketDisConnect,"ax",%progbits
 1168              		.align	1
 1169              		.global	MQTT_PacketDisConnect
 1170              		.syntax unified
 1171              		.thumb
 1172              		.thumb_func
 1173              		.fpu softvfp
 1175              	MQTT_PacketDisConnect:
 1176              	.LVL108:
 1177              	.LFB6:
 389:./Hardware/MQTT/MqttKit.c **** 
 390:./Hardware/MQTT/MqttKit.c **** //==========================================================
 391:./Hardware/MQTT/MqttKit.c **** //	函数名称：	MQTT_PacketDisConnect
 392:./Hardware/MQTT/MqttKit.c **** //
 393:./Hardware/MQTT/MqttKit.c **** //	函数功能：	断开连接消息组包
 394:./Hardware/MQTT/MqttKit.c **** //
 395:./Hardware/MQTT/MqttKit.c **** //	入口参数：	mqttPacket：包指针
 396:./Hardware/MQTT/MqttKit.c **** //
 397:./Hardware/MQTT/MqttKit.c **** //	返回参数：	0-成功		1-失败
 398:./Hardware/MQTT/MqttKit.c **** //
 399:./Hardware/MQTT/MqttKit.c **** //	说明：		
 400:./Hardware/MQTT/MqttKit.c **** //==========================================================
 401:./Hardware/MQTT/MqttKit.c **** uint1 MQTT_PacketDisConnect(MQTT_PACKET_STRUCTURE *mqttPacket)
 402:./Hardware/MQTT/MqttKit.c **** {
 1178              		.loc 1 402 1 is_stmt 1 view -0
 1179              		.cfi_startproc
 1180              		@ args = 0, pretend = 0, frame = 0
 1181              		@ frame_needed = 0, uses_anonymous_args = 0
 1182              		.loc 1 402 1 is_stmt 0 view .LVU406
 1183 0000 10B5     		push	{r4, lr}
 1184              	.LCFI12:
 1185              		.cfi_def_cfa_offset 8
 1186              		.cfi_offset 4, -8
 1187              		.cfi_offset 14, -4
 1188 0002 0446     		mov	r4, r0
 403:./Hardware/MQTT/MqttKit.c **** 
 404:./Hardware/MQTT/MqttKit.c **** 	MQTT_NewBuffer(mqttPacket, 2);
 1189              		.loc 1 404 2 is_stmt 1 view .LVU407
 1190 0004 0221     		movs	r1, #2
 1191 0006 FFF7FEFF 		bl	MQTT_NewBuffer
 1192              	.LVL109:
 405:./Hardware/MQTT/MqttKit.c **** 	if(mqttPacket->_data == NULL)
 1193              		.loc 1 405 2 view .LVU408
 1194              		.loc 1 405 15 is_stmt 0 view .LVU409
 1195 000a 2368     		ldr	r3, [r4]
 1196              		.loc 1 405 4 view .LVU410
 1197 000c 5BB1     		cbz	r3, .L66
 406:./Hardware/MQTT/MqttKit.c **** 		return 1;
 407:./Hardware/MQTT/MqttKit.c **** 	
 408:./Hardware/MQTT/MqttKit.c **** /*************************************固定头部***********************************************/
 409:./Hardware/MQTT/MqttKit.c **** 	
 410:./Hardware/MQTT/MqttKit.c **** 	//固定头部----------------------头部消息-------------------------------------------------
 411:./Hardware/MQTT/MqttKit.c **** 	mqttPacket->_data[mqttPacket->_len++] = MQTT_PKT_DISCONNECT << 4;
 1198              		.loc 1 411 2 is_stmt 1 view .LVU411
 1199              		.loc 1 411 30 is_stmt 0 view .LVU412
 1200 000e 6268     		ldr	r2, [r4, #4]
ARM GAS  /tmp/ccYLmkow.s 			page 34


 1201              		.loc 1 411 36 view .LVU413
 1202 0010 511C     		adds	r1, r2, #1
 1203 0012 6160     		str	r1, [r4, #4]
 1204              		.loc 1 411 40 view .LVU414
 1205 0014 E021     		movs	r1, #224
 1206 0016 9954     		strb	r1, [r3, r2]
 412:./Hardware/MQTT/MqttKit.c **** 	
 413:./Hardware/MQTT/MqttKit.c **** 	//固定头部----------------------剩余长度值-----------------------------------------------
 414:./Hardware/MQTT/MqttKit.c **** 	mqttPacket->_data[mqttPacket->_len++] = 0;
 1207              		.loc 1 414 2 is_stmt 1 view .LVU415
 1208              		.loc 1 414 12 is_stmt 0 view .LVU416
 1209 0018 2268     		ldr	r2, [r4]
 1210              		.loc 1 414 30 view .LVU417
 1211 001a 6368     		ldr	r3, [r4, #4]
 1212              		.loc 1 414 36 view .LVU418
 1213 001c 591C     		adds	r1, r3, #1
 1214 001e 6160     		str	r1, [r4, #4]
 1215              		.loc 1 414 40 view .LVU419
 1216 0020 0020     		movs	r0, #0
 1217 0022 D054     		strb	r0, [r2, r3]
 415:./Hardware/MQTT/MqttKit.c **** 	
 416:./Hardware/MQTT/MqttKit.c **** 	return 0;
 1218              		.loc 1 416 2 is_stmt 1 view .LVU420
 1219              	.L65:
 417:./Hardware/MQTT/MqttKit.c **** 
 418:./Hardware/MQTT/MqttKit.c **** }
 1220              		.loc 1 418 1 is_stmt 0 view .LVU421
 1221 0024 10BD     		pop	{r4, pc}
 1222              	.LVL110:
 1223              	.L66:
 406:./Hardware/MQTT/MqttKit.c **** 	
 1224              		.loc 1 406 10 view .LVU422
 1225 0026 0120     		movs	r0, #1
 1226 0028 FCE7     		b	.L65
 1227              		.cfi_endproc
 1228              	.LFE6:
 1230              		.section	.text.MQTT_UnPacketConnectAck,"ax",%progbits
 1231              		.align	1
 1232              		.global	MQTT_UnPacketConnectAck
 1233              		.syntax unified
 1234              		.thumb
 1235              		.thumb_func
 1236              		.fpu softvfp
 1238              	MQTT_UnPacketConnectAck:
 1239              	.LVL111:
 1240              	.LFB7:
 419:./Hardware/MQTT/MqttKit.c **** 
 420:./Hardware/MQTT/MqttKit.c **** //==========================================================
 421:./Hardware/MQTT/MqttKit.c **** //	函数名称：	MQTT_UnPacketConnectAck
 422:./Hardware/MQTT/MqttKit.c **** //
 423:./Hardware/MQTT/MqttKit.c **** //	函数功能：	连接消息解包
 424:./Hardware/MQTT/MqttKit.c **** //
 425:./Hardware/MQTT/MqttKit.c **** //	入口参数：	rev_data：接收的数据
 426:./Hardware/MQTT/MqttKit.c **** //
 427:./Hardware/MQTT/MqttKit.c **** //	返回参数：	1、255-失败		其他-平台的返回码
 428:./Hardware/MQTT/MqttKit.c **** //
 429:./Hardware/MQTT/MqttKit.c **** //	说明：		
ARM GAS  /tmp/ccYLmkow.s 			page 35


 430:./Hardware/MQTT/MqttKit.c **** //==========================================================
 431:./Hardware/MQTT/MqttKit.c **** uint8 MQTT_UnPacketConnectAck(uint8 *rev_data)
 432:./Hardware/MQTT/MqttKit.c **** {
 1241              		.loc 1 432 1 is_stmt 1 view -0
 1242              		.cfi_startproc
 1243              		@ args = 0, pretend = 0, frame = 0
 1244              		@ frame_needed = 0, uses_anonymous_args = 0
 1245              		@ link register save eliminated.
 433:./Hardware/MQTT/MqttKit.c **** 
 434:./Hardware/MQTT/MqttKit.c **** 	if(rev_data[1] != 2)
 1246              		.loc 1 434 2 view .LVU424
 1247              		.loc 1 434 13 is_stmt 0 view .LVU425
 1248 0000 4378     		ldrb	r3, [r0, #1]	@ zero_extendqisi2
 1249              		.loc 1 434 4 view .LVU426
 1250 0002 022B     		cmp	r3, #2
 1251 0004 04D1     		bne	.L70
 435:./Hardware/MQTT/MqttKit.c **** 		return 1;
 436:./Hardware/MQTT/MqttKit.c **** 	
 437:./Hardware/MQTT/MqttKit.c **** 	if(rev_data[2] == 0 || rev_data[2] == 1)
 1252              		.loc 1 437 2 is_stmt 1 view .LVU427
 1253              		.loc 1 437 13 is_stmt 0 view .LVU428
 1254 0006 8378     		ldrb	r3, [r0, #2]	@ zero_extendqisi2
 1255              		.loc 1 437 4 view .LVU429
 1256 0008 012B     		cmp	r3, #1
 1257 000a 03D8     		bhi	.L71
 438:./Hardware/MQTT/MqttKit.c **** 		return rev_data[3];
 1258              		.loc 1 438 3 is_stmt 1 view .LVU430
 1259              		.loc 1 438 18 is_stmt 0 view .LVU431
 1260 000c C078     		ldrb	r0, [r0, #3]	@ zero_extendqisi2
 1261              	.LVL112:
 1262              		.loc 1 438 18 view .LVU432
 1263 000e 7047     		bx	lr
 1264              	.LVL113:
 1265              	.L70:
 435:./Hardware/MQTT/MqttKit.c **** 		return 1;
 1266              		.loc 1 435 10 view .LVU433
 1267 0010 0120     		movs	r0, #1
 1268              	.LVL114:
 435:./Hardware/MQTT/MqttKit.c **** 		return 1;
 1269              		.loc 1 435 10 view .LVU434
 1270 0012 7047     		bx	lr
 1271              	.LVL115:
 1272              	.L71:
 439:./Hardware/MQTT/MqttKit.c **** 	else
 440:./Hardware/MQTT/MqttKit.c **** 		return 255;
 1273              		.loc 1 440 10 view .LVU435
 1274 0014 FF20     		movs	r0, #255
 1275              	.LVL116:
 441:./Hardware/MQTT/MqttKit.c **** 
 442:./Hardware/MQTT/MqttKit.c **** }
 1276              		.loc 1 442 1 view .LVU436
 1277 0016 7047     		bx	lr
 1278              		.cfi_endproc
 1279              	.LFE7:
 1281              		.section	.text.MQTT_UnPacketCmd,"ax",%progbits
 1282              		.align	1
 1283              		.global	MQTT_UnPacketCmd
ARM GAS  /tmp/ccYLmkow.s 			page 36


 1284              		.syntax unified
 1285              		.thumb
 1286              		.thumb_func
 1287              		.fpu softvfp
 1289              	MQTT_UnPacketCmd:
 1290              	.LVL117:
 1291              	.LFB9:
 443:./Hardware/MQTT/MqttKit.c **** 
 444:./Hardware/MQTT/MqttKit.c **** //==========================================================
 445:./Hardware/MQTT/MqttKit.c **** //	函数名称：	MQTT_PacketSaveData
 446:./Hardware/MQTT/MqttKit.c **** //
 447:./Hardware/MQTT/MqttKit.c **** //	函数功能：	数据点上传组包
 448:./Hardware/MQTT/MqttKit.c **** //
 449:./Hardware/MQTT/MqttKit.c **** //	入口参数：	devid：设备ID(可为空)
 450:./Hardware/MQTT/MqttKit.c **** //				send_buf：json缓存buf
 451:./Hardware/MQTT/MqttKit.c **** //				send_len：json总长
 452:./Hardware/MQTT/MqttKit.c **** //				type_bin_head：bin文件的消息头
 453:./Hardware/MQTT/MqttKit.c **** //				type：类型
 454:./Hardware/MQTT/MqttKit.c **** //
 455:./Hardware/MQTT/MqttKit.c **** //	返回参数：	0-成功		1-失败
 456:./Hardware/MQTT/MqttKit.c **** //
 457:./Hardware/MQTT/MqttKit.c **** //	说明：		
 458:./Hardware/MQTT/MqttKit.c **** //==========================================================
 459:./Hardware/MQTT/MqttKit.c **** uint1 MQTT_PacketSaveData(const int8 *devid, int16 send_len, int8 *type_bin_head, uint8 type, MQTT_
 460:./Hardware/MQTT/MqttKit.c **** {
 461:./Hardware/MQTT/MqttKit.c **** 
 462:./Hardware/MQTT/MqttKit.c **** 	if(MQTT_PacketPublish(MQTT_PUBLISH_ID, "$dp", NULL, send_len + 3, MQTT_QOS_LEVEL1, 0, 1, mqttPacke
 463:./Hardware/MQTT/MqttKit.c **** 	{
 464:./Hardware/MQTT/MqttKit.c **** 		mqttPacket->_data[mqttPacket->_len++] = type;					//类型
 465:./Hardware/MQTT/MqttKit.c **** 		
 466:./Hardware/MQTT/MqttKit.c **** 		mqttPacket->_data[mqttPacket->_len++] = MOSQ_MSB(send_len);
 467:./Hardware/MQTT/MqttKit.c **** 		mqttPacket->_data[mqttPacket->_len++] = MOSQ_LSB(send_len);
 468:./Hardware/MQTT/MqttKit.c **** 	}
 469:./Hardware/MQTT/MqttKit.c **** 	else
 470:./Hardware/MQTT/MqttKit.c **** 		return 1;
 471:./Hardware/MQTT/MqttKit.c **** 	
 472:./Hardware/MQTT/MqttKit.c **** 	return 0;
 473:./Hardware/MQTT/MqttKit.c **** 
 474:./Hardware/MQTT/MqttKit.c **** }
 475:./Hardware/MQTT/MqttKit.c **** 
 476:./Hardware/MQTT/MqttKit.c **** //==========================================================
 477:./Hardware/MQTT/MqttKit.c **** //	函数名称：	MQTT_UnPacketCmd
 478:./Hardware/MQTT/MqttKit.c **** //
 479:./Hardware/MQTT/MqttKit.c **** //	函数功能：	命令下发解包
 480:./Hardware/MQTT/MqttKit.c **** //
 481:./Hardware/MQTT/MqttKit.c **** //	入口参数：	rev_data：接收的数据指针
 482:./Hardware/MQTT/MqttKit.c **** //				cmdid：cmdid-uuid
 483:./Hardware/MQTT/MqttKit.c **** //				req：命令
 484:./Hardware/MQTT/MqttKit.c **** //
 485:./Hardware/MQTT/MqttKit.c **** //	返回参数：	0-成功		其他-失败原因
 486:./Hardware/MQTT/MqttKit.c **** //
 487:./Hardware/MQTT/MqttKit.c **** //	说明：		
 488:./Hardware/MQTT/MqttKit.c **** //==========================================================
 489:./Hardware/MQTT/MqttKit.c **** uint8 MQTT_UnPacketCmd(uint8 *rev_data, int8 **cmdid, int8 **req, uint16 *req_len)
 490:./Hardware/MQTT/MqttKit.c **** {
 1292              		.loc 1 490 1 is_stmt 1 view -0
 1293              		.cfi_startproc
ARM GAS  /tmp/ccYLmkow.s 			page 37


 1294              		@ args = 0, pretend = 0, frame = 8
 1295              		@ frame_needed = 0, uses_anonymous_args = 0
 1296              		.loc 1 490 1 is_stmt 0 view .LVU438
 1297 0000 2DE9F043 		push	{r4, r5, r6, r7, r8, r9, lr}
 1298              	.LCFI13:
 1299              		.cfi_def_cfa_offset 28
 1300              		.cfi_offset 4, -28
 1301              		.cfi_offset 5, -24
 1302              		.cfi_offset 6, -20
 1303              		.cfi_offset 7, -16
 1304              		.cfi_offset 8, -12
 1305              		.cfi_offset 9, -8
 1306              		.cfi_offset 14, -4
 1307 0004 83B0     		sub	sp, sp, #12
 1308              	.LCFI14:
 1309              		.cfi_def_cfa_offset 40
 1310 0006 0446     		mov	r4, r0
 1311 0008 0F46     		mov	r7, r1
 1312 000a 1646     		mov	r6, r2
 1313 000c 1D46     		mov	r5, r3
 491:./Hardware/MQTT/MqttKit.c **** 
 492:./Hardware/MQTT/MqttKit.c **** 	int8 *dataPtr = strchr((int8 *)rev_data + 6, '/');	//加6是跳过头信息
 1314              		.loc 1 492 2 is_stmt 1 view .LVU439
 1315              		.loc 1 492 18 is_stmt 0 view .LVU440
 1316 000e 2F21     		movs	r1, #47
 1317              	.LVL118:
 1318              		.loc 1 492 18 view .LVU441
 1319 0010 0630     		adds	r0, r0, #6
 1320              	.LVL119:
 1321              		.loc 1 492 18 view .LVU442
 1322 0012 FFF7FEFF 		bl	strchr
 1323              	.LVL120:
 493:./Hardware/MQTT/MqttKit.c **** 	
 494:./Hardware/MQTT/MqttKit.c **** 	uint32 remain_len = 0;
 1324              		.loc 1 494 2 is_stmt 1 view .LVU443
 1325              		.loc 1 494 9 is_stmt 0 view .LVU444
 1326 0016 0023     		movs	r3, #0
 1327 0018 0193     		str	r3, [sp, #4]
 495:./Hardware/MQTT/MqttKit.c **** 	
 496:./Hardware/MQTT/MqttKit.c **** 	if(dataPtr == NULL)									//未找到'/'
 1328              		.loc 1 496 2 is_stmt 1 view .LVU445
 1329              		.loc 1 496 4 is_stmt 0 view .LVU446
 1330 001a 0028     		cmp	r0, #0
 1331 001c 43D0     		beq	.L76
 1332 001e 8146     		mov	r9, r0
 497:./Hardware/MQTT/MqttKit.c **** 		return 1;
 498:./Hardware/MQTT/MqttKit.c **** 	dataPtr++;											//跳过'/'
 1333              		.loc 1 498 2 is_stmt 1 view .LVU447
 1334              		.loc 1 498 9 is_stmt 0 view .LVU448
 1335 0020 00F10108 		add	r8, r0, #1
 1336              	.LVL121:
 499:./Hardware/MQTT/MqttKit.c **** 	
 500:./Hardware/MQTT/MqttKit.c **** 	MQTT_ReadLength(rev_data + 1, 4, &remain_len);		//读取剩余字节
 1337              		.loc 1 500 2 is_stmt 1 view .LVU449
 1338 0024 01AA     		add	r2, sp, #4
 1339 0026 0421     		movs	r1, #4
 1340 0028 601C     		adds	r0, r4, #1
ARM GAS  /tmp/ccYLmkow.s 			page 38


 1341 002a FFF7FEFF 		bl	MQTT_ReadLength
 1342              	.LVL122:
 501:./Hardware/MQTT/MqttKit.c **** 	
 502:./Hardware/MQTT/MqttKit.c **** 	*cmdid = (int8 *)MQTT_MallocBuffer(37);				//cmdid固定36字节，多分配一个结束符的位
 1343              		.loc 1 502 2 view .LVU450
 1344              		.loc 1 502 19 is_stmt 0 view .LVU451
 1345 002e 2520     		movs	r0, #37
 1346 0030 FFF7FEFF 		bl	malloc
 1347              	.LVL123:
 1348              		.loc 1 502 9 view .LVU452
 1349 0034 3860     		str	r0, [r7]
 503:./Hardware/MQTT/MqttKit.c **** 	if(*cmdid == NULL)
 1350              		.loc 1 503 2 is_stmt 1 view .LVU453
 1351              		.loc 1 503 4 is_stmt 0 view .LVU454
 1352 0036 0028     		cmp	r0, #0
 1353 0038 37D0     		beq	.L77
 504:./Hardware/MQTT/MqttKit.c **** 		return 2;
 505:./Hardware/MQTT/MqttKit.c **** 	
 506:./Hardware/MQTT/MqttKit.c **** 	memset(*cmdid, 0, 37);								//全部清零
 1354              		.loc 1 506 2 is_stmt 1 view .LVU455
 1355 003a 2522     		movs	r2, #37
 1356 003c 0021     		movs	r1, #0
 1357 003e FFF7FEFF 		bl	memset
 1358              	.LVL124:
 507:./Hardware/MQTT/MqttKit.c **** 	memcpy(*cmdid, (const int8 *)dataPtr, 36);			//复制cmdid
 1359              		.loc 1 507 2 view .LVU456
 1360 0042 4046     		mov	r0, r8
 1361 0044 3C68     		ldr	r4, [r7]
 1362              	.LVL125:
 1363              		.loc 1 507 2 is_stmt 0 view .LVU457
 1364 0046 09F12108 		add	r8, r9, #33
 1365              	.LVL126:
 1366              	.L74:
 1367              		.loc 1 507 2 view .LVU458
 1368 004a D0F800C0 		ldr	ip, [r0]	@ unaligned
 1369 004e 4168     		ldr	r1, [r0, #4]	@ unaligned
 1370 0050 8268     		ldr	r2, [r0, #8]	@ unaligned
 1371 0052 C368     		ldr	r3, [r0, #12]	@ unaligned
 1372 0054 C4F800C0 		str	ip, [r4]	@ unaligned
 1373 0058 6160     		str	r1, [r4, #4]	@ unaligned
 1374 005a A260     		str	r2, [r4, #8]	@ unaligned
 1375 005c E360     		str	r3, [r4, #12]	@ unaligned
 1376 005e 1030     		adds	r0, r0, #16
 1377 0060 1034     		adds	r4, r4, #16
 1378 0062 4045     		cmp	r0, r8
 1379 0064 F1D1     		bne	.L74
 1380 0066 0368     		ldr	r3, [r0]	@ unaligned
 1381 0068 2360     		str	r3, [r4]	@ unaligned
 508:./Hardware/MQTT/MqttKit.c **** 	dataPtr += 36;
 1382              		.loc 1 508 2 is_stmt 1 view .LVU459
 1383              		.loc 1 508 10 is_stmt 0 view .LVU460
 1384 006a 09F12509 		add	r9, r9, #37
 1385              	.LVL127:
 509:./Hardware/MQTT/MqttKit.c **** 	
 510:./Hardware/MQTT/MqttKit.c **** 	*req_len = remain_len - 44;							//命令长度 = 剩余长度(remain_len) - 2 - 5($creq) - 1(\) 
 1386              		.loc 1 510 2 is_stmt 1 view .LVU461
 1387              		.loc 1 510 24 is_stmt 0 view .LVU462
ARM GAS  /tmp/ccYLmkow.s 			page 39


 1388 006e 0198     		ldr	r0, [sp, #4]
 1389 0070 2C38     		subs	r0, r0, #44
 1390 0072 80B2     		uxth	r0, r0
 1391              		.loc 1 510 11 view .LVU463
 1392 0074 2880     		strh	r0, [r5]	@ movhi
 511:./Hardware/MQTT/MqttKit.c **** 	*req = (int8 *)MQTT_MallocBuffer(*req_len + 1);		//分配命令长度+1
 1393              		.loc 1 511 2 is_stmt 1 view .LVU464
 1394              		.loc 1 511 17 is_stmt 0 view .LVU465
 1395 0076 0130     		adds	r0, r0, #1
 1396 0078 FFF7FEFF 		bl	malloc
 1397              	.LVL128:
 1398              		.loc 1 511 7 view .LVU466
 1399 007c 3060     		str	r0, [r6]
 512:./Hardware/MQTT/MqttKit.c **** 	if(*req == NULL)
 1400              		.loc 1 512 2 is_stmt 1 view .LVU467
 1401              		.loc 1 512 4 is_stmt 0 view .LVU468
 1402 007e 68B1     		cbz	r0, .L79
 513:./Hardware/MQTT/MqttKit.c **** 	{
 514:./Hardware/MQTT/MqttKit.c **** 		MQTT_FreeBuffer(*cmdid);
 515:./Hardware/MQTT/MqttKit.c **** 		return 3;
 516:./Hardware/MQTT/MqttKit.c **** 	}
 517:./Hardware/MQTT/MqttKit.c **** 	
 518:./Hardware/MQTT/MqttKit.c **** 	memset(*req, 0, *req_len + 1);						//清零
 1403              		.loc 1 518 2 is_stmt 1 view .LVU469
 1404              		.loc 1 518 18 is_stmt 0 view .LVU470
 1405 0080 2A88     		ldrh	r2, [r5]
 1406              		.loc 1 518 2 view .LVU471
 1407 0082 0132     		adds	r2, r2, #1
 1408 0084 0021     		movs	r1, #0
 1409 0086 FFF7FEFF 		bl	memset
 1410              	.LVL129:
 519:./Hardware/MQTT/MqttKit.c **** 	memcpy(*req, (const int8 *)dataPtr, *req_len);		//复制命令
 1411              		.loc 1 519 2 is_stmt 1 view .LVU472
 1412 008a 2A88     		ldrh	r2, [r5]
 1413 008c 4946     		mov	r1, r9
 1414 008e 3068     		ldr	r0, [r6]
 1415 0090 FFF7FEFF 		bl	memcpy
 1416              	.LVL130:
 520:./Hardware/MQTT/MqttKit.c **** 	
 521:./Hardware/MQTT/MqttKit.c **** 	return 0;
 1417              		.loc 1 521 2 view .LVU473
 1418              		.loc 1 521 9 is_stmt 0 view .LVU474
 1419 0094 0020     		movs	r0, #0
 1420              	.LVL131:
 1421              	.L73:
 522:./Hardware/MQTT/MqttKit.c **** 
 523:./Hardware/MQTT/MqttKit.c **** }
 1422              		.loc 1 523 1 view .LVU475
 1423 0096 03B0     		add	sp, sp, #12
 1424              	.LCFI15:
 1425              		.cfi_remember_state
 1426              		.cfi_def_cfa_offset 28
 1427              		@ sp needed
 1428 0098 BDE8F083 		pop	{r4, r5, r6, r7, r8, r9, pc}
 1429              	.LVL132:
 1430              	.L79:
 1431              	.LCFI16:
ARM GAS  /tmp/ccYLmkow.s 			page 40


 1432              		.cfi_restore_state
 514:./Hardware/MQTT/MqttKit.c **** 		return 3;
 1433              		.loc 1 514 3 is_stmt 1 view .LVU476
 1434 009c 3868     		ldr	r0, [r7]
 1435 009e FFF7FEFF 		bl	free
 1436              	.LVL133:
 515:./Hardware/MQTT/MqttKit.c **** 	}
 1437              		.loc 1 515 3 view .LVU477
 515:./Hardware/MQTT/MqttKit.c **** 	}
 1438              		.loc 1 515 10 is_stmt 0 view .LVU478
 1439 00a2 0320     		movs	r0, #3
 1440 00a4 F7E7     		b	.L73
 1441              	.LVL134:
 1442              	.L76:
 497:./Hardware/MQTT/MqttKit.c **** 	dataPtr++;											//跳过'/'
 1443              		.loc 1 497 10 view .LVU479
 1444 00a6 0120     		movs	r0, #1
 1445              	.LVL135:
 497:./Hardware/MQTT/MqttKit.c **** 	dataPtr++;											//跳过'/'
 1446              		.loc 1 497 10 view .LVU480
 1447 00a8 F5E7     		b	.L73
 1448              	.LVL136:
 1449              	.L77:
 504:./Hardware/MQTT/MqttKit.c **** 	
 1450              		.loc 1 504 10 view .LVU481
 1451 00aa 0220     		movs	r0, #2
 1452 00ac F3E7     		b	.L73
 1453              		.cfi_endproc
 1454              	.LFE9:
 1456              		.section	.text.MQTT_PacketSubscribe,"ax",%progbits
 1457              		.align	1
 1458              		.global	MQTT_PacketSubscribe
 1459              		.syntax unified
 1460              		.thumb
 1461              		.thumb_func
 1462              		.fpu softvfp
 1464              	MQTT_PacketSubscribe:
 1465              	.LVL137:
 1466              	.LFB11:
 524:./Hardware/MQTT/MqttKit.c **** 
 525:./Hardware/MQTT/MqttKit.c **** //==========================================================
 526:./Hardware/MQTT/MqttKit.c **** //	函数名称：	MQTT_PacketCmdResp
 527:./Hardware/MQTT/MqttKit.c **** //
 528:./Hardware/MQTT/MqttKit.c **** //	函数功能：	命令回复组包
 529:./Hardware/MQTT/MqttKit.c **** //
 530:./Hardware/MQTT/MqttKit.c **** //	入口参数：	cmdid：cmdid
 531:./Hardware/MQTT/MqttKit.c **** //				req：命令
 532:./Hardware/MQTT/MqttKit.c **** //				mqttPacket：包指针
 533:./Hardware/MQTT/MqttKit.c **** //
 534:./Hardware/MQTT/MqttKit.c **** //	返回参数：	0-成功		1-失败
 535:./Hardware/MQTT/MqttKit.c **** //
 536:./Hardware/MQTT/MqttKit.c **** //	说明：		
 537:./Hardware/MQTT/MqttKit.c **** //==========================================================
 538:./Hardware/MQTT/MqttKit.c **** uint1 MQTT_PacketCmdResp(const int8 *cmdid, const int8 *req, MQTT_PACKET_STRUCTURE *mqttPacket)
 539:./Hardware/MQTT/MqttKit.c **** {
 540:./Hardware/MQTT/MqttKit.c **** 	
 541:./Hardware/MQTT/MqttKit.c **** 	uint16 cmdid_len = strlen(cmdid);
ARM GAS  /tmp/ccYLmkow.s 			page 41


 542:./Hardware/MQTT/MqttKit.c **** 	uint16 req_len = strlen(req);
 543:./Hardware/MQTT/MqttKit.c **** 	_Bool status = 0;
 544:./Hardware/MQTT/MqttKit.c **** 	
 545:./Hardware/MQTT/MqttKit.c **** 	int8 *payload = MQTT_MallocBuffer(cmdid_len + 6);
 546:./Hardware/MQTT/MqttKit.c **** 	if(payload == NULL)
 547:./Hardware/MQTT/MqttKit.c **** 		return 1;
 548:./Hardware/MQTT/MqttKit.c **** 	
 549:./Hardware/MQTT/MqttKit.c **** 	memset(payload, 0, cmdid_len + 6);
 550:./Hardware/MQTT/MqttKit.c **** 	memcpy(payload, "$crsp/", 6);
 551:./Hardware/MQTT/MqttKit.c **** 	strncat(payload, cmdid, cmdid_len);
 552:./Hardware/MQTT/MqttKit.c **** 
 553:./Hardware/MQTT/MqttKit.c **** 	if(MQTT_PacketPublish(MQTT_PUBLISH_ID, payload, req, strlen(req), MQTT_QOS_LEVEL0, 0, 1, mqttPacke
 554:./Hardware/MQTT/MqttKit.c **** 		status = 0;
 555:./Hardware/MQTT/MqttKit.c **** 	else
 556:./Hardware/MQTT/MqttKit.c **** 		status = 1;
 557:./Hardware/MQTT/MqttKit.c **** 	
 558:./Hardware/MQTT/MqttKit.c **** 	MQTT_FreeBuffer(payload);
 559:./Hardware/MQTT/MqttKit.c **** 	
 560:./Hardware/MQTT/MqttKit.c **** 	return status;
 561:./Hardware/MQTT/MqttKit.c **** 
 562:./Hardware/MQTT/MqttKit.c **** }
 563:./Hardware/MQTT/MqttKit.c **** 
 564:./Hardware/MQTT/MqttKit.c **** //==========================================================
 565:./Hardware/MQTT/MqttKit.c **** //	函数名称：	MQTT_PacketSubscribe
 566:./Hardware/MQTT/MqttKit.c **** //
 567:./Hardware/MQTT/MqttKit.c **** //	函数功能：	Subscribe消息组包
 568:./Hardware/MQTT/MqttKit.c **** //
 569:./Hardware/MQTT/MqttKit.c **** //	入口参数：	pkt_id：pkt_id
 570:./Hardware/MQTT/MqttKit.c **** //				qos：消息重发次数
 571:./Hardware/MQTT/MqttKit.c **** //				topics：订阅的消息
 572:./Hardware/MQTT/MqttKit.c **** //				topics_cnt：订阅的消息个数
 573:./Hardware/MQTT/MqttKit.c **** //				mqttPacket：包指针
 574:./Hardware/MQTT/MqttKit.c **** //
 575:./Hardware/MQTT/MqttKit.c **** //	返回参数：	0-成功		其他-失败
 576:./Hardware/MQTT/MqttKit.c **** //
 577:./Hardware/MQTT/MqttKit.c **** //	说明：		
 578:./Hardware/MQTT/MqttKit.c **** //==========================================================
 579:./Hardware/MQTT/MqttKit.c **** uint8 MQTT_PacketSubscribe(uint16 pkt_id, enum MqttQosLevel qos, const int8 *topics[], uint8 topics
 580:./Hardware/MQTT/MqttKit.c **** {
 1467              		.loc 1 580 1 is_stmt 1 view -0
 1468              		.cfi_startproc
 1469              		@ args = 4, pretend = 0, frame = 0
 1470              		@ frame_needed = 0, uses_anonymous_args = 0
 1471              		.loc 1 580 1 is_stmt 0 view .LVU483
 1472 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 1473              	.LCFI17:
 1474              		.cfi_def_cfa_offset 32
 1475              		.cfi_offset 4, -32
 1476              		.cfi_offset 5, -28
 1477              		.cfi_offset 6, -24
 1478              		.cfi_offset 7, -20
 1479              		.cfi_offset 8, -16
 1480              		.cfi_offset 9, -12
 1481              		.cfi_offset 10, -8
 1482              		.cfi_offset 14, -4
 1483 0004 089D     		ldr	r5, [sp, #32]
 581:./Hardware/MQTT/MqttKit.c **** 	
ARM GAS  /tmp/ccYLmkow.s 			page 42


 582:./Hardware/MQTT/MqttKit.c **** 	uint32 topic_len = 0, remain_len = 0;
 1484              		.loc 1 582 2 is_stmt 1 view .LVU484
 1485              	.LVL138:
 583:./Hardware/MQTT/MqttKit.c **** 	int16 len = 0;
 1486              		.loc 1 583 2 view .LVU485
 584:./Hardware/MQTT/MqttKit.c **** 	uint8 i = 0;
 1487              		.loc 1 584 2 view .LVU486
 585:./Hardware/MQTT/MqttKit.c **** 	
 586:./Hardware/MQTT/MqttKit.c **** 	if(pkt_id == 0)
 1488              		.loc 1 586 2 view .LVU487
 1489              		.loc 1 586 4 is_stmt 0 view .LVU488
 1490 0006 0028     		cmp	r0, #0
 1491 0008 6AD0     		beq	.L87
 1492 000a 8846     		mov	r8, r1
 1493 000c 1646     		mov	r6, r2
 1494 000e 1F46     		mov	r7, r3
 1495 0010 8246     		mov	r10, r0
 584:./Hardware/MQTT/MqttKit.c **** 	uint8 i = 0;
 1496              		.loc 1 584 8 view .LVU489
 1497 0012 0024     		movs	r4, #0
 582:./Hardware/MQTT/MqttKit.c **** 	int16 len = 0;
 1498              		.loc 1 582 9 view .LVU490
 1499 0014 A146     		mov	r9, r4
 1500              	.LVL139:
 1501              	.L82:
 587:./Hardware/MQTT/MqttKit.c **** 		return 1;
 588:./Hardware/MQTT/MqttKit.c **** 	
 589:./Hardware/MQTT/MqttKit.c **** 	//计算topic长度-------------------------------------------------------------------------
 590:./Hardware/MQTT/MqttKit.c **** 	for(; i < topics_cnt; i++)
 1502              		.loc 1 590 8 is_stmt 1 discriminator 1 view .LVU491
 1503              		.loc 1 590 2 is_stmt 0 discriminator 1 view .LVU492
 1504 0016 BC42     		cmp	r4, r7
 1505 0018 09D2     		bcs	.L91
 591:./Hardware/MQTT/MqttKit.c **** 	{
 592:./Hardware/MQTT/MqttKit.c **** 		if(topics[i] == NULL)
 1506              		.loc 1 592 3 is_stmt 1 view .LVU493
 1507              		.loc 1 592 12 is_stmt 0 view .LVU494
 1508 001a 56F82400 		ldr	r0, [r6, r4, lsl #2]
 1509              		.loc 1 592 5 view .LVU495
 1510 001e 0028     		cmp	r0, #0
 1511 0020 61D0     		beq	.L88
 593:./Hardware/MQTT/MqttKit.c **** 			return 2;
 594:./Hardware/MQTT/MqttKit.c **** 		
 595:./Hardware/MQTT/MqttKit.c **** 		topic_len += strlen(topics[i]);
 1512              		.loc 1 595 3 is_stmt 1 view .LVU496
 1513              		.loc 1 595 16 is_stmt 0 view .LVU497
 1514 0022 FFF7FEFF 		bl	strlen
 1515              	.LVL140:
 1516              		.loc 1 595 13 view .LVU498
 1517 0026 8144     		add	r9, r9, r0
 1518              	.LVL141:
 590:./Hardware/MQTT/MqttKit.c **** 	{
 1519              		.loc 1 590 24 is_stmt 1 view .LVU499
 590:./Hardware/MQTT/MqttKit.c **** 	{
 1520              		.loc 1 590 25 is_stmt 0 view .LVU500
 1521 0028 0134     		adds	r4, r4, #1
 1522              	.LVL142:
ARM GAS  /tmp/ccYLmkow.s 			page 43


 590:./Hardware/MQTT/MqttKit.c **** 	{
 1523              		.loc 1 590 25 view .LVU501
 1524 002a E4B2     		uxtb	r4, r4
 1525              	.LVL143:
 590:./Hardware/MQTT/MqttKit.c **** 	{
 1526              		.loc 1 590 25 view .LVU502
 1527 002c F3E7     		b	.L82
 1528              	.L91:
 596:./Hardware/MQTT/MqttKit.c **** 	}
 597:./Hardware/MQTT/MqttKit.c **** 	
 598:./Hardware/MQTT/MqttKit.c **** 	//2 bytes packet id + topic filter(2 bytes topic + topic length + 1 byte reserve)------
 599:./Hardware/MQTT/MqttKit.c **** 	remain_len = 2 + 3 * topics_cnt + topic_len;
 1529              		.loc 1 599 2 is_stmt 1 view .LVU503
 1530              		.loc 1 599 21 is_stmt 0 view .LVU504
 1531 002e 07EB4701 		add	r1, r7, r7, lsl #1
 1532              		.loc 1 599 34 view .LVU505
 1533 0032 4944     		add	r1, r1, r9
 1534              		.loc 1 599 13 view .LVU506
 1535 0034 8C1C     		adds	r4, r1, #2
 1536              	.LVL144:
 600:./Hardware/MQTT/MqttKit.c **** 	
 601:./Hardware/MQTT/MqttKit.c **** 	//分配内存------------------------------------------------------------------------------
 602:./Hardware/MQTT/MqttKit.c **** 	MQTT_NewBuffer(mqttPacket, remain_len + 5);
 1537              		.loc 1 602 2 is_stmt 1 view .LVU507
 1538 0036 0731     		adds	r1, r1, #7
 1539 0038 2846     		mov	r0, r5
 1540 003a FFF7FEFF 		bl	MQTT_NewBuffer
 1541              	.LVL145:
 603:./Hardware/MQTT/MqttKit.c **** 	if(mqttPacket->_data == NULL)
 1542              		.loc 1 603 2 view .LVU508
 1543              		.loc 1 603 15 is_stmt 0 view .LVU509
 1544 003e 2B68     		ldr	r3, [r5]
 1545              		.loc 1 603 4 view .LVU510
 1546 0040 002B     		cmp	r3, #0
 1547 0042 52D0     		beq	.L89
 604:./Hardware/MQTT/MqttKit.c **** 		return 3;
 605:./Hardware/MQTT/MqttKit.c **** 	
 606:./Hardware/MQTT/MqttKit.c **** /*************************************固定头部***********************************************/
 607:./Hardware/MQTT/MqttKit.c **** 	
 608:./Hardware/MQTT/MqttKit.c **** 	//固定头部----------------------头部消息-------------------------------------------------
 609:./Hardware/MQTT/MqttKit.c **** 	mqttPacket->_data[mqttPacket->_len++] = MQTT_PKT_SUBSCRIBE << 4 | 0x02;
 1548              		.loc 1 609 2 is_stmt 1 view .LVU511
 1549              		.loc 1 609 30 is_stmt 0 view .LVU512
 1550 0044 6A68     		ldr	r2, [r5, #4]
 1551              		.loc 1 609 36 view .LVU513
 1552 0046 511C     		adds	r1, r2, #1
 1553 0048 6960     		str	r1, [r5, #4]
 1554              		.loc 1 609 40 view .LVU514
 1555 004a 8221     		movs	r1, #130
 1556 004c 9954     		strb	r1, [r3, r2]
 610:./Hardware/MQTT/MqttKit.c **** 	
 611:./Hardware/MQTT/MqttKit.c **** 	//固定头部----------------------剩余长度值-----------------------------------------------
 612:./Hardware/MQTT/MqttKit.c **** 	len = MQTT_DumpLength(remain_len, mqttPacket->_data + mqttPacket->_len);
 1557              		.loc 1 612 2 is_stmt 1 view .LVU515
 1558              		.loc 1 612 46 is_stmt 0 view .LVU516
 1559 004e 2968     		ldr	r1, [r5]
 1560              		.loc 1 612 66 view .LVU517
ARM GAS  /tmp/ccYLmkow.s 			page 44


 1561 0050 6B68     		ldr	r3, [r5, #4]
 1562              		.loc 1 612 8 view .LVU518
 1563 0052 1944     		add	r1, r1, r3
 1564 0054 2046     		mov	r0, r4
 1565 0056 FFF7FEFF 		bl	MQTT_DumpLength
 1566              	.LVL146:
 1567              		.loc 1 612 6 view .LVU519
 1568 005a 03B2     		sxth	r3, r0
 1569              	.LVL147:
 613:./Hardware/MQTT/MqttKit.c **** 	if(len < 0)
 1570              		.loc 1 613 2 is_stmt 1 view .LVU520
 1571              		.loc 1 613 4 is_stmt 0 view .LVU521
 1572 005c 002B     		cmp	r3, #0
 1573 005e 11DB     		blt	.L92
 614:./Hardware/MQTT/MqttKit.c **** 	{
 615:./Hardware/MQTT/MqttKit.c **** 		MQTT_DeleteBuffer(mqttPacket);
 616:./Hardware/MQTT/MqttKit.c **** 		return 4;
 617:./Hardware/MQTT/MqttKit.c **** 	}
 618:./Hardware/MQTT/MqttKit.c **** 	else
 619:./Hardware/MQTT/MqttKit.c **** 		mqttPacket->_len += len;
 1574              		.loc 1 619 3 is_stmt 1 view .LVU522
 1575              		.loc 1 619 20 is_stmt 0 view .LVU523
 1576 0060 6A68     		ldr	r2, [r5, #4]
 1577 0062 1344     		add	r3, r3, r2
 1578              	.LVL148:
 1579              		.loc 1 619 20 view .LVU524
 1580 0064 6B60     		str	r3, [r5, #4]
 620:./Hardware/MQTT/MqttKit.c **** 	
 621:./Hardware/MQTT/MqttKit.c **** /*************************************payload***********************************************/
 622:./Hardware/MQTT/MqttKit.c **** 	
 623:./Hardware/MQTT/MqttKit.c **** 	//payload----------------------pkt_id---------------------------------------------------
 624:./Hardware/MQTT/MqttKit.c **** 	mqttPacket->_data[mqttPacket->_len++] = MOSQ_MSB(pkt_id);
 1581              		.loc 1 624 2 is_stmt 1 view .LVU525
 1582              		.loc 1 624 12 is_stmt 0 view .LVU526
 1583 0066 2A68     		ldr	r2, [r5]
 1584              		.loc 1 624 36 view .LVU527
 1585 0068 591C     		adds	r1, r3, #1
 1586 006a 6960     		str	r1, [r5, #4]
 1587              		.loc 1 624 42 view .LVU528
 1588 006c 4FEA1A21 		lsr	r1, r10, #8
 1589              		.loc 1 624 40 view .LVU529
 1590 0070 D154     		strb	r1, [r2, r3]
 625:./Hardware/MQTT/MqttKit.c **** 	mqttPacket->_data[mqttPacket->_len++] = MOSQ_LSB(pkt_id);
 1591              		.loc 1 625 2 is_stmt 1 view .LVU530
 1592              		.loc 1 625 12 is_stmt 0 view .LVU531
 1593 0072 2A68     		ldr	r2, [r5]
 1594              		.loc 1 625 30 view .LVU532
 1595 0074 6B68     		ldr	r3, [r5, #4]
 1596              		.loc 1 625 36 view .LVU533
 1597 0076 591C     		adds	r1, r3, #1
 1598 0078 6960     		str	r1, [r5, #4]
 1599              		.loc 1 625 40 view .LVU534
 1600 007a 02F803A0 		strb	r10, [r2, r3]
 626:./Hardware/MQTT/MqttKit.c **** 	
 627:./Hardware/MQTT/MqttKit.c **** 	//payload----------------------topic_name-----------------------------------------------
 628:./Hardware/MQTT/MqttKit.c **** 	for(i = 0; i < topics_cnt; i++)
 1601              		.loc 1 628 2 is_stmt 1 view .LVU535
ARM GAS  /tmp/ccYLmkow.s 			page 45


 1602              	.LVL149:
 1603              		.loc 1 628 8 is_stmt 0 view .LVU536
 1604 007e 4FF00009 		mov	r9, #0
 1605              	.LVL150:
 1606              		.loc 1 628 2 view .LVU537
 1607 0082 29E0     		b	.L85
 1608              	.LVL151:
 1609              	.L92:
 615:./Hardware/MQTT/MqttKit.c **** 		return 4;
 1610              		.loc 1 615 3 is_stmt 1 view .LVU538
 1611 0084 2846     		mov	r0, r5
 1612 0086 FFF7FEFF 		bl	MQTT_DeleteBuffer
 1613              	.LVL152:
 616:./Hardware/MQTT/MqttKit.c **** 	}
 1614              		.loc 1 616 3 view .LVU539
 616:./Hardware/MQTT/MqttKit.c **** 	}
 1615              		.loc 1 616 10 is_stmt 0 view .LVU540
 1616 008a 0420     		movs	r0, #4
 1617 008c 29E0     		b	.L81
 1618              	.LVL153:
 1619              	.L86:
 629:./Hardware/MQTT/MqttKit.c **** 	{
 630:./Hardware/MQTT/MqttKit.c **** 		topic_len = strlen(topics[i]);
 1620              		.loc 1 630 3 is_stmt 1 discriminator 3 view .LVU541
 1621              		.loc 1 630 15 is_stmt 0 discriminator 3 view .LVU542
 1622 008e 56F82900 		ldr	r0, [r6, r9, lsl #2]
 1623 0092 FFF7FEFF 		bl	strlen
 1624              	.LVL154:
 1625 0096 0446     		mov	r4, r0
 1626              	.LVL155:
 631:./Hardware/MQTT/MqttKit.c **** 		mqttPacket->_data[mqttPacket->_len++] = MOSQ_MSB(topic_len);
 1627              		.loc 1 631 3 is_stmt 1 discriminator 3 view .LVU543
 1628              		.loc 1 631 13 is_stmt 0 discriminator 3 view .LVU544
 1629 0098 2A68     		ldr	r2, [r5]
 1630              		.loc 1 631 31 discriminator 3 view .LVU545
 1631 009a 6B68     		ldr	r3, [r5, #4]
 1632              		.loc 1 631 37 discriminator 3 view .LVU546
 1633 009c 591C     		adds	r1, r3, #1
 1634 009e 6960     		str	r1, [r5, #4]
 1635              		.loc 1 631 43 discriminator 3 view .LVU547
 1636 00a0 C0F30721 		ubfx	r1, r0, #8, #8
 1637              		.loc 1 631 41 discriminator 3 view .LVU548
 1638 00a4 D154     		strb	r1, [r2, r3]
 632:./Hardware/MQTT/MqttKit.c **** 		mqttPacket->_data[mqttPacket->_len++] = MOSQ_LSB(topic_len);
 1639              		.loc 1 632 3 is_stmt 1 discriminator 3 view .LVU549
 1640              		.loc 1 632 13 is_stmt 0 discriminator 3 view .LVU550
 1641 00a6 2A68     		ldr	r2, [r5]
 1642              		.loc 1 632 31 discriminator 3 view .LVU551
 1643 00a8 6B68     		ldr	r3, [r5, #4]
 1644              		.loc 1 632 37 discriminator 3 view .LVU552
 1645 00aa 591C     		adds	r1, r3, #1
 1646 00ac 6960     		str	r1, [r5, #4]
 1647              		.loc 1 632 41 discriminator 3 view .LVU553
 1648 00ae D054     		strb	r0, [r2, r3]
 633:./Hardware/MQTT/MqttKit.c **** 		
 634:./Hardware/MQTT/MqttKit.c **** 		strncat((int8 *)mqttPacket->_data + mqttPacket->_len, topics[i], topic_len);
 1649              		.loc 1 634 3 is_stmt 1 discriminator 3 view .LVU554
ARM GAS  /tmp/ccYLmkow.s 			page 46


 1650              		.loc 1 634 29 is_stmt 0 discriminator 3 view .LVU555
 1651 00b0 2868     		ldr	r0, [r5]
 1652              	.LVL156:
 1653              		.loc 1 634 49 discriminator 3 view .LVU556
 1654 00b2 6B68     		ldr	r3, [r5, #4]
 1655              		.loc 1 634 3 discriminator 3 view .LVU557
 1656 00b4 2246     		mov	r2, r4
 1657 00b6 56F82910 		ldr	r1, [r6, r9, lsl #2]
 1658 00ba 1844     		add	r0, r0, r3
 1659 00bc FFF7FEFF 		bl	strncat
 1660              	.LVL157:
 635:./Hardware/MQTT/MqttKit.c **** 		mqttPacket->_len += topic_len;
 1661              		.loc 1 635 3 is_stmt 1 discriminator 3 view .LVU558
 1662              		.loc 1 635 20 is_stmt 0 discriminator 3 view .LVU559
 1663 00c0 6868     		ldr	r0, [r5, #4]
 1664 00c2 0444     		add	r4, r4, r0
 1665              	.LVL158:
 1666              		.loc 1 635 20 discriminator 3 view .LVU560
 1667 00c4 6C60     		str	r4, [r5, #4]
 636:./Hardware/MQTT/MqttKit.c **** 		
 637:./Hardware/MQTT/MqttKit.c **** 		mqttPacket->_data[mqttPacket->_len++] = qos & 0xFF;
 1668              		.loc 1 637 3 is_stmt 1 discriminator 3 view .LVU561
 1669              		.loc 1 637 13 is_stmt 0 discriminator 3 view .LVU562
 1670 00c6 2B68     		ldr	r3, [r5]
 1671              		.loc 1 637 37 discriminator 3 view .LVU563
 1672 00c8 621C     		adds	r2, r4, #1
 1673 00ca 6A60     		str	r2, [r5, #4]
 1674              		.loc 1 637 41 discriminator 3 view .LVU564
 1675 00cc 03F80480 		strb	r8, [r3, r4]
 628:./Hardware/MQTT/MqttKit.c **** 	{
 1676              		.loc 1 628 29 is_stmt 1 discriminator 3 view .LVU565
 628:./Hardware/MQTT/MqttKit.c **** 	{
 1677              		.loc 1 628 30 is_stmt 0 discriminator 3 view .LVU566
 1678 00d0 09F10109 		add	r9, r9, #1
 1679              	.LVL159:
 628:./Hardware/MQTT/MqttKit.c **** 	{
 1680              		.loc 1 628 30 discriminator 3 view .LVU567
 1681 00d4 5FFA89F9 		uxtb	r9, r9
 1682              	.LVL160:
 1683              	.L85:
 628:./Hardware/MQTT/MqttKit.c **** 	{
 1684              		.loc 1 628 13 is_stmt 1 discriminator 1 view .LVU568
 628:./Hardware/MQTT/MqttKit.c **** 	{
 1685              		.loc 1 628 2 is_stmt 0 discriminator 1 view .LVU569
 1686 00d8 B945     		cmp	r9, r7
 1687 00da D8D3     		bcc	.L86
 638:./Hardware/MQTT/MqttKit.c **** 	}
 639:./Hardware/MQTT/MqttKit.c **** 
 640:./Hardware/MQTT/MqttKit.c **** 	return 0;
 1688              		.loc 1 640 9 view .LVU570
 1689 00dc 0020     		movs	r0, #0
 1690 00de 00E0     		b	.L81
 1691              	.LVL161:
 1692              	.L87:
 587:./Hardware/MQTT/MqttKit.c **** 	
 1693              		.loc 1 587 10 view .LVU571
 1694 00e0 0120     		movs	r0, #1
ARM GAS  /tmp/ccYLmkow.s 			page 47


 1695              	.LVL162:
 1696              	.L81:
 641:./Hardware/MQTT/MqttKit.c **** 
 642:./Hardware/MQTT/MqttKit.c **** }
 1697              		.loc 1 642 1 view .LVU572
 1698 00e2 BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 1699              	.LVL163:
 1700              	.L88:
 593:./Hardware/MQTT/MqttKit.c **** 		
 1701              		.loc 1 593 11 view .LVU573
 1702 00e6 0220     		movs	r0, #2
 1703 00e8 FBE7     		b	.L81
 1704              	.LVL164:
 1705              	.L89:
 604:./Hardware/MQTT/MqttKit.c **** 	
 1706              		.loc 1 604 10 view .LVU574
 1707 00ea 0320     		movs	r0, #3
 1708 00ec F9E7     		b	.L81
 1709              		.cfi_endproc
 1710              	.LFE11:
 1712              		.section	.text.MQTT_UnPacketSubscribe,"ax",%progbits
 1713              		.align	1
 1714              		.global	MQTT_UnPacketSubscribe
 1715              		.syntax unified
 1716              		.thumb
 1717              		.thumb_func
 1718              		.fpu softvfp
 1720              	MQTT_UnPacketSubscribe:
 1721              	.LVL165:
 1722              	.LFB12:
 643:./Hardware/MQTT/MqttKit.c **** 
 644:./Hardware/MQTT/MqttKit.c **** //==========================================================
 645:./Hardware/MQTT/MqttKit.c **** //	函数名称：	MQTT_UnPacketSubscrebe
 646:./Hardware/MQTT/MqttKit.c **** //
 647:./Hardware/MQTT/MqttKit.c **** //	函数功能：	Subscribe的回复消息解包
 648:./Hardware/MQTT/MqttKit.c **** //
 649:./Hardware/MQTT/MqttKit.c **** //	入口参数：	rev_data：接收到的信息
 650:./Hardware/MQTT/MqttKit.c **** //
 651:./Hardware/MQTT/MqttKit.c **** //	返回参数：	0-成功		其他-失败
 652:./Hardware/MQTT/MqttKit.c **** //
 653:./Hardware/MQTT/MqttKit.c **** //	说明：		
 654:./Hardware/MQTT/MqttKit.c **** //==========================================================
 655:./Hardware/MQTT/MqttKit.c **** uint8 MQTT_UnPacketSubscribe(uint8 *rev_data)
 656:./Hardware/MQTT/MqttKit.c **** {
 1723              		.loc 1 656 1 is_stmt 1 view -0
 1724              		.cfi_startproc
 1725              		@ args = 0, pretend = 0, frame = 0
 1726              		@ frame_needed = 0, uses_anonymous_args = 0
 1727              		@ link register save eliminated.
 1728              		.loc 1 656 1 is_stmt 0 view .LVU576
 1729 0000 0346     		mov	r3, r0
 657:./Hardware/MQTT/MqttKit.c **** 	
 658:./Hardware/MQTT/MqttKit.c **** 	uint8 result = 255;
 1730              		.loc 1 658 2 is_stmt 1 view .LVU577
 1731              	.LVL166:
 659:./Hardware/MQTT/MqttKit.c **** 
 660:./Hardware/MQTT/MqttKit.c **** 	if(rev_data[2] == MOSQ_MSB(MQTT_SUBSCRIBE_ID) && rev_data[3] == MOSQ_LSB(MQTT_SUBSCRIBE_ID))
ARM GAS  /tmp/ccYLmkow.s 			page 48


 1732              		.loc 1 660 2 view .LVU578
 1733              		.loc 1 660 13 is_stmt 0 view .LVU579
 1734 0002 8078     		ldrb	r0, [r0, #2]	@ zero_extendqisi2
 1735              	.LVL167:
 1736              		.loc 1 660 4 view .LVU580
 1737 0004 58B9     		cbnz	r0, .L95
 1738              		.loc 1 660 59 discriminator 1 view .LVU581
 1739 0006 DA78     		ldrb	r2, [r3, #3]	@ zero_extendqisi2
 1740              		.loc 1 660 48 discriminator 1 view .LVU582
 1741 0008 142A     		cmp	r2, #20
 1742 000a 01D0     		beq	.L98
 658:./Hardware/MQTT/MqttKit.c **** 
 1743              		.loc 1 658 8 view .LVU583
 1744 000c FF20     		movs	r0, #255
 1745 000e 7047     		bx	lr
 1746              	.L98:
 661:./Hardware/MQTT/MqttKit.c **** 	{
 662:./Hardware/MQTT/MqttKit.c **** 		switch(rev_data[4])
 1747              		.loc 1 662 3 is_stmt 1 view .LVU584
 1748              		.loc 1 662 18 is_stmt 0 view .LVU585
 1749 0010 1B79     		ldrb	r3, [r3, #4]	@ zero_extendqisi2
 1750              	.LVL168:
 1751              		.loc 1 662 3 view .LVU586
 1752 0012 022B     		cmp	r3, #2
 1753 0014 06D9     		bls	.L94
 1754 0016 802B     		cmp	r3, #128
 1755 0018 03D1     		bne	.L97
 663:./Hardware/MQTT/MqttKit.c **** 		{
 664:./Hardware/MQTT/MqttKit.c **** 			case 0x00:
 665:./Hardware/MQTT/MqttKit.c **** 			case 0x01:
 666:./Hardware/MQTT/MqttKit.c **** 			case 0x02:
 667:./Hardware/MQTT/MqttKit.c **** 				//MQTT Subscribe OK
 668:./Hardware/MQTT/MqttKit.c **** 				result = 0;
 669:./Hardware/MQTT/MqttKit.c **** 			break;
 670:./Hardware/MQTT/MqttKit.c **** 			
 671:./Hardware/MQTT/MqttKit.c **** 			case 0x80:
 672:./Hardware/MQTT/MqttKit.c **** 				//MQTT Subscribe Failed
 673:./Hardware/MQTT/MqttKit.c **** 				result = 1;
 1756              		.loc 1 673 12 view .LVU587
 1757 001a 0120     		movs	r0, #1
 1758 001c 7047     		bx	lr
 1759              	.LVL169:
 1760              	.L95:
 658:./Hardware/MQTT/MqttKit.c **** 
 1761              		.loc 1 658 8 view .LVU588
 1762 001e FF20     		movs	r0, #255
 1763 0020 7047     		bx	lr
 1764              	.LVL170:
 1765              	.L97:
 674:./Hardware/MQTT/MqttKit.c **** 			break;
 675:./Hardware/MQTT/MqttKit.c **** 			
 676:./Hardware/MQTT/MqttKit.c **** 			default:
 677:./Hardware/MQTT/MqttKit.c **** 				//MQTT Subscribe UnKnown Err
 678:./Hardware/MQTT/MqttKit.c **** 				result = 2;
 1766              		.loc 1 678 12 view .LVU589
 1767 0022 0220     		movs	r0, #2
 1768              	.L94:
ARM GAS  /tmp/ccYLmkow.s 			page 49


 1769              	.LVL171:
 679:./Hardware/MQTT/MqttKit.c **** 			break;
 680:./Hardware/MQTT/MqttKit.c **** 		}
 681:./Hardware/MQTT/MqttKit.c **** 	}
 682:./Hardware/MQTT/MqttKit.c **** 	
 683:./Hardware/MQTT/MqttKit.c **** 	return result;
 1770              		.loc 1 683 2 is_stmt 1 view .LVU590
 684:./Hardware/MQTT/MqttKit.c **** 
 685:./Hardware/MQTT/MqttKit.c **** }
 1771              		.loc 1 685 1 is_stmt 0 view .LVU591
 1772 0024 7047     		bx	lr
 1773              		.cfi_endproc
 1774              	.LFE12:
 1776              		.section	.text.MQTT_PacketUnSubscribe,"ax",%progbits
 1777              		.align	1
 1778              		.global	MQTT_PacketUnSubscribe
 1779              		.syntax unified
 1780              		.thumb
 1781              		.thumb_func
 1782              		.fpu softvfp
 1784              	MQTT_PacketUnSubscribe:
 1785              	.LVL172:
 1786              	.LFB13:
 686:./Hardware/MQTT/MqttKit.c **** 
 687:./Hardware/MQTT/MqttKit.c **** //==========================================================
 688:./Hardware/MQTT/MqttKit.c **** //	函数名称：	MQTT_PacketUnSubscribe
 689:./Hardware/MQTT/MqttKit.c **** //
 690:./Hardware/MQTT/MqttKit.c **** //	函数功能：	UnSubscribe消息组包
 691:./Hardware/MQTT/MqttKit.c **** //
 692:./Hardware/MQTT/MqttKit.c **** //	入口参数：	pkt_id：pkt_id
 693:./Hardware/MQTT/MqttKit.c **** //				qos：消息重发次数
 694:./Hardware/MQTT/MqttKit.c **** //				topics：订阅的消息
 695:./Hardware/MQTT/MqttKit.c **** //				topics_cnt：订阅的消息个数
 696:./Hardware/MQTT/MqttKit.c **** //				mqttPacket：包指针
 697:./Hardware/MQTT/MqttKit.c **** //
 698:./Hardware/MQTT/MqttKit.c **** //	返回参数：	0-成功		其他-失败
 699:./Hardware/MQTT/MqttKit.c **** //
 700:./Hardware/MQTT/MqttKit.c **** //	说明：		
 701:./Hardware/MQTT/MqttKit.c **** //==========================================================
 702:./Hardware/MQTT/MqttKit.c **** uint8 MQTT_PacketUnSubscribe(uint16 pkt_id, const int8 *topics[], uint8 topics_cnt, MQTT_PACKET_STR
 703:./Hardware/MQTT/MqttKit.c **** {
 1787              		.loc 1 703 1 is_stmt 1 view -0
 1788              		.cfi_startproc
 1789              		@ args = 0, pretend = 0, frame = 0
 1790              		@ frame_needed = 0, uses_anonymous_args = 0
 704:./Hardware/MQTT/MqttKit.c **** 	
 705:./Hardware/MQTT/MqttKit.c **** 	uint32 topic_len = 0, remain_len = 0;
 1791              		.loc 1 705 2 view .LVU593
 706:./Hardware/MQTT/MqttKit.c **** 	int16 len = 0;
 1792              		.loc 1 706 2 view .LVU594
 707:./Hardware/MQTT/MqttKit.c **** 	uint8 i = 0;
 1793              		.loc 1 707 2 view .LVU595
 708:./Hardware/MQTT/MqttKit.c **** 	
 709:./Hardware/MQTT/MqttKit.c **** 	if(pkt_id == 0)
 1794              		.loc 1 709 2 view .LVU596
 1795              		.loc 1 709 4 is_stmt 0 view .LVU597
 1796 0000 0028     		cmp	r0, #0
ARM GAS  /tmp/ccYLmkow.s 			page 50


 1797 0002 63D0     		beq	.L106
 703:./Hardware/MQTT/MqttKit.c **** 	
 1798              		.loc 1 703 1 view .LVU598
 1799 0004 2DE9F843 		push	{r3, r4, r5, r6, r7, r8, r9, lr}
 1800              	.LCFI18:
 1801              		.cfi_def_cfa_offset 32
 1802              		.cfi_offset 3, -32
 1803              		.cfi_offset 4, -28
 1804              		.cfi_offset 5, -24
 1805              		.cfi_offset 6, -20
 1806              		.cfi_offset 7, -16
 1807              		.cfi_offset 8, -12
 1808              		.cfi_offset 9, -8
 1809              		.cfi_offset 14, -4
 1810 0008 0F46     		mov	r7, r1
 1811 000a 9046     		mov	r8, r2
 1812 000c 1D46     		mov	r5, r3
 1813 000e 8146     		mov	r9, r0
 707:./Hardware/MQTT/MqttKit.c **** 	uint8 i = 0;
 1814              		.loc 1 707 8 view .LVU599
 1815 0010 0024     		movs	r4, #0
 705:./Hardware/MQTT/MqttKit.c **** 	int16 len = 0;
 1816              		.loc 1 705 9 view .LVU600
 1817 0012 2646     		mov	r6, r4
 1818              	.LVL173:
 1819              	.L101:
 710:./Hardware/MQTT/MqttKit.c **** 		return 1;
 711:./Hardware/MQTT/MqttKit.c **** 	
 712:./Hardware/MQTT/MqttKit.c **** 	//计算topic长度-------------------------------------------------------------------------
 713:./Hardware/MQTT/MqttKit.c **** 	for(; i < topics_cnt; i++)
 1820              		.loc 1 713 8 is_stmt 1 discriminator 1 view .LVU601
 1821              		.loc 1 713 2 is_stmt 0 discriminator 1 view .LVU602
 1822 0014 4445     		cmp	r4, r8
 1823 0016 09D2     		bcs	.L113
 714:./Hardware/MQTT/MqttKit.c **** 	{
 715:./Hardware/MQTT/MqttKit.c **** 		if(topics[i] == NULL)
 1824              		.loc 1 715 3 is_stmt 1 view .LVU603
 1825              		.loc 1 715 12 is_stmt 0 view .LVU604
 1826 0018 57F82400 		ldr	r0, [r7, r4, lsl #2]
 1827              		.loc 1 715 5 view .LVU605
 1828 001c 0028     		cmp	r0, #0
 1829 001e 57D0     		beq	.L107
 716:./Hardware/MQTT/MqttKit.c **** 			return 2;
 717:./Hardware/MQTT/MqttKit.c **** 		
 718:./Hardware/MQTT/MqttKit.c **** 		topic_len += strlen(topics[i]);
 1830              		.loc 1 718 3 is_stmt 1 view .LVU606
 1831              		.loc 1 718 16 is_stmt 0 view .LVU607
 1832 0020 FFF7FEFF 		bl	strlen
 1833              	.LVL174:
 1834              		.loc 1 718 13 view .LVU608
 1835 0024 0644     		add	r6, r6, r0
 1836              	.LVL175:
 713:./Hardware/MQTT/MqttKit.c **** 	{
 1837              		.loc 1 713 24 is_stmt 1 view .LVU609
 713:./Hardware/MQTT/MqttKit.c **** 	{
 1838              		.loc 1 713 25 is_stmt 0 view .LVU610
 1839 0026 0134     		adds	r4, r4, #1
ARM GAS  /tmp/ccYLmkow.s 			page 51


 1840              	.LVL176:
 713:./Hardware/MQTT/MqttKit.c **** 	{
 1841              		.loc 1 713 25 view .LVU611
 1842 0028 E4B2     		uxtb	r4, r4
 1843              	.LVL177:
 713:./Hardware/MQTT/MqttKit.c **** 	{
 1844              		.loc 1 713 25 view .LVU612
 1845 002a F3E7     		b	.L101
 1846              	.L113:
 719:./Hardware/MQTT/MqttKit.c **** 	}
 720:./Hardware/MQTT/MqttKit.c **** 	
 721:./Hardware/MQTT/MqttKit.c **** 	//2 bytes packet id, 2 bytes topic length + topic + 1 byte reserve---------------------
 722:./Hardware/MQTT/MqttKit.c **** 	remain_len = 2 + (topics_cnt << 1) + topic_len;
 1847              		.loc 1 722 2 is_stmt 1 view .LVU613
 1848              		.loc 1 722 37 is_stmt 0 view .LVU614
 1849 002c 06EB4801 		add	r1, r6, r8, lsl #1
 1850              		.loc 1 722 13 view .LVU615
 1851 0030 8C1C     		adds	r4, r1, #2
 1852              	.LVL178:
 723:./Hardware/MQTT/MqttKit.c **** 	
 724:./Hardware/MQTT/MqttKit.c **** 	//分配内存------------------------------------------------------------------------------
 725:./Hardware/MQTT/MqttKit.c **** 	MQTT_NewBuffer(mqttPacket, remain_len + 5);
 1853              		.loc 1 725 2 is_stmt 1 view .LVU616
 1854 0032 0731     		adds	r1, r1, #7
 1855 0034 2846     		mov	r0, r5
 1856 0036 FFF7FEFF 		bl	MQTT_NewBuffer
 1857              	.LVL179:
 726:./Hardware/MQTT/MqttKit.c **** 	if(mqttPacket->_data == NULL)
 1858              		.loc 1 726 2 view .LVU617
 1859              		.loc 1 726 15 is_stmt 0 view .LVU618
 1860 003a 2B68     		ldr	r3, [r5]
 1861              		.loc 1 726 4 view .LVU619
 1862 003c 002B     		cmp	r3, #0
 1863 003e 4AD0     		beq	.L108
 727:./Hardware/MQTT/MqttKit.c **** 		return 3;
 728:./Hardware/MQTT/MqttKit.c **** 	
 729:./Hardware/MQTT/MqttKit.c **** /*************************************固定头部***********************************************/
 730:./Hardware/MQTT/MqttKit.c **** 	
 731:./Hardware/MQTT/MqttKit.c **** 	//固定头部----------------------头部消息-------------------------------------------------
 732:./Hardware/MQTT/MqttKit.c **** 	mqttPacket->_data[mqttPacket->_len++] = MQTT_PKT_UNSUBSCRIBE << 4 | 0x02;
 1864              		.loc 1 732 2 is_stmt 1 view .LVU620
 1865              		.loc 1 732 30 is_stmt 0 view .LVU621
 1866 0040 6A68     		ldr	r2, [r5, #4]
 1867              		.loc 1 732 36 view .LVU622
 1868 0042 511C     		adds	r1, r2, #1
 1869 0044 6960     		str	r1, [r5, #4]
 1870              		.loc 1 732 40 view .LVU623
 1871 0046 A221     		movs	r1, #162
 1872 0048 9954     		strb	r1, [r3, r2]
 733:./Hardware/MQTT/MqttKit.c **** 	
 734:./Hardware/MQTT/MqttKit.c **** 	//固定头部----------------------剩余长度值-----------------------------------------------
 735:./Hardware/MQTT/MqttKit.c **** 	len = MQTT_DumpLength(remain_len, mqttPacket->_data + mqttPacket->_len);
 1873              		.loc 1 735 2 is_stmt 1 view .LVU624
 1874              		.loc 1 735 46 is_stmt 0 view .LVU625
 1875 004a 2968     		ldr	r1, [r5]
 1876              		.loc 1 735 66 view .LVU626
 1877 004c 6B68     		ldr	r3, [r5, #4]
ARM GAS  /tmp/ccYLmkow.s 			page 52


 1878              		.loc 1 735 8 view .LVU627
 1879 004e 1944     		add	r1, r1, r3
 1880 0050 2046     		mov	r0, r4
 1881 0052 FFF7FEFF 		bl	MQTT_DumpLength
 1882              	.LVL180:
 1883              		.loc 1 735 6 view .LVU628
 1884 0056 03B2     		sxth	r3, r0
 1885              	.LVL181:
 736:./Hardware/MQTT/MqttKit.c **** 	if(len < 0)
 1886              		.loc 1 736 2 is_stmt 1 view .LVU629
 1887              		.loc 1 736 4 is_stmt 0 view .LVU630
 1888 0058 002B     		cmp	r3, #0
 1889 005a 10DB     		blt	.L114
 737:./Hardware/MQTT/MqttKit.c **** 	{
 738:./Hardware/MQTT/MqttKit.c **** 		MQTT_DeleteBuffer(mqttPacket);
 739:./Hardware/MQTT/MqttKit.c **** 		return 4;
 740:./Hardware/MQTT/MqttKit.c **** 	}
 741:./Hardware/MQTT/MqttKit.c **** 	else
 742:./Hardware/MQTT/MqttKit.c **** 		mqttPacket->_len += len;
 1890              		.loc 1 742 3 is_stmt 1 view .LVU631
 1891              		.loc 1 742 20 is_stmt 0 view .LVU632
 1892 005c 6A68     		ldr	r2, [r5, #4]
 1893 005e 1344     		add	r3, r3, r2
 1894              	.LVL182:
 1895              		.loc 1 742 20 view .LVU633
 1896 0060 6B60     		str	r3, [r5, #4]
 743:./Hardware/MQTT/MqttKit.c **** 	
 744:./Hardware/MQTT/MqttKit.c **** /*************************************payload***********************************************/
 745:./Hardware/MQTT/MqttKit.c **** 	
 746:./Hardware/MQTT/MqttKit.c **** 	//payload----------------------pkt_id---------------------------------------------------
 747:./Hardware/MQTT/MqttKit.c **** 	mqttPacket->_data[mqttPacket->_len++] = MOSQ_MSB(pkt_id);
 1897              		.loc 1 747 2 is_stmt 1 view .LVU634
 1898              		.loc 1 747 12 is_stmt 0 view .LVU635
 1899 0062 2A68     		ldr	r2, [r5]
 1900              		.loc 1 747 36 view .LVU636
 1901 0064 591C     		adds	r1, r3, #1
 1902 0066 6960     		str	r1, [r5, #4]
 1903              		.loc 1 747 42 view .LVU637
 1904 0068 4FEA1921 		lsr	r1, r9, #8
 1905              		.loc 1 747 40 view .LVU638
 1906 006c D154     		strb	r1, [r2, r3]
 748:./Hardware/MQTT/MqttKit.c **** 	mqttPacket->_data[mqttPacket->_len++] = MOSQ_LSB(pkt_id);
 1907              		.loc 1 748 2 is_stmt 1 view .LVU639
 1908              		.loc 1 748 12 is_stmt 0 view .LVU640
 1909 006e 2A68     		ldr	r2, [r5]
 1910              		.loc 1 748 30 view .LVU641
 1911 0070 6B68     		ldr	r3, [r5, #4]
 1912              		.loc 1 748 36 view .LVU642
 1913 0072 591C     		adds	r1, r3, #1
 1914 0074 6960     		str	r1, [r5, #4]
 1915              		.loc 1 748 40 view .LVU643
 1916 0076 02F80390 		strb	r9, [r2, r3]
 749:./Hardware/MQTT/MqttKit.c **** 	
 750:./Hardware/MQTT/MqttKit.c **** 	//payload----------------------topic_name-----------------------------------------------
 751:./Hardware/MQTT/MqttKit.c **** 	for(i = 0; i < topics_cnt; i++)
 1917              		.loc 1 751 2 is_stmt 1 view .LVU644
 1918              	.LVL183:
ARM GAS  /tmp/ccYLmkow.s 			page 53


 1919              		.loc 1 751 8 is_stmt 0 view .LVU645
 1920 007a 0024     		movs	r4, #0
 1921              	.LVL184:
 1922              		.loc 1 751 2 view .LVU646
 1923 007c 22E0     		b	.L104
 1924              	.LVL185:
 1925              	.L114:
 738:./Hardware/MQTT/MqttKit.c **** 		return 4;
 1926              		.loc 1 738 3 is_stmt 1 view .LVU647
 1927 007e 2846     		mov	r0, r5
 1928 0080 FFF7FEFF 		bl	MQTT_DeleteBuffer
 1929              	.LVL186:
 739:./Hardware/MQTT/MqttKit.c **** 	}
 1930              		.loc 1 739 3 view .LVU648
 739:./Hardware/MQTT/MqttKit.c **** 	}
 1931              		.loc 1 739 10 is_stmt 0 view .LVU649
 1932 0084 0420     		movs	r0, #4
 1933 0086 24E0     		b	.L100
 1934              	.LVL187:
 1935              	.L105:
 752:./Hardware/MQTT/MqttKit.c **** 	{
 753:./Hardware/MQTT/MqttKit.c **** 		topic_len = strlen(topics[i]);
 1936              		.loc 1 753 3 is_stmt 1 discriminator 3 view .LVU650
 1937              		.loc 1 753 15 is_stmt 0 discriminator 3 view .LVU651
 1938 0088 57F82400 		ldr	r0, [r7, r4, lsl #2]
 1939 008c FFF7FEFF 		bl	strlen
 1940              	.LVL188:
 1941 0090 0646     		mov	r6, r0
 1942              	.LVL189:
 754:./Hardware/MQTT/MqttKit.c **** 		mqttPacket->_data[mqttPacket->_len++] = MOSQ_MSB(topic_len);
 1943              		.loc 1 754 3 is_stmt 1 discriminator 3 view .LVU652
 1944              		.loc 1 754 13 is_stmt 0 discriminator 3 view .LVU653
 1945 0092 2A68     		ldr	r2, [r5]
 1946              		.loc 1 754 31 discriminator 3 view .LVU654
 1947 0094 6B68     		ldr	r3, [r5, #4]
 1948              		.loc 1 754 37 discriminator 3 view .LVU655
 1949 0096 591C     		adds	r1, r3, #1
 1950 0098 6960     		str	r1, [r5, #4]
 1951              		.loc 1 754 43 discriminator 3 view .LVU656
 1952 009a C0F30721 		ubfx	r1, r0, #8, #8
 1953              		.loc 1 754 41 discriminator 3 view .LVU657
 1954 009e D154     		strb	r1, [r2, r3]
 755:./Hardware/MQTT/MqttKit.c **** 		mqttPacket->_data[mqttPacket->_len++] = MOSQ_LSB(topic_len);
 1955              		.loc 1 755 3 is_stmt 1 discriminator 3 view .LVU658
 1956              		.loc 1 755 13 is_stmt 0 discriminator 3 view .LVU659
 1957 00a0 2A68     		ldr	r2, [r5]
 1958              		.loc 1 755 31 discriminator 3 view .LVU660
 1959 00a2 6B68     		ldr	r3, [r5, #4]
 1960              		.loc 1 755 37 discriminator 3 view .LVU661
 1961 00a4 591C     		adds	r1, r3, #1
 1962 00a6 6960     		str	r1, [r5, #4]
 1963              		.loc 1 755 41 discriminator 3 view .LVU662
 1964 00a8 D054     		strb	r0, [r2, r3]
 756:./Hardware/MQTT/MqttKit.c **** 		
 757:./Hardware/MQTT/MqttKit.c **** 		strncat((int8 *)mqttPacket->_data + mqttPacket->_len, topics[i], topic_len);
 1965              		.loc 1 757 3 is_stmt 1 discriminator 3 view .LVU663
 1966              		.loc 1 757 29 is_stmt 0 discriminator 3 view .LVU664
ARM GAS  /tmp/ccYLmkow.s 			page 54


 1967 00aa 2868     		ldr	r0, [r5]
 1968              	.LVL190:
 1969              		.loc 1 757 49 discriminator 3 view .LVU665
 1970 00ac 6B68     		ldr	r3, [r5, #4]
 1971              		.loc 1 757 3 discriminator 3 view .LVU666
 1972 00ae 3246     		mov	r2, r6
 1973 00b0 57F82410 		ldr	r1, [r7, r4, lsl #2]
 1974 00b4 1844     		add	r0, r0, r3
 1975 00b6 FFF7FEFF 		bl	strncat
 1976              	.LVL191:
 758:./Hardware/MQTT/MqttKit.c **** 		mqttPacket->_len += topic_len;
 1977              		.loc 1 758 3 is_stmt 1 discriminator 3 view .LVU667
 1978              		.loc 1 758 20 is_stmt 0 discriminator 3 view .LVU668
 1979 00ba 6868     		ldr	r0, [r5, #4]
 1980 00bc 3044     		add	r0, r0, r6
 1981 00be 6860     		str	r0, [r5, #4]
 751:./Hardware/MQTT/MqttKit.c **** 	{
 1982              		.loc 1 751 29 is_stmt 1 discriminator 3 view .LVU669
 751:./Hardware/MQTT/MqttKit.c **** 	{
 1983              		.loc 1 751 30 is_stmt 0 discriminator 3 view .LVU670
 1984 00c0 0134     		adds	r4, r4, #1
 1985              	.LVL192:
 751:./Hardware/MQTT/MqttKit.c **** 	{
 1986              		.loc 1 751 30 discriminator 3 view .LVU671
 1987 00c2 E4B2     		uxtb	r4, r4
 1988              	.LVL193:
 1989              	.L104:
 751:./Hardware/MQTT/MqttKit.c **** 	{
 1990              		.loc 1 751 13 is_stmt 1 discriminator 1 view .LVU672
 751:./Hardware/MQTT/MqttKit.c **** 	{
 1991              		.loc 1 751 2 is_stmt 0 discriminator 1 view .LVU673
 1992 00c4 4445     		cmp	r4, r8
 1993 00c6 DFD3     		bcc	.L105
 759:./Hardware/MQTT/MqttKit.c **** 	}
 760:./Hardware/MQTT/MqttKit.c **** 
 761:./Hardware/MQTT/MqttKit.c **** 	return 0;
 1994              		.loc 1 761 9 view .LVU674
 1995 00c8 0020     		movs	r0, #0
 1996 00ca 02E0     		b	.L100
 1997              	.LVL194:
 1998              	.L106:
 1999              	.LCFI19:
 2000              		.cfi_def_cfa_offset 0
 2001              		.cfi_restore 3
 2002              		.cfi_restore 4
 2003              		.cfi_restore 5
 2004              		.cfi_restore 6
 2005              		.cfi_restore 7
 2006              		.cfi_restore 8
 2007              		.cfi_restore 9
 2008              		.cfi_restore 14
 710:./Hardware/MQTT/MqttKit.c **** 	
 2009              		.loc 1 710 10 view .LVU675
 2010 00cc 0120     		movs	r0, #1
 2011              	.LVL195:
 762:./Hardware/MQTT/MqttKit.c **** 
 763:./Hardware/MQTT/MqttKit.c **** }
ARM GAS  /tmp/ccYLmkow.s 			page 55


 2012              		.loc 1 763 1 view .LVU676
 2013 00ce 7047     		bx	lr
 2014              	.LVL196:
 2015              	.L107:
 2016              	.LCFI20:
 2017              		.cfi_def_cfa_offset 32
 2018              		.cfi_offset 3, -32
 2019              		.cfi_offset 4, -28
 2020              		.cfi_offset 5, -24
 2021              		.cfi_offset 6, -20
 2022              		.cfi_offset 7, -16
 2023              		.cfi_offset 8, -12
 2024              		.cfi_offset 9, -8
 2025              		.cfi_offset 14, -4
 716:./Hardware/MQTT/MqttKit.c **** 		
 2026              		.loc 1 716 11 view .LVU677
 2027 00d0 0220     		movs	r0, #2
 2028              	.LVL197:
 2029              	.L100:
 2030              		.loc 1 763 1 view .LVU678
 2031 00d2 BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 2032              	.LVL198:
 2033              	.L108:
 727:./Hardware/MQTT/MqttKit.c **** 	
 2034              		.loc 1 727 10 view .LVU679
 2035 00d6 0320     		movs	r0, #3
 2036 00d8 FBE7     		b	.L100
 2037              		.cfi_endproc
 2038              	.LFE13:
 2040              		.section	.text.MQTT_UnPacketUnSubscribe,"ax",%progbits
 2041              		.align	1
 2042              		.global	MQTT_UnPacketUnSubscribe
 2043              		.syntax unified
 2044              		.thumb
 2045              		.thumb_func
 2046              		.fpu softvfp
 2048              	MQTT_UnPacketUnSubscribe:
 2049              	.LVL199:
 2050              	.LFB14:
 764:./Hardware/MQTT/MqttKit.c **** 
 765:./Hardware/MQTT/MqttKit.c **** //==========================================================
 766:./Hardware/MQTT/MqttKit.c **** //	函数名称：	MQTT_UnPacketUnSubscribe
 767:./Hardware/MQTT/MqttKit.c **** //
 768:./Hardware/MQTT/MqttKit.c **** //	函数功能：	UnSubscribe的回复消息解包
 769:./Hardware/MQTT/MqttKit.c **** //
 770:./Hardware/MQTT/MqttKit.c **** //	入口参数：	rev_data：接收到的信息
 771:./Hardware/MQTT/MqttKit.c **** //
 772:./Hardware/MQTT/MqttKit.c **** //	返回参数：	0-成功		其他-失败
 773:./Hardware/MQTT/MqttKit.c **** //
 774:./Hardware/MQTT/MqttKit.c **** //	说明：		
 775:./Hardware/MQTT/MqttKit.c **** //==========================================================
 776:./Hardware/MQTT/MqttKit.c **** uint1 MQTT_UnPacketUnSubscribe(uint8 *rev_data)
 777:./Hardware/MQTT/MqttKit.c **** {
 2051              		.loc 1 777 1 is_stmt 1 view -0
 2052              		.cfi_startproc
 2053              		@ args = 0, pretend = 0, frame = 0
 2054              		@ frame_needed = 0, uses_anonymous_args = 0
ARM GAS  /tmp/ccYLmkow.s 			page 56


 2055              		@ link register save eliminated.
 778:./Hardware/MQTT/MqttKit.c **** 	
 779:./Hardware/MQTT/MqttKit.c **** 	uint1 result = 1;
 2056              		.loc 1 779 2 view .LVU681
 780:./Hardware/MQTT/MqttKit.c **** 
 781:./Hardware/MQTT/MqttKit.c **** 	if(rev_data[2] == MOSQ_MSB(MQTT_UNSUBSCRIBE_ID) && rev_data[3] == MOSQ_LSB(MQTT_UNSUBSCRIBE_ID))
 2057              		.loc 1 781 2 view .LVU682
 2058              		.loc 1 781 13 is_stmt 0 view .LVU683
 2059 0000 8378     		ldrb	r3, [r0, #2]	@ zero_extendqisi2
 2060              		.loc 1 781 4 view .LVU684
 2061 0002 23B9     		cbnz	r3, .L117
 2062              		.loc 1 781 61 discriminator 1 view .LVU685
 2063 0004 C378     		ldrb	r3, [r0, #3]	@ zero_extendqisi2
 2064              		.loc 1 781 50 discriminator 1 view .LVU686
 2065 0006 1E2B     		cmp	r3, #30
 2066 0008 03D0     		beq	.L118
 779:./Hardware/MQTT/MqttKit.c **** 
 2067              		.loc 1 779 8 view .LVU687
 2068 000a 0120     		movs	r0, #1
 2069              	.LVL200:
 779:./Hardware/MQTT/MqttKit.c **** 
 2070              		.loc 1 779 8 view .LVU688
 2071 000c 7047     		bx	lr
 2072              	.LVL201:
 2073              	.L117:
 779:./Hardware/MQTT/MqttKit.c **** 
 2074              		.loc 1 779 8 view .LVU689
 2075 000e 0120     		movs	r0, #1
 2076              	.LVL202:
 779:./Hardware/MQTT/MqttKit.c **** 
 2077              		.loc 1 779 8 view .LVU690
 2078 0010 7047     		bx	lr
 2079              	.LVL203:
 2080              	.L118:
 782:./Hardware/MQTT/MqttKit.c **** 	{
 783:./Hardware/MQTT/MqttKit.c **** 		result = 0;
 2081              		.loc 1 783 10 view .LVU691
 2082 0012 0020     		movs	r0, #0
 2083              	.LVL204:
 784:./Hardware/MQTT/MqttKit.c **** 	}
 785:./Hardware/MQTT/MqttKit.c **** 	
 786:./Hardware/MQTT/MqttKit.c **** 	return result;
 2084              		.loc 1 786 2 is_stmt 1 view .LVU692
 787:./Hardware/MQTT/MqttKit.c **** 
 788:./Hardware/MQTT/MqttKit.c **** }
 2085              		.loc 1 788 1 is_stmt 0 view .LVU693
 2086 0014 7047     		bx	lr
 2087              		.cfi_endproc
 2088              	.LFE14:
 2090              		.section	.text.MQTT_PacketPublish,"ax",%progbits
 2091              		.align	1
 2092              		.global	MQTT_PacketPublish
 2093              		.syntax unified
 2094              		.thumb
 2095              		.thumb_func
 2096              		.fpu softvfp
 2098              	MQTT_PacketPublish:
ARM GAS  /tmp/ccYLmkow.s 			page 57


 2099              	.LVL205:
 2100              	.LFB15:
 789:./Hardware/MQTT/MqttKit.c **** 
 790:./Hardware/MQTT/MqttKit.c **** //==========================================================
 791:./Hardware/MQTT/MqttKit.c **** //	函数名称：	MQTT_PacketPublish
 792:./Hardware/MQTT/MqttKit.c **** //
 793:./Hardware/MQTT/MqttKit.c **** //	函数功能：	Pulish消息组包
 794:./Hardware/MQTT/MqttKit.c **** //
 795:./Hardware/MQTT/MqttKit.c **** //	入口参数：	pkt_id：pkt_id
 796:./Hardware/MQTT/MqttKit.c **** //				topic：发布的topic
 797:./Hardware/MQTT/MqttKit.c **** //				payload：消息体
 798:./Hardware/MQTT/MqttKit.c **** //				payload_len：消息体长度
 799:./Hardware/MQTT/MqttKit.c **** //				qos：重发次数
 800:./Hardware/MQTT/MqttKit.c **** //				retain：离线消息推送
 801:./Hardware/MQTT/MqttKit.c **** //				own：
 802:./Hardware/MQTT/MqttKit.c **** //				mqttPacket：包指针
 803:./Hardware/MQTT/MqttKit.c **** //
 804:./Hardware/MQTT/MqttKit.c **** //	返回参数：	0-成功		其他-失败
 805:./Hardware/MQTT/MqttKit.c **** //
 806:./Hardware/MQTT/MqttKit.c **** //	说明：		
 807:./Hardware/MQTT/MqttKit.c **** //==========================================================
 808:./Hardware/MQTT/MqttKit.c **** uint8 MQTT_PacketPublish(uint16 pkt_id, const int8 *topic,
 809:./Hardware/MQTT/MqttKit.c **** 						const int8 *payload, uint32 payload_len,
 810:./Hardware/MQTT/MqttKit.c **** 						enum MqttQosLevel qos, int32 retain, int32 own,
 811:./Hardware/MQTT/MqttKit.c **** 						MQTT_PACKET_STRUCTURE *mqttPacket)
 812:./Hardware/MQTT/MqttKit.c **** {
 2101              		.loc 1 812 1 is_stmt 1 view -0
 2102              		.cfi_startproc
 2103              		@ args = 16, pretend = 0, frame = 16
 2104              		@ frame_needed = 0, uses_anonymous_args = 0
 2105              		.loc 1 812 1 is_stmt 0 view .LVU695
 2106 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 2107              	.LCFI21:
 2108              		.cfi_def_cfa_offset 36
 2109              		.cfi_offset 4, -36
 2110              		.cfi_offset 5, -32
 2111              		.cfi_offset 6, -28
 2112              		.cfi_offset 7, -24
 2113              		.cfi_offset 8, -20
 2114              		.cfi_offset 9, -16
 2115              		.cfi_offset 10, -12
 2116              		.cfi_offset 11, -8
 2117              		.cfi_offset 14, -4
 2118 0004 85B0     		sub	sp, sp, #20
 2119              	.LCFI22:
 2120              		.cfi_def_cfa_offset 56
 2121 0006 0192     		str	r2, [sp, #4]
 2122 0008 9DF83880 		ldrb	r8, [sp, #56]	@ zero_extendqisi2
 2123 000c 119F     		ldr	r7, [sp, #68]
 813:./Hardware/MQTT/MqttKit.c **** 
 814:./Hardware/MQTT/MqttKit.c **** 	uint32 total_len = 0, topic_len = 0;
 2124              		.loc 1 814 2 is_stmt 1 view .LVU696
 2125              	.LVL206:
 815:./Hardware/MQTT/MqttKit.c **** 	int32 len = 0;
 2126              		.loc 1 815 2 view .LVU697
 816:./Hardware/MQTT/MqttKit.c **** 	uint8 flags = 0;
 2127              		.loc 1 816 2 view .LVU698
ARM GAS  /tmp/ccYLmkow.s 			page 58


 817:./Hardware/MQTT/MqttKit.c **** 	
 818:./Hardware/MQTT/MqttKit.c **** 	//pkt_id检查----------------------------------------------------------------------------
 819:./Hardware/MQTT/MqttKit.c **** 	if(pkt_id == 0)
 2128              		.loc 1 819 2 view .LVU699
 2129              		.loc 1 819 4 is_stmt 0 view .LVU700
 2130 000e 0290     		str	r0, [sp, #8]
 2131 0010 0028     		cmp	r0, #0
 2132 0012 7ED0     		beq	.L129
 2133 0014 0E46     		mov	r6, r1
 2134 0016 9B46     		mov	fp, r3
 820:./Hardware/MQTT/MqttKit.c **** 		return 1;
 821:./Hardware/MQTT/MqttKit.c **** 	
 822:./Hardware/MQTT/MqttKit.c **** 	//$dp为系统上传数据点的指令------------------------------------------------------------
 823:./Hardware/MQTT/MqttKit.c **** 	for(topic_len = 0; topic[topic_len] != '\0'; ++topic_len)
 2135              		.loc 1 823 16 view .LVU701
 2136 0018 0025     		movs	r5, #0
 2137 001a 00E0     		b	.L121
 2138              	.LVL207:
 2139              	.L136:
 2140              		.loc 1 823 47 is_stmt 1 discriminator 2 view .LVU702
 2141 001c 0135     		adds	r5, r5, #1
 2142              	.LVL208:
 2143              	.L121:
 2144              		.loc 1 823 21 discriminator 1 view .LVU703
 2145              		.loc 1 823 26 is_stmt 0 discriminator 1 view .LVU704
 2146 001e 745D     		ldrb	r4, [r6, r5]	@ zero_extendqisi2
 2147              		.loc 1 823 2 discriminator 1 view .LVU705
 2148 0020 2CB1     		cbz	r4, .L135
 824:./Hardware/MQTT/MqttKit.c **** 	{
 825:./Hardware/MQTT/MqttKit.c **** 		if((topic[topic_len] == '#') || (topic[topic_len] == '+'))
 2149              		.loc 1 825 3 is_stmt 1 view .LVU706
 2150              		.loc 1 825 5 is_stmt 0 view .LVU707
 2151 0022 232C     		cmp	r4, #35
 2152 0024 7AD0     		beq	.L130
 2153              		.loc 1 825 32 discriminator 1 view .LVU708
 2154 0026 2B2C     		cmp	r4, #43
 2155 0028 F8D1     		bne	.L136
 826:./Hardware/MQTT/MqttKit.c **** 			return 2;
 2156              		.loc 1 826 11 view .LVU709
 2157 002a 0224     		movs	r4, #2
 2158 002c 72E0     		b	.L120
 2159              	.L135:
 827:./Hardware/MQTT/MqttKit.c **** 	}
 828:./Hardware/MQTT/MqttKit.c **** 	
 829:./Hardware/MQTT/MqttKit.c **** 	//Publish消息---------------------------------------------------------------------------
 830:./Hardware/MQTT/MqttKit.c **** 	flags |= MQTT_PKT_PUBLISH << 4;
 2160              		.loc 1 830 2 is_stmt 1 view .LVU710
 2161              	.LVL209:
 831:./Hardware/MQTT/MqttKit.c **** 	
 832:./Hardware/MQTT/MqttKit.c **** 	//retain标志----------------------------------------------------------------------------
 833:./Hardware/MQTT/MqttKit.c **** 	if(retain)
 2162              		.loc 1 833 2 view .LVU711
 2163              		.loc 1 833 4 is_stmt 0 view .LVU712
 2164 002e 0F9B     		ldr	r3, [sp, #60]
 2165              	.LVL210:
 2166              		.loc 1 833 4 view .LVU713
 2167 0030 83B9     		cbnz	r3, .L132
ARM GAS  /tmp/ccYLmkow.s 			page 59


 830:./Hardware/MQTT/MqttKit.c **** 	
 2168              		.loc 1 830 8 view .LVU714
 2169 0032 4FF0300A 		mov	r10, #48
 2170              	.L123:
 2171              	.LVL211:
 834:./Hardware/MQTT/MqttKit.c **** 		flags |= 0x01;
 835:./Hardware/MQTT/MqttKit.c **** 	
 836:./Hardware/MQTT/MqttKit.c **** 	//总长度--------------------------------------------------------------------------------
 837:./Hardware/MQTT/MqttKit.c **** 	total_len = topic_len + payload_len + 2;
 2172              		.loc 1 837 2 is_stmt 1 view .LVU715
 2173              		.loc 1 837 24 is_stmt 0 view .LVU716
 2174 0036 05EB0B03 		add	r3, r5, fp
 2175              		.loc 1 837 12 view .LVU717
 2176 003a 03F10209 		add	r9, r3, #2
 2177              	.LVL212:
 838:./Hardware/MQTT/MqttKit.c **** 	
 839:./Hardware/MQTT/MqttKit.c **** 	//qos级别--主要用于PUBLISH（发布态）消息的，保证消息传递的次数------------
 840:./Hardware/MQTT/MqttKit.c **** 	switch(qos)
 2178              		.loc 1 840 2 is_stmt 1 view .LVU718
 2179 003e B8F1010F 		cmp	r8, #1
 2180 0042 0AD0     		beq	.L124
 2181 0044 B8F1020F 		cmp	r8, #2
 2182 0048 59D0     		beq	.L125
 2183 004a B8F1000F 		cmp	r8, #0
 2184 004e 08D0     		beq	.L126
 2185 0050 0324     		movs	r4, #3
 2186 0052 5FE0     		b	.L120
 2187              	.LVL213:
 2188              	.L132:
 834:./Hardware/MQTT/MqttKit.c **** 		flags |= 0x01;
 2189              		.loc 1 834 9 is_stmt 0 view .LVU719
 2190 0054 4FF0310A 		mov	r10, #49
 2191 0058 EDE7     		b	.L123
 2192              	.LVL214:
 2193              	.L124:
 841:./Hardware/MQTT/MqttKit.c **** 	{
 842:./Hardware/MQTT/MqttKit.c **** 		case MQTT_QOS_LEVEL0:
 843:./Hardware/MQTT/MqttKit.c **** 			flags |= MQTT_CONNECT_WILL_QOS0;	//最多一次
 844:./Hardware/MQTT/MqttKit.c **** 		break;
 845:./Hardware/MQTT/MqttKit.c **** 		
 846:./Hardware/MQTT/MqttKit.c **** 		case MQTT_QOS_LEVEL1:
 847:./Hardware/MQTT/MqttKit.c **** 			flags |= 0x02;						//最少一次
 2194              		.loc 1 847 4 is_stmt 1 view .LVU720
 2195              		.loc 1 847 10 is_stmt 0 view .LVU721
 2196 005a 4AF0020A 		orr	r10, r10, #2
 2197              	.LVL215:
 848:./Hardware/MQTT/MqttKit.c **** 			total_len += 2;
 2198              		.loc 1 848 4 is_stmt 1 view .LVU722
 2199              		.loc 1 848 14 is_stmt 0 view .LVU723
 2200 005e 03F10409 		add	r9, r3, #4
 2201              	.LVL216:
 849:./Hardware/MQTT/MqttKit.c **** 		break;
 2202              		.loc 1 849 3 is_stmt 1 view .LVU724
 2203              	.L126:
 850:./Hardware/MQTT/MqttKit.c **** 		
 851:./Hardware/MQTT/MqttKit.c **** 		case MQTT_QOS_LEVEL2:
 852:./Hardware/MQTT/MqttKit.c **** 			flags |= 0x04;						//只有一次
ARM GAS  /tmp/ccYLmkow.s 			page 60


 853:./Hardware/MQTT/MqttKit.c **** 			total_len += 2;
 854:./Hardware/MQTT/MqttKit.c **** 		break;
 855:./Hardware/MQTT/MqttKit.c **** 		
 856:./Hardware/MQTT/MqttKit.c **** 		default:
 857:./Hardware/MQTT/MqttKit.c **** 		return 3;
 858:./Hardware/MQTT/MqttKit.c **** 	}
 859:./Hardware/MQTT/MqttKit.c **** 	
 860:./Hardware/MQTT/MqttKit.c **** 	//分配内存------------------------------------------------------------------------------
 861:./Hardware/MQTT/MqttKit.c **** 	MQTT_NewBuffer(mqttPacket, total_len + 3);
 2204              		.loc 1 861 2 view .LVU725
 2205 0062 09F10303 		add	r3, r9, #3
 2206 0066 0393     		str	r3, [sp, #12]
 2207 0068 1946     		mov	r1, r3
 2208              	.LVL217:
 2209              		.loc 1 861 2 is_stmt 0 view .LVU726
 2210 006a 3846     		mov	r0, r7
 2211              	.LVL218:
 2212              		.loc 1 861 2 view .LVU727
 2213 006c FFF7FEFF 		bl	MQTT_NewBuffer
 2214              	.LVL219:
 862:./Hardware/MQTT/MqttKit.c **** 	if(mqttPacket->_data == NULL)
 2215              		.loc 1 862 2 is_stmt 1 view .LVU728
 2216              		.loc 1 862 15 is_stmt 0 view .LVU729
 2217 0070 3868     		ldr	r0, [r7]
 2218              		.loc 1 862 4 view .LVU730
 2219 0072 0028     		cmp	r0, #0
 2220 0074 54D0     		beq	.L133
 863:./Hardware/MQTT/MqttKit.c **** 		return 4;
 864:./Hardware/MQTT/MqttKit.c **** 		
 865:./Hardware/MQTT/MqttKit.c **** 	memset(mqttPacket->_data, 0, total_len + 3);
 2221              		.loc 1 865 2 is_stmt 1 view .LVU731
 2222 0076 039A     		ldr	r2, [sp, #12]
 2223 0078 0021     		movs	r1, #0
 2224 007a FFF7FEFF 		bl	memset
 2225              	.LVL220:
 866:./Hardware/MQTT/MqttKit.c **** 	
 867:./Hardware/MQTT/MqttKit.c **** /*************************************固定头部***********************************************/
 868:./Hardware/MQTT/MqttKit.c **** 	
 869:./Hardware/MQTT/MqttKit.c **** 	//固定头部----------------------头部消息-------------------------------------------------
 870:./Hardware/MQTT/MqttKit.c **** 	mqttPacket->_data[mqttPacket->_len++] = flags;
 2226              		.loc 1 870 2 view .LVU732
 2227              		.loc 1 870 12 is_stmt 0 view .LVU733
 2228 007e 3A68     		ldr	r2, [r7]
 2229              		.loc 1 870 30 view .LVU734
 2230 0080 7B68     		ldr	r3, [r7, #4]
 2231              		.loc 1 870 36 view .LVU735
 2232 0082 591C     		adds	r1, r3, #1
 2233 0084 7960     		str	r1, [r7, #4]
 2234              		.loc 1 870 40 view .LVU736
 2235 0086 02F803A0 		strb	r10, [r2, r3]
 871:./Hardware/MQTT/MqttKit.c **** 	
 872:./Hardware/MQTT/MqttKit.c **** 	//固定头部----------------------剩余长度值-----------------------------------------------
 873:./Hardware/MQTT/MqttKit.c **** 	len = MQTT_DumpLength(total_len, mqttPacket->_data + mqttPacket->_len);
 2236              		.loc 1 873 2 is_stmt 1 view .LVU737
 2237              		.loc 1 873 45 is_stmt 0 view .LVU738
 2238 008a 3968     		ldr	r1, [r7]
 2239              		.loc 1 873 65 view .LVU739
ARM GAS  /tmp/ccYLmkow.s 			page 61


 2240 008c 7B68     		ldr	r3, [r7, #4]
 2241              		.loc 1 873 8 view .LVU740
 2242 008e 1944     		add	r1, r1, r3
 2243 0090 4846     		mov	r0, r9
 2244 0092 FFF7FEFF 		bl	MQTT_DumpLength
 2245              	.LVL221:
 874:./Hardware/MQTT/MqttKit.c **** 	if(len < 0)
 2246              		.loc 1 874 2 is_stmt 1 view .LVU741
 2247              		.loc 1 874 4 is_stmt 0 view .LVU742
 2248 0096 0028     		cmp	r0, #0
 2249              		.loc 1 874 4 view .LVU743
 2250 0098 36DB     		blt	.L137
 875:./Hardware/MQTT/MqttKit.c **** 	{
 876:./Hardware/MQTT/MqttKit.c **** 		MQTT_DeleteBuffer(mqttPacket);
 877:./Hardware/MQTT/MqttKit.c **** 		return 5;
 878:./Hardware/MQTT/MqttKit.c **** 	}
 879:./Hardware/MQTT/MqttKit.c **** 	else
 880:./Hardware/MQTT/MqttKit.c **** 		mqttPacket->_len += len;
 2251              		.loc 1 880 3 is_stmt 1 view .LVU744
 2252              		.loc 1 880 20 is_stmt 0 view .LVU745
 2253 009a 7B68     		ldr	r3, [r7, #4]
 2254 009c 0344     		add	r3, r3, r0
 2255 009e 7B60     		str	r3, [r7, #4]
 881:./Hardware/MQTT/MqttKit.c **** 	
 882:./Hardware/MQTT/MqttKit.c **** /*************************************可变头部***********************************************/
 883:./Hardware/MQTT/MqttKit.c **** 	
 884:./Hardware/MQTT/MqttKit.c **** 	//可变头部----------------------写入topic长度、topic-------------------------------------
 885:./Hardware/MQTT/MqttKit.c **** 	mqttPacket->_data[mqttPacket->_len++] = MOSQ_MSB(topic_len);
 2256              		.loc 1 885 2 is_stmt 1 view .LVU746
 2257              		.loc 1 885 12 is_stmt 0 view .LVU747
 2258 00a0 3A68     		ldr	r2, [r7]
 2259              		.loc 1 885 36 view .LVU748
 2260 00a2 591C     		adds	r1, r3, #1
 2261 00a4 7960     		str	r1, [r7, #4]
 2262              		.loc 1 885 42 view .LVU749
 2263 00a6 C5F30721 		ubfx	r1, r5, #8, #8
 2264              		.loc 1 885 40 view .LVU750
 2265 00aa D154     		strb	r1, [r2, r3]
 886:./Hardware/MQTT/MqttKit.c **** 	mqttPacket->_data[mqttPacket->_len++] = MOSQ_LSB(topic_len);
 2266              		.loc 1 886 2 is_stmt 1 view .LVU751
 2267              		.loc 1 886 12 is_stmt 0 view .LVU752
 2268 00ac 3A68     		ldr	r2, [r7]
 2269              		.loc 1 886 30 view .LVU753
 2270 00ae 7B68     		ldr	r3, [r7, #4]
 2271              		.loc 1 886 36 view .LVU754
 2272 00b0 591C     		adds	r1, r3, #1
 2273 00b2 7960     		str	r1, [r7, #4]
 2274              		.loc 1 886 40 view .LVU755
 2275 00b4 D554     		strb	r5, [r2, r3]
 887:./Hardware/MQTT/MqttKit.c **** 	
 888:./Hardware/MQTT/MqttKit.c **** 	strncat((int8 *)mqttPacket->_data + mqttPacket->_len, topic, topic_len);
 2276              		.loc 1 888 2 is_stmt 1 view .LVU756
 2277              		.loc 1 888 28 is_stmt 0 view .LVU757
 2278 00b6 3868     		ldr	r0, [r7]
 2279              	.LVL222:
 2280              		.loc 1 888 48 view .LVU758
 2281 00b8 7B68     		ldr	r3, [r7, #4]
ARM GAS  /tmp/ccYLmkow.s 			page 62


 2282              		.loc 1 888 2 view .LVU759
 2283 00ba 2A46     		mov	r2, r5
 2284 00bc 3146     		mov	r1, r6
 2285 00be 1844     		add	r0, r0, r3
 2286 00c0 FFF7FEFF 		bl	strncat
 2287              	.LVL223:
 889:./Hardware/MQTT/MqttKit.c **** 	mqttPacket->_len += topic_len;
 2288              		.loc 1 889 2 is_stmt 1 view .LVU760
 2289              		.loc 1 889 19 is_stmt 0 view .LVU761
 2290 00c4 7B68     		ldr	r3, [r7, #4]
 2291 00c6 1D44     		add	r5, r5, r3
 2292              	.LVL224:
 2293              		.loc 1 889 19 view .LVU762
 2294 00c8 7D60     		str	r5, [r7, #4]
 890:./Hardware/MQTT/MqttKit.c **** 	if(qos != MQTT_QOS_LEVEL0)
 2295              		.loc 1 890 2 is_stmt 1 view .LVU763
 2296              		.loc 1 890 4 is_stmt 0 view .LVU764
 2297 00ca B8F1000F 		cmp	r8, #0
 2298 00ce 0AD0     		beq	.L128
 891:./Hardware/MQTT/MqttKit.c **** 	{
 892:./Hardware/MQTT/MqttKit.c **** 		mqttPacket->_data[mqttPacket->_len++] = MOSQ_MSB(pkt_id);
 2299              		.loc 1 892 3 is_stmt 1 view .LVU765
 2300              		.loc 1 892 13 is_stmt 0 view .LVU766
 2301 00d0 3B68     		ldr	r3, [r7]
 2302              		.loc 1 892 37 view .LVU767
 2303 00d2 6A1C     		adds	r2, r5, #1
 2304 00d4 7A60     		str	r2, [r7, #4]
 2305              		.loc 1 892 43 view .LVU768
 2306 00d6 0298     		ldr	r0, [sp, #8]
 2307 00d8 020A     		lsrs	r2, r0, #8
 2308              		.loc 1 892 41 view .LVU769
 2309 00da 5A55     		strb	r2, [r3, r5]
 893:./Hardware/MQTT/MqttKit.c **** 		mqttPacket->_data[mqttPacket->_len++] = MOSQ_LSB(pkt_id);
 2310              		.loc 1 893 3 is_stmt 1 view .LVU770
 2311              		.loc 1 893 13 is_stmt 0 view .LVU771
 2312 00dc 3A68     		ldr	r2, [r7]
 2313              		.loc 1 893 31 view .LVU772
 2314 00de 7B68     		ldr	r3, [r7, #4]
 2315              		.loc 1 893 37 view .LVU773
 2316 00e0 591C     		adds	r1, r3, #1
 2317 00e2 7960     		str	r1, [r7, #4]
 2318              		.loc 1 893 41 view .LVU774
 2319 00e4 D054     		strb	r0, [r2, r3]
 2320              	.L128:
 894:./Hardware/MQTT/MqttKit.c **** 	}
 895:./Hardware/MQTT/MqttKit.c **** 	
 896:./Hardware/MQTT/MqttKit.c **** 	//可变头部----------------------写入payload----------------------------------------------
 897:./Hardware/MQTT/MqttKit.c **** 	if(payload != NULL)
 2321              		.loc 1 897 2 is_stmt 1 view .LVU775
 2322              		.loc 1 897 4 is_stmt 0 view .LVU776
 2323 00e6 0199     		ldr	r1, [sp, #4]
 2324 00e8 A1B1     		cbz	r1, .L120
 898:./Hardware/MQTT/MqttKit.c **** 	{
 899:./Hardware/MQTT/MqttKit.c **** 		strncat((int8 *)mqttPacket->_data + mqttPacket->_len, payload, payload_len);
 2325              		.loc 1 899 3 is_stmt 1 view .LVU777
 2326              		.loc 1 899 29 is_stmt 0 view .LVU778
 2327 00ea 3868     		ldr	r0, [r7]
ARM GAS  /tmp/ccYLmkow.s 			page 63


 2328              		.loc 1 899 49 view .LVU779
 2329 00ec 7B68     		ldr	r3, [r7, #4]
 2330              		.loc 1 899 3 view .LVU780
 2331 00ee 5A46     		mov	r2, fp
 2332 00f0 1844     		add	r0, r0, r3
 2333 00f2 FFF7FEFF 		bl	strncat
 2334              	.LVL225:
 900:./Hardware/MQTT/MqttKit.c **** 		mqttPacket->_len += payload_len;
 2335              		.loc 1 900 3 is_stmt 1 view .LVU781
 2336              		.loc 1 900 20 is_stmt 0 view .LVU782
 2337 00f6 7B68     		ldr	r3, [r7, #4]
 2338 00f8 5B44     		add	r3, r3, fp
 2339 00fa 7B60     		str	r3, [r7, #4]
 2340 00fc 0AE0     		b	.L120
 2341              	.LVL226:
 2342              	.L125:
 852:./Hardware/MQTT/MqttKit.c **** 			total_len += 2;
 2343              		.loc 1 852 4 is_stmt 1 view .LVU783
 852:./Hardware/MQTT/MqttKit.c **** 			total_len += 2;
 2344              		.loc 1 852 10 is_stmt 0 view .LVU784
 2345 00fe 4AF0040A 		orr	r10, r10, #4
 2346              	.LVL227:
 853:./Hardware/MQTT/MqttKit.c **** 		break;
 2347              		.loc 1 853 4 is_stmt 1 view .LVU785
 853:./Hardware/MQTT/MqttKit.c **** 		break;
 2348              		.loc 1 853 14 is_stmt 0 view .LVU786
 2349 0102 03F10409 		add	r9, r3, #4
 2350              	.LVL228:
 854:./Hardware/MQTT/MqttKit.c **** 		
 2351              		.loc 1 854 3 is_stmt 1 view .LVU787
 2352 0106 ACE7     		b	.L126
 2353              	.LVL229:
 2354              	.L137:
 876:./Hardware/MQTT/MqttKit.c **** 		return 5;
 2355              		.loc 1 876 3 view .LVU788
 2356 0108 3846     		mov	r0, r7
 2357              	.LVL230:
 876:./Hardware/MQTT/MqttKit.c **** 		return 5;
 2358              		.loc 1 876 3 is_stmt 0 view .LVU789
 2359 010a FFF7FEFF 		bl	MQTT_DeleteBuffer
 2360              	.LVL231:
 877:./Hardware/MQTT/MqttKit.c **** 	}
 2361              		.loc 1 877 3 is_stmt 1 view .LVU790
 877:./Hardware/MQTT/MqttKit.c **** 	}
 2362              		.loc 1 877 10 is_stmt 0 view .LVU791
 2363 010e 0524     		movs	r4, #5
 2364 0110 00E0     		b	.L120
 2365              	.LVL232:
 2366              	.L129:
 820:./Hardware/MQTT/MqttKit.c **** 	
 2367              		.loc 1 820 10 view .LVU792
 2368 0112 0124     		movs	r4, #1
 2369              	.LVL233:
 2370              	.L120:
 901:./Hardware/MQTT/MqttKit.c **** 	}
 902:./Hardware/MQTT/MqttKit.c **** 	
 903:./Hardware/MQTT/MqttKit.c **** 	return 0;
ARM GAS  /tmp/ccYLmkow.s 			page 64


 904:./Hardware/MQTT/MqttKit.c **** 
 905:./Hardware/MQTT/MqttKit.c **** }
 2371              		.loc 1 905 1 view .LVU793
 2372 0114 2046     		mov	r0, r4
 2373 0116 05B0     		add	sp, sp, #20
 2374              	.LCFI23:
 2375              		.cfi_remember_state
 2376              		.cfi_def_cfa_offset 36
 2377              		@ sp needed
 2378 0118 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 2379              	.LVL234:
 2380              	.L130:
 2381              	.LCFI24:
 2382              		.cfi_restore_state
 826:./Hardware/MQTT/MqttKit.c **** 	}
 2383              		.loc 1 826 11 view .LVU794
 2384 011c 0224     		movs	r4, #2
 2385 011e F9E7     		b	.L120
 2386              	.LVL235:
 2387              	.L133:
 863:./Hardware/MQTT/MqttKit.c **** 		
 2388              		.loc 1 863 10 view .LVU795
 2389 0120 0424     		movs	r4, #4
 2390 0122 F7E7     		b	.L120
 2391              		.cfi_endproc
 2392              	.LFE15:
 2394              		.section	.rodata.MQTT_PacketSaveData.str1.4,"aMS",%progbits,1
 2395              		.align	2
 2396              	.LC2:
 2397 0000 24647000 		.ascii	"$dp\000"
 2398              		.section	.text.MQTT_PacketSaveData,"ax",%progbits
 2399              		.align	1
 2400              		.global	MQTT_PacketSaveData
 2401              		.syntax unified
 2402              		.thumb
 2403              		.thumb_func
 2404              		.fpu softvfp
 2406              	MQTT_PacketSaveData:
 2407              	.LVL236:
 2408              	.LFB8:
 460:./Hardware/MQTT/MqttKit.c **** 
 2409              		.loc 1 460 1 is_stmt 1 view -0
 2410              		.cfi_startproc
 2411              		@ args = 4, pretend = 0, frame = 0
 2412              		@ frame_needed = 0, uses_anonymous_args = 0
 460:./Hardware/MQTT/MqttKit.c **** 
 2413              		.loc 1 460 1 is_stmt 0 view .LVU797
 2414 0000 70B5     		push	{r4, r5, r6, lr}
 2415              	.LCFI25:
 2416              		.cfi_def_cfa_offset 16
 2417              		.cfi_offset 4, -16
 2418              		.cfi_offset 5, -12
 2419              		.cfi_offset 6, -8
 2420              		.cfi_offset 14, -4
 2421 0002 84B0     		sub	sp, sp, #16
 2422              	.LCFI26:
 2423              		.cfi_def_cfa_offset 32
ARM GAS  /tmp/ccYLmkow.s 			page 65


 2424 0004 0D46     		mov	r5, r1
 2425 0006 1E46     		mov	r6, r3
 2426 0008 089C     		ldr	r4, [sp, #32]
 462:./Hardware/MQTT/MqttKit.c **** 	{
 2427              		.loc 1 462 2 is_stmt 1 view .LVU798
 462:./Hardware/MQTT/MqttKit.c **** 	{
 2428              		.loc 1 462 5 is_stmt 0 view .LVU799
 2429 000a 0394     		str	r4, [sp, #12]
 2430 000c 0121     		movs	r1, #1
 2431              	.LVL237:
 462:./Hardware/MQTT/MqttKit.c **** 	{
 2432              		.loc 1 462 5 view .LVU800
 2433 000e 0291     		str	r1, [sp, #8]
 2434 0010 0022     		movs	r2, #0
 2435              	.LVL238:
 462:./Hardware/MQTT/MqttKit.c **** 	{
 2436              		.loc 1 462 5 view .LVU801
 2437 0012 0192     		str	r2, [sp, #4]
 2438 0014 0091     		str	r1, [sp]
 2439 0016 EB1C     		adds	r3, r5, #3
 2440              	.LVL239:
 462:./Hardware/MQTT/MqttKit.c **** 	{
 2441              		.loc 1 462 5 view .LVU802
 2442 0018 0C49     		ldr	r1, .L142
 2443 001a 0A20     		movs	r0, #10
 2444              	.LVL240:
 462:./Hardware/MQTT/MqttKit.c **** 	{
 2445              		.loc 1 462 5 view .LVU803
 2446 001c FFF7FEFF 		bl	MQTT_PacketPublish
 2447              	.LVL241:
 462:./Hardware/MQTT/MqttKit.c **** 	{
 2448              		.loc 1 462 4 view .LVU804
 2449 0020 90B9     		cbnz	r0, .L140
 464:./Hardware/MQTT/MqttKit.c **** 		
 2450              		.loc 1 464 3 is_stmt 1 view .LVU805
 464:./Hardware/MQTT/MqttKit.c **** 		
 2451              		.loc 1 464 13 is_stmt 0 view .LVU806
 2452 0022 2268     		ldr	r2, [r4]
 464:./Hardware/MQTT/MqttKit.c **** 		
 2453              		.loc 1 464 31 view .LVU807
 2454 0024 6368     		ldr	r3, [r4, #4]
 464:./Hardware/MQTT/MqttKit.c **** 		
 2455              		.loc 1 464 37 view .LVU808
 2456 0026 591C     		adds	r1, r3, #1
 2457 0028 6160     		str	r1, [r4, #4]
 464:./Hardware/MQTT/MqttKit.c **** 		
 2458              		.loc 1 464 41 view .LVU809
 2459 002a D654     		strb	r6, [r2, r3]
 466:./Hardware/MQTT/MqttKit.c **** 		mqttPacket->_data[mqttPacket->_len++] = MOSQ_LSB(send_len);
 2460              		.loc 1 466 3 is_stmt 1 view .LVU810
 466:./Hardware/MQTT/MqttKit.c **** 		mqttPacket->_data[mqttPacket->_len++] = MOSQ_LSB(send_len);
 2461              		.loc 1 466 13 is_stmt 0 view .LVU811
 2462 002c 2268     		ldr	r2, [r4]
 466:./Hardware/MQTT/MqttKit.c **** 		mqttPacket->_data[mqttPacket->_len++] = MOSQ_LSB(send_len);
 2463              		.loc 1 466 31 view .LVU812
 2464 002e 6368     		ldr	r3, [r4, #4]
 466:./Hardware/MQTT/MqttKit.c **** 		mqttPacket->_data[mqttPacket->_len++] = MOSQ_LSB(send_len);
ARM GAS  /tmp/ccYLmkow.s 			page 66


 2465              		.loc 1 466 37 view .LVU813
 2466 0030 591C     		adds	r1, r3, #1
 2467 0032 6160     		str	r1, [r4, #4]
 466:./Hardware/MQTT/MqttKit.c **** 		mqttPacket->_data[mqttPacket->_len++] = MOSQ_LSB(send_len);
 2468              		.loc 1 466 43 view .LVU814
 2469 0034 C5F30721 		ubfx	r1, r5, #8, #8
 466:./Hardware/MQTT/MqttKit.c **** 		mqttPacket->_data[mqttPacket->_len++] = MOSQ_LSB(send_len);
 2470              		.loc 1 466 41 view .LVU815
 2471 0038 D154     		strb	r1, [r2, r3]
 467:./Hardware/MQTT/MqttKit.c **** 	}
 2472              		.loc 1 467 3 is_stmt 1 view .LVU816
 467:./Hardware/MQTT/MqttKit.c **** 	}
 2473              		.loc 1 467 13 is_stmt 0 view .LVU817
 2474 003a 2268     		ldr	r2, [r4]
 467:./Hardware/MQTT/MqttKit.c **** 	}
 2475              		.loc 1 467 31 view .LVU818
 2476 003c 6368     		ldr	r3, [r4, #4]
 467:./Hardware/MQTT/MqttKit.c **** 	}
 2477              		.loc 1 467 37 view .LVU819
 2478 003e 591C     		adds	r1, r3, #1
 2479 0040 6160     		str	r1, [r4, #4]
 467:./Hardware/MQTT/MqttKit.c **** 	}
 2480              		.loc 1 467 41 view .LVU820
 2481 0042 D554     		strb	r5, [r2, r3]
 472:./Hardware/MQTT/MqttKit.c **** 
 2482              		.loc 1 472 2 is_stmt 1 view .LVU821
 2483              	.L139:
 474:./Hardware/MQTT/MqttKit.c **** 
 2484              		.loc 1 474 1 is_stmt 0 view .LVU822
 2485 0044 04B0     		add	sp, sp, #16
 2486              	.LCFI27:
 2487              		.cfi_remember_state
 2488              		.cfi_def_cfa_offset 16
 2489              		@ sp needed
 2490 0046 70BD     		pop	{r4, r5, r6, pc}
 2491              	.LVL242:
 2492              	.L140:
 2493              	.LCFI28:
 2494              		.cfi_restore_state
 470:./Hardware/MQTT/MqttKit.c **** 	
 2495              		.loc 1 470 10 view .LVU823
 2496 0048 0120     		movs	r0, #1
 2497 004a FBE7     		b	.L139
 2498              	.L143:
 2499              		.align	2
 2500              	.L142:
 2501 004c 00000000 		.word	.LC2
 2502              		.cfi_endproc
 2503              	.LFE8:
 2505              		.section	.rodata.MQTT_PacketCmdResp.str1.4,"aMS",%progbits,1
 2506              		.align	2
 2507              	.LC3:
 2508 0000 24637273 		.ascii	"$crsp/\000"
 2508      702F00
 2509              		.section	.text.MQTT_PacketCmdResp,"ax",%progbits
 2510              		.align	1
 2511              		.global	MQTT_PacketCmdResp
ARM GAS  /tmp/ccYLmkow.s 			page 67


 2512              		.syntax unified
 2513              		.thumb
 2514              		.thumb_func
 2515              		.fpu softvfp
 2517              	MQTT_PacketCmdResp:
 2518              	.LVL243:
 2519              	.LFB10:
 539:./Hardware/MQTT/MqttKit.c **** 	
 2520              		.loc 1 539 1 is_stmt 1 view -0
 2521              		.cfi_startproc
 2522              		@ args = 0, pretend = 0, frame = 0
 2523              		@ frame_needed = 0, uses_anonymous_args = 0
 539:./Hardware/MQTT/MqttKit.c **** 	
 2524              		.loc 1 539 1 is_stmt 0 view .LVU825
 2525 0000 2DE9F043 		push	{r4, r5, r6, r7, r8, r9, lr}
 2526              	.LCFI29:
 2527              		.cfi_def_cfa_offset 28
 2528              		.cfi_offset 4, -28
 2529              		.cfi_offset 5, -24
 2530              		.cfi_offset 6, -20
 2531              		.cfi_offset 7, -16
 2532              		.cfi_offset 8, -12
 2533              		.cfi_offset 9, -8
 2534              		.cfi_offset 14, -4
 2535 0004 85B0     		sub	sp, sp, #20
 2536              	.LCFI30:
 2537              		.cfi_def_cfa_offset 48
 2538 0006 8046     		mov	r8, r0
 2539 0008 0E46     		mov	r6, r1
 2540 000a 1746     		mov	r7, r2
 541:./Hardware/MQTT/MqttKit.c **** 	uint16 req_len = strlen(req);
 2541              		.loc 1 541 2 is_stmt 1 view .LVU826
 541:./Hardware/MQTT/MqttKit.c **** 	uint16 req_len = strlen(req);
 2542              		.loc 1 541 21 is_stmt 0 view .LVU827
 2543 000c FFF7FEFF 		bl	strlen
 2544              	.LVL244:
 542:./Hardware/MQTT/MqttKit.c **** 	_Bool status = 0;
 2545              		.loc 1 542 2 is_stmt 1 view .LVU828
 543:./Hardware/MQTT/MqttKit.c **** 	
 2546              		.loc 1 543 2 view .LVU829
 545:./Hardware/MQTT/MqttKit.c **** 	if(payload == NULL)
 2547              		.loc 1 545 2 view .LVU830
 2548 0010 85B2     		uxth	r5, r0
 545:./Hardware/MQTT/MqttKit.c **** 	if(payload == NULL)
 2549              		.loc 1 545 46 is_stmt 0 view .LVU831
 2550 0012 05F10609 		add	r9, r5, #6
 545:./Hardware/MQTT/MqttKit.c **** 	if(payload == NULL)
 2551              		.loc 1 545 18 view .LVU832
 2552 0016 4846     		mov	r0, r9
 2553              	.LVL245:
 545:./Hardware/MQTT/MqttKit.c **** 	if(payload == NULL)
 2554              		.loc 1 545 18 view .LVU833
 2555 0018 FFF7FEFF 		bl	malloc
 2556              	.LVL246:
 546:./Hardware/MQTT/MqttKit.c **** 		return 1;
 2557              		.loc 1 546 2 is_stmt 1 view .LVU834
 546:./Hardware/MQTT/MqttKit.c **** 		return 1;
ARM GAS  /tmp/ccYLmkow.s 			page 68


 2558              		.loc 1 546 4 is_stmt 0 view .LVU835
 2559 001c 40B3     		cbz	r0, .L147
 2560 001e 0446     		mov	r4, r0
 549:./Hardware/MQTT/MqttKit.c **** 	memcpy(payload, "$crsp/", 6);
 2561              		.loc 1 549 2 is_stmt 1 view .LVU836
 2562 0020 4A46     		mov	r2, r9
 2563 0022 0021     		movs	r1, #0
 2564 0024 FFF7FEFF 		bl	memset
 2565              	.LVL247:
 550:./Hardware/MQTT/MqttKit.c **** 	strncat(payload, cmdid, cmdid_len);
 2566              		.loc 1 550 2 view .LVU837
 2567 0028 124B     		ldr	r3, .L150
 2568 002a 1868     		ldr	r0, [r3]
 2569 002c 2060     		str	r0, [r4]	@ unaligned
 2570 002e 9B88     		ldrh	r3, [r3, #4]	@ unaligned
 2571 0030 A380     		strh	r3, [r4, #4]	@ unaligned
 551:./Hardware/MQTT/MqttKit.c **** 
 2572              		.loc 1 551 2 view .LVU838
 2573 0032 2A46     		mov	r2, r5
 2574 0034 4146     		mov	r1, r8
 2575 0036 2046     		mov	r0, r4
 2576 0038 FFF7FEFF 		bl	strncat
 2577              	.LVL248:
 553:./Hardware/MQTT/MqttKit.c **** 		status = 0;
 2578              		.loc 1 553 2 view .LVU839
 553:./Hardware/MQTT/MqttKit.c **** 		status = 0;
 2579              		.loc 1 553 5 is_stmt 0 view .LVU840
 2580 003c 3046     		mov	r0, r6
 2581 003e FFF7FEFF 		bl	strlen
 2582              	.LVL249:
 2583 0042 0346     		mov	r3, r0
 2584 0044 0397     		str	r7, [sp, #12]
 2585 0046 0122     		movs	r2, #1
 2586 0048 0292     		str	r2, [sp, #8]
 2587 004a 0022     		movs	r2, #0
 2588 004c 0192     		str	r2, [sp, #4]
 2589 004e 0092     		str	r2, [sp]
 2590 0050 3246     		mov	r2, r6
 2591 0052 2146     		mov	r1, r4
 2592 0054 0A20     		movs	r0, #10
 2593 0056 FFF7FEFF 		bl	MQTT_PacketPublish
 2594              	.LVL250:
 553:./Hardware/MQTT/MqttKit.c **** 		status = 0;
 2595              		.loc 1 553 4 view .LVU841
 2596 005a 38B9     		cbnz	r0, .L148
 554:./Hardware/MQTT/MqttKit.c **** 	else
 2597              		.loc 1 554 10 view .LVU842
 2598 005c 0025     		movs	r5, #0
 2599              	.LVL251:
 2600              	.L146:
 558:./Hardware/MQTT/MqttKit.c **** 	
 2601              		.loc 1 558 2 is_stmt 1 view .LVU843
 2602 005e 2046     		mov	r0, r4
 2603 0060 FFF7FEFF 		bl	free
 2604              	.LVL252:
 560:./Hardware/MQTT/MqttKit.c **** 
 2605              		.loc 1 560 2 view .LVU844
ARM GAS  /tmp/ccYLmkow.s 			page 69


 2606              	.L145:
 562:./Hardware/MQTT/MqttKit.c **** 
 2607              		.loc 1 562 1 is_stmt 0 view .LVU845
 2608 0064 2846     		mov	r0, r5
 2609 0066 05B0     		add	sp, sp, #20
 2610              	.LCFI31:
 2611              		.cfi_remember_state
 2612              		.cfi_def_cfa_offset 28
 2613              		@ sp needed
 2614 0068 BDE8F083 		pop	{r4, r5, r6, r7, r8, r9, pc}
 2615              	.LVL253:
 2616              	.L148:
 2617              	.LCFI32:
 2618              		.cfi_restore_state
 556:./Hardware/MQTT/MqttKit.c **** 	
 2619              		.loc 1 556 10 view .LVU846
 2620 006c 0125     		movs	r5, #1
 2621              	.LVL254:
 556:./Hardware/MQTT/MqttKit.c **** 	
 2622              		.loc 1 556 10 view .LVU847
 2623 006e F6E7     		b	.L146
 2624              	.LVL255:
 2625              	.L147:
 547:./Hardware/MQTT/MqttKit.c **** 	
 2626              		.loc 1 547 10 view .LVU848
 2627 0070 0125     		movs	r5, #1
 2628              	.LVL256:
 547:./Hardware/MQTT/MqttKit.c **** 	
 2629              		.loc 1 547 10 view .LVU849
 2630 0072 F7E7     		b	.L145
 2631              	.L151:
 2632              		.align	2
 2633              	.L150:
 2634 0074 00000000 		.word	.LC3
 2635              		.cfi_endproc
 2636              	.LFE10:
 2638              		.section	.text.MQTT_UnPacketPublish,"ax",%progbits
 2639              		.align	1
 2640              		.global	MQTT_UnPacketPublish
 2641              		.syntax unified
 2642              		.thumb
 2643              		.thumb_func
 2644              		.fpu softvfp
 2646              	MQTT_UnPacketPublish:
 2647              	.LVL257:
 2648              	.LFB16:
 906:./Hardware/MQTT/MqttKit.c **** 
 907:./Hardware/MQTT/MqttKit.c **** //==========================================================
 908:./Hardware/MQTT/MqttKit.c **** //	函数名称：	MQTT_UnPacketPublish
 909:./Hardware/MQTT/MqttKit.c **** //
 910:./Hardware/MQTT/MqttKit.c **** //	函数功能：	Publish消息解包
 911:./Hardware/MQTT/MqttKit.c **** //
 912:./Hardware/MQTT/MqttKit.c **** //	入口参数：	flags：MQTT相关标志信息
 913:./Hardware/MQTT/MqttKit.c **** //				pkt：指向可变头部
 914:./Hardware/MQTT/MqttKit.c **** //				size：固定头部中的剩余长度信息
 915:./Hardware/MQTT/MqttKit.c **** //
 916:./Hardware/MQTT/MqttKit.c **** //	返回参数：	0-成功		其他-失败原因
ARM GAS  /tmp/ccYLmkow.s 			page 70


 917:./Hardware/MQTT/MqttKit.c **** //
 918:./Hardware/MQTT/MqttKit.c **** //	说明：		
 919:./Hardware/MQTT/MqttKit.c **** //==========================================================
 920:./Hardware/MQTT/MqttKit.c **** uint8 MQTT_UnPacketPublish(uint8 *rev_data, int8 **topic, uint16 *topic_len, int8 **payload, uint16
 921:./Hardware/MQTT/MqttKit.c **** {
 2649              		.loc 1 921 1 is_stmt 1 view -0
 2650              		.cfi_startproc
 2651              		@ args = 12, pretend = 0, frame = 8
 2652              		@ frame_needed = 0, uses_anonymous_args = 0
 2653              		.loc 1 921 1 is_stmt 0 view .LVU851
 2654 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 2655              	.LCFI33:
 2656              		.cfi_def_cfa_offset 36
 2657              		.cfi_offset 4, -36
 2658              		.cfi_offset 5, -32
 2659              		.cfi_offset 6, -28
 2660              		.cfi_offset 7, -24
 2661              		.cfi_offset 8, -20
 2662              		.cfi_offset 9, -16
 2663              		.cfi_offset 10, -12
 2664              		.cfi_offset 11, -8
 2665              		.cfi_offset 14, -4
 2666 0004 83B0     		sub	sp, sp, #12
 2667              	.LCFI34:
 2668              		.cfi_def_cfa_offset 48
 2669 0006 0646     		mov	r6, r0
 2670 0008 0F46     		mov	r7, r1
 2671 000a 1546     		mov	r5, r2
 2672 000c 9846     		mov	r8, r3
 922:./Hardware/MQTT/MqttKit.c **** 	
 923:./Hardware/MQTT/MqttKit.c **** 	const int8 flags = rev_data[0] & 0x0F;
 2673              		.loc 1 923 2 is_stmt 1 view .LVU852
 2674              		.loc 1 923 33 is_stmt 0 view .LVU853
 2675 000e 10F8014B 		ldrb	r4, [r0], #1	@ zero_extendqisi2
 2676              	.LVL258:
 924:./Hardware/MQTT/MqttKit.c **** 	uint8 *msgPtr;
 2677              		.loc 1 924 2 is_stmt 1 view .LVU854
 925:./Hardware/MQTT/MqttKit.c **** 	uint32 remain_len = 0;
 2678              		.loc 1 925 2 view .LVU855
 2679              		.loc 1 925 9 is_stmt 0 view .LVU856
 2680 0012 0023     		movs	r3, #0
 2681              	.LVL259:
 2682              		.loc 1 925 9 view .LVU857
 2683 0014 0193     		str	r3, [sp, #4]
 926:./Hardware/MQTT/MqttKit.c **** 
 927:./Hardware/MQTT/MqttKit.c **** 	const int8 dup = flags & 0x08;
 2684              		.loc 1 927 2 is_stmt 1 view .LVU858
 2685              	.LVL260:
 928:./Hardware/MQTT/MqttKit.c **** 
 929:./Hardware/MQTT/MqttKit.c **** 	*qos = (flags & 0x06) >> 1;
 2686              		.loc 1 929 2 view .LVU859
 2687              		.loc 1 929 24 is_stmt 0 view .LVU860
 2688 0016 C4F34103 		ubfx	r3, r4, #1, #2
 2689              		.loc 1 929 7 view .LVU861
 2690 001a 0D9A     		ldr	r2, [sp, #52]
 2691              	.LVL261:
 2692              		.loc 1 929 7 view .LVU862
ARM GAS  /tmp/ccYLmkow.s 			page 71


 2693 001c 1370     		strb	r3, [r2]
 930:./Hardware/MQTT/MqttKit.c **** 	
 931:./Hardware/MQTT/MqttKit.c **** 	msgPtr = rev_data + MQTT_ReadLength(rev_data + 1, 4, &remain_len) + 1;
 2694              		.loc 1 931 2 is_stmt 1 view .LVU863
 2695              		.loc 1 931 22 is_stmt 0 view .LVU864
 2696 001e 01AA     		add	r2, sp, #4
 2697 0020 0421     		movs	r1, #4
 2698              	.LVL262:
 2699              		.loc 1 931 22 view .LVU865
 2700 0022 FFF7FEFF 		bl	MQTT_ReadLength
 2701              	.LVL263:
 2702              		.loc 1 931 68 view .LVU866
 2703 0026 0130     		adds	r0, r0, #1
 2704              		.loc 1 931 9 view .LVU867
 2705 0028 06EB0009 		add	r9, r6, r0
 2706              	.LVL264:
 932:./Hardware/MQTT/MqttKit.c **** 	
 933:./Hardware/MQTT/MqttKit.c **** 	if(remain_len < 2 || flags & 0x01)							//retain
 2707              		.loc 1 933 2 is_stmt 1 view .LVU868
 2708              		.loc 1 933 16 is_stmt 0 view .LVU869
 2709 002c 019B     		ldr	r3, [sp, #4]
 2710              		.loc 1 933 4 view .LVU870
 2711 002e 012B     		cmp	r3, #1
 2712 0030 40F2A480 		bls	.L159
 2713 0034 04F0080B 		and	fp, r4, #8
 2714              		.loc 1 933 20 discriminator 1 view .LVU871
 2715 0038 14F00104 		ands	r4, r4, #1
 2716              	.LVL265:
 2717              		.loc 1 933 20 discriminator 1 view .LVU872
 2718 003c 40F0A080 		bne	.L160
 934:./Hardware/MQTT/MqttKit.c **** 		return 255;
 935:./Hardware/MQTT/MqttKit.c **** 	
 936:./Hardware/MQTT/MqttKit.c **** 	*topic_len = (uint16)msgPtr[0] << 8 | msgPtr[1];
 2719              		.loc 1 936 2 is_stmt 1 view .LVU873
 2720              		.loc 1 936 29 is_stmt 0 view .LVU874
 2721 0040 335C     		ldrb	r3, [r6, r0]	@ zero_extendqisi2
 2722              		.loc 1 936 46 view .LVU875
 2723 0042 99F80160 		ldrb	r6, [r9, #1]	@ zero_extendqisi2
 2724              	.LVL266:
 2725              		.loc 1 936 38 view .LVU876
 2726 0046 46EA0326 		orr	r6, r6, r3, lsl #8
 2727              		.loc 1 936 13 view .LVU877
 2728 004a 2E80     		strh	r6, [r5]	@ movhi
 937:./Hardware/MQTT/MqttKit.c **** 	if(remain_len < *topic_len + 2)
 2729              		.loc 1 937 2 is_stmt 1 view .LVU878
 2730              		.loc 1 937 29 is_stmt 0 view .LVU879
 2731 004c B21C     		adds	r2, r6, #2
 2732              		.loc 1 937 16 view .LVU880
 2733 004e 019B     		ldr	r3, [sp, #4]
 2734              		.loc 1 937 4 view .LVU881
 2735 0050 9A42     		cmp	r2, r3
 2736 0052 00F29780 		bhi	.L161
 938:./Hardware/MQTT/MqttKit.c **** 		return 255;
 939:./Hardware/MQTT/MqttKit.c **** 	
 940:./Hardware/MQTT/MqttKit.c **** 	if(strstr((int8 *)msgPtr + 2, CMD_TOPIC_PREFIX) != NULL)	//如果是命令下发
 2737              		.loc 1 940 2 is_stmt 1 view .LVU882
 2738              		.loc 1 940 5 is_stmt 0 view .LVU883
ARM GAS  /tmp/ccYLmkow.s 			page 72


 2739 0056 09F1020A 		add	r10, r9, #2
 2740 005a 5449     		ldr	r1, .L175
 2741 005c 5046     		mov	r0, r10
 2742 005e FFF7FEFF 		bl	strstr
 2743              	.LVL267:
 2744              		.loc 1 940 4 view .LVU884
 2745 0062 0028     		cmp	r0, #0
 2746 0064 40F09080 		bne	.L162
 941:./Hardware/MQTT/MqttKit.c **** 		return MQTT_PKT_CMD;
 942:./Hardware/MQTT/MqttKit.c **** 	
 943:./Hardware/MQTT/MqttKit.c **** 	switch(*qos)
 2747              		.loc 1 943 2 is_stmt 1 view .LVU885
 2748              		.loc 1 943 9 is_stmt 0 view .LVU886
 2749 0068 0D9B     		ldr	r3, [sp, #52]
 2750 006a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2751              		.loc 1 943 2 view .LVU887
 2752 006c 002B     		cmp	r3, #0
 2753 006e 4BD0     		beq	.L154
 2754 0070 013B     		subs	r3, r3, #1
 2755 0072 DBB2     		uxtb	r3, r3
 2756 0074 012B     		cmp	r3, #1
 2757 0076 00F28C80 		bhi	.L172
 944:./Hardware/MQTT/MqttKit.c **** 	{
 945:./Hardware/MQTT/MqttKit.c **** 		case MQTT_QOS_LEVEL0:									// qos0 have no packet identifier
 946:./Hardware/MQTT/MqttKit.c **** 			
 947:./Hardware/MQTT/MqttKit.c **** 			if(0 != dup)
 948:./Hardware/MQTT/MqttKit.c **** 				return 255;
 949:./Hardware/MQTT/MqttKit.c **** 
 950:./Hardware/MQTT/MqttKit.c **** 			*topic = MQTT_MallocBuffer(*topic_len + 1);			//为topic分配内存
 951:./Hardware/MQTT/MqttKit.c **** 			if(*topic == NULL)
 952:./Hardware/MQTT/MqttKit.c **** 				return 255;
 953:./Hardware/MQTT/MqttKit.c **** 			
 954:./Hardware/MQTT/MqttKit.c **** 			memset(*topic, 0, *topic_len + 1);
 955:./Hardware/MQTT/MqttKit.c **** 			memcpy(*topic, (int8 *)msgPtr + 2, *topic_len);		//复制数据
 956:./Hardware/MQTT/MqttKit.c **** 			
 957:./Hardware/MQTT/MqttKit.c **** 			*payload_len = remain_len - 2 - *topic_len;			//为payload分配内存
 958:./Hardware/MQTT/MqttKit.c **** 			*payload = MQTT_MallocBuffer(*payload_len + 1);
 959:./Hardware/MQTT/MqttKit.c **** 			if(*payload == NULL)								//如果失败
 960:./Hardware/MQTT/MqttKit.c **** 			{
 961:./Hardware/MQTT/MqttKit.c **** 				MQTT_FreeBuffer(*topic);						//则需要把topic的内存释放掉
 962:./Hardware/MQTT/MqttKit.c **** 				return 255;
 963:./Hardware/MQTT/MqttKit.c **** 			}
 964:./Hardware/MQTT/MqttKit.c **** 			
 965:./Hardware/MQTT/MqttKit.c **** 			memset(*payload, 0, *payload_len + 1);
 966:./Hardware/MQTT/MqttKit.c **** 			memcpy(*payload, (int8 *)msgPtr + 2 + *topic_len, *payload_len);
 967:./Hardware/MQTT/MqttKit.c **** 			
 968:./Hardware/MQTT/MqttKit.c **** 		break;
 969:./Hardware/MQTT/MqttKit.c **** 
 970:./Hardware/MQTT/MqttKit.c **** 		case MQTT_QOS_LEVEL1:
 971:./Hardware/MQTT/MqttKit.c **** 		case MQTT_QOS_LEVEL2:
 972:./Hardware/MQTT/MqttKit.c **** 			
 973:./Hardware/MQTT/MqttKit.c **** 			if(*topic_len + 2 > remain_len)
 2758              		.loc 1 973 4 is_stmt 1 view .LVU888
 974:./Hardware/MQTT/MqttKit.c **** 				return 255;
 975:./Hardware/MQTT/MqttKit.c **** 			
 976:./Hardware/MQTT/MqttKit.c **** 			*pkt_id = (uint16)msgPtr[*topic_len + 2] << 8 | msgPtr[*topic_len + 3];
 2759              		.loc 1 976 4 view .LVU889
ARM GAS  /tmp/ccYLmkow.s 			page 73


 2760              		.loc 1 976 28 is_stmt 0 view .LVU890
 2761 007a 4E44     		add	r6, r6, r9
 2762 007c B278     		ldrb	r2, [r6, #2]	@ zero_extendqisi2
 2763              		.loc 1 976 58 view .LVU891
 2764 007e F378     		ldrb	r3, [r6, #3]	@ zero_extendqisi2
 2765              		.loc 1 976 50 view .LVU892
 2766 0080 43EA0223 		orr	r3, r3, r2, lsl #8
 2767              		.loc 1 976 12 view .LVU893
 2768 0084 0E9A     		ldr	r2, [sp, #56]
 2769 0086 1380     		strh	r3, [r2]	@ movhi
 977:./Hardware/MQTT/MqttKit.c **** 			if(pkt_id == 0)
 2770              		.loc 1 977 4 is_stmt 1 view .LVU894
 2771              		.loc 1 977 6 is_stmt 0 view .LVU895
 2772 0088 002A     		cmp	r2, #0
 2773 008a 00F08880 		beq	.L166
 978:./Hardware/MQTT/MqttKit.c **** 				return 255;
 979:./Hardware/MQTT/MqttKit.c **** 			
 980:./Hardware/MQTT/MqttKit.c **** 			*topic = MQTT_MallocBuffer(*topic_len + 1);			//为topic分配内存
 2774              		.loc 1 980 4 is_stmt 1 view .LVU896
 2775              		.loc 1 980 31 is_stmt 0 view .LVU897
 2776 008e 2888     		ldrh	r0, [r5]
 2777              		.loc 1 980 13 view .LVU898
 2778 0090 0130     		adds	r0, r0, #1
 2779 0092 FFF7FEFF 		bl	malloc
 2780              	.LVL268:
 2781              		.loc 1 980 11 view .LVU899
 2782 0096 3860     		str	r0, [r7]
 981:./Hardware/MQTT/MqttKit.c **** 			if(*topic == NULL)
 2783              		.loc 1 981 4 is_stmt 1 view .LVU900
 2784              		.loc 1 981 6 is_stmt 0 view .LVU901
 2785 0098 0028     		cmp	r0, #0
 2786 009a 00F08280 		beq	.L167
 982:./Hardware/MQTT/MqttKit.c **** 				return 255;
 983:./Hardware/MQTT/MqttKit.c **** 			
 984:./Hardware/MQTT/MqttKit.c **** 			memset(*topic, 0, *topic_len + 1);
 2787              		.loc 1 984 4 is_stmt 1 view .LVU902
 2788              		.loc 1 984 22 is_stmt 0 view .LVU903
 2789 009e 2A88     		ldrh	r2, [r5]
 2790              		.loc 1 984 4 view .LVU904
 2791 00a0 0132     		adds	r2, r2, #1
 2792 00a2 0021     		movs	r1, #0
 2793 00a4 FFF7FEFF 		bl	memset
 2794              	.LVL269:
 985:./Hardware/MQTT/MqttKit.c **** 			memcpy(*topic, (int8 *)msgPtr + 2, *topic_len);		//复制数据
 2795              		.loc 1 985 4 is_stmt 1 view .LVU905
 2796 00a8 2A88     		ldrh	r2, [r5]
 2797 00aa 5146     		mov	r1, r10
 2798 00ac 3868     		ldr	r0, [r7]
 2799 00ae FFF7FEFF 		bl	memcpy
 2800              	.LVL270:
 986:./Hardware/MQTT/MqttKit.c **** 			
 987:./Hardware/MQTT/MqttKit.c **** 			*payload_len = remain_len - 4 - *topic_len;
 2801              		.loc 1 987 4 view .LVU906
 2802              		.loc 1 987 36 is_stmt 0 view .LVU907
 2803 00b2 2B88     		ldrh	r3, [r5]
 2804              		.loc 1 987 34 view .LVU908
 2805 00b4 0198     		ldr	r0, [sp, #4]
ARM GAS  /tmp/ccYLmkow.s 			page 74


 2806 00b6 C01A     		subs	r0, r0, r3
 2807 00b8 0438     		subs	r0, r0, #4
 2808 00ba 80B2     		uxth	r0, r0
 2809              		.loc 1 987 17 view .LVU909
 2810 00bc 0C9B     		ldr	r3, [sp, #48]
 2811 00be 1880     		strh	r0, [r3]	@ movhi
 988:./Hardware/MQTT/MqttKit.c **** 			*payload = MQTT_MallocBuffer(*payload_len + 1);		//为payload分配内存
 2812              		.loc 1 988 4 is_stmt 1 view .LVU910
 2813              		.loc 1 988 15 is_stmt 0 view .LVU911
 2814 00c0 0130     		adds	r0, r0, #1
 2815 00c2 FFF7FEFF 		bl	malloc
 2816              	.LVL271:
 2817              		.loc 1 988 13 view .LVU912
 2818 00c6 C8F80000 		str	r0, [r8]
 989:./Hardware/MQTT/MqttKit.c **** 			if(*payload == NULL)								//如果失败
 2819              		.loc 1 989 4 is_stmt 1 view .LVU913
 2820              		.loc 1 989 6 is_stmt 0 view .LVU914
 2821 00ca 0028     		cmp	r0, #0
 2822 00cc 51D0     		beq	.L173
 990:./Hardware/MQTT/MqttKit.c **** 			{
 991:./Hardware/MQTT/MqttKit.c **** 				MQTT_FreeBuffer(*topic);						//则需要把topic的内存释放掉
 992:./Hardware/MQTT/MqttKit.c **** 				return 255;
 993:./Hardware/MQTT/MqttKit.c **** 			}
 994:./Hardware/MQTT/MqttKit.c **** 			
 995:./Hardware/MQTT/MqttKit.c **** 			memset(*payload, 0, *payload_len + 1);
 2823              		.loc 1 995 4 is_stmt 1 view .LVU915
 2824              		.loc 1 995 24 is_stmt 0 view .LVU916
 2825 00ce 0C9B     		ldr	r3, [sp, #48]
 2826 00d0 1A88     		ldrh	r2, [r3]
 2827              		.loc 1 995 4 view .LVU917
 2828 00d2 0132     		adds	r2, r2, #1
 2829 00d4 0021     		movs	r1, #0
 2830 00d6 FFF7FEFF 		bl	memset
 2831              	.LVL272:
 996:./Hardware/MQTT/MqttKit.c **** 			memcpy(*payload, (int8 *)msgPtr + 4 + *topic_len, *payload_len);
 2832              		.loc 1 996 4 is_stmt 1 view .LVU918
 2833              		.loc 1 996 42 is_stmt 0 view .LVU919
 2834 00da 2988     		ldrh	r1, [r5]
 2835              		.loc 1 996 40 view .LVU920
 2836 00dc 0431     		adds	r1, r1, #4
 2837              		.loc 1 996 4 view .LVU921
 2838 00de 0C9B     		ldr	r3, [sp, #48]
 2839 00e0 1A88     		ldrh	r2, [r3]
 2840 00e2 4944     		add	r1, r1, r9
 2841 00e4 D8F80000 		ldr	r0, [r8]
 2842 00e8 FFF7FEFF 		bl	memcpy
 2843              	.LVL273:
 997:./Hardware/MQTT/MqttKit.c **** 			
 998:./Hardware/MQTT/MqttKit.c **** 		break;
 2844              		.loc 1 998 3 is_stmt 1 view .LVU922
 2845              	.L157:
 999:./Hardware/MQTT/MqttKit.c **** 
1000:./Hardware/MQTT/MqttKit.c **** 		default:
1001:./Hardware/MQTT/MqttKit.c **** 			return 255;
1002:./Hardware/MQTT/MqttKit.c **** 	}
1003:./Hardware/MQTT/MqttKit.c **** 	
1004:./Hardware/MQTT/MqttKit.c **** 	if(strchr((int8 *)topic, '+') || strchr((int8 *)topic, '#'))
ARM GAS  /tmp/ccYLmkow.s 			page 75


 2846              		.loc 1 1004 2 view .LVU923
 2847              		.loc 1 1004 5 is_stmt 0 view .LVU924
 2848 00ec 2B21     		movs	r1, #43
 2849 00ee 3846     		mov	r0, r7
 2850 00f0 FFF7FEFF 		bl	strchr
 2851              	.LVL274:
 2852              		.loc 1 1004 4 view .LVU925
 2853 00f4 0028     		cmp	r0, #0
 2854 00f6 56D1     		bne	.L168
 2855              		.loc 1 1004 35 discriminator 1 view .LVU926
 2856 00f8 2321     		movs	r1, #35
 2857 00fa 3846     		mov	r0, r7
 2858 00fc FFF7FEFF 		bl	strchr
 2859              	.LVL275:
 2860              		.loc 1 1004 32 discriminator 1 view .LVU927
 2861 0100 0028     		cmp	r0, #0
 2862 0102 42D0     		beq	.L153
1005:./Hardware/MQTT/MqttKit.c **** 		return 255;
 2863              		.loc 1 1005 10 view .LVU928
 2864 0104 FF24     		movs	r4, #255
 2865 0106 40E0     		b	.L153
 2866              	.L154:
 947:./Hardware/MQTT/MqttKit.c **** 				return 255;
 2867              		.loc 1 947 4 is_stmt 1 view .LVU929
 947:./Hardware/MQTT/MqttKit.c **** 				return 255;
 2868              		.loc 1 947 6 is_stmt 0 view .LVU930
 2869 0108 BBF1000F 		cmp	fp, #0
 2870 010c 43D1     		bne	.L164
 950:./Hardware/MQTT/MqttKit.c **** 			if(*topic == NULL)
 2871              		.loc 1 950 4 is_stmt 1 view .LVU931
 950:./Hardware/MQTT/MqttKit.c **** 			if(*topic == NULL)
 2872              		.loc 1 950 13 is_stmt 0 view .LVU932
 2873 010e 701C     		adds	r0, r6, #1
 2874 0110 FFF7FEFF 		bl	malloc
 2875              	.LVL276:
 950:./Hardware/MQTT/MqttKit.c **** 			if(*topic == NULL)
 2876              		.loc 1 950 11 view .LVU933
 2877 0114 3860     		str	r0, [r7]
 951:./Hardware/MQTT/MqttKit.c **** 				return 255;
 2878              		.loc 1 951 4 is_stmt 1 view .LVU934
 951:./Hardware/MQTT/MqttKit.c **** 				return 255;
 2879              		.loc 1 951 6 is_stmt 0 view .LVU935
 2880 0116 0028     		cmp	r0, #0
 2881 0118 3FD0     		beq	.L165
 954:./Hardware/MQTT/MqttKit.c **** 			memcpy(*topic, (int8 *)msgPtr + 2, *topic_len);		//复制数据
 2882              		.loc 1 954 4 is_stmt 1 view .LVU936
 954:./Hardware/MQTT/MqttKit.c **** 			memcpy(*topic, (int8 *)msgPtr + 2, *topic_len);		//复制数据
 2883              		.loc 1 954 22 is_stmt 0 view .LVU937
 2884 011a 2A88     		ldrh	r2, [r5]
 954:./Hardware/MQTT/MqttKit.c **** 			memcpy(*topic, (int8 *)msgPtr + 2, *topic_len);		//复制数据
 2885              		.loc 1 954 4 view .LVU938
 2886 011c 0132     		adds	r2, r2, #1
 2887 011e 0021     		movs	r1, #0
 2888 0120 FFF7FEFF 		bl	memset
 2889              	.LVL277:
 955:./Hardware/MQTT/MqttKit.c **** 			
 2890              		.loc 1 955 4 is_stmt 1 view .LVU939
ARM GAS  /tmp/ccYLmkow.s 			page 76


 2891 0124 2A88     		ldrh	r2, [r5]
 2892 0126 5146     		mov	r1, r10
 2893 0128 3868     		ldr	r0, [r7]
 2894 012a FFF7FEFF 		bl	memcpy
 2895              	.LVL278:
 957:./Hardware/MQTT/MqttKit.c **** 			*payload = MQTT_MallocBuffer(*payload_len + 1);
 2896              		.loc 1 957 4 view .LVU940
 957:./Hardware/MQTT/MqttKit.c **** 			*payload = MQTT_MallocBuffer(*payload_len + 1);
 2897              		.loc 1 957 36 is_stmt 0 view .LVU941
 2898 012e 2B88     		ldrh	r3, [r5]
 957:./Hardware/MQTT/MqttKit.c **** 			*payload = MQTT_MallocBuffer(*payload_len + 1);
 2899              		.loc 1 957 34 view .LVU942
 2900 0130 0198     		ldr	r0, [sp, #4]
 2901 0132 C01A     		subs	r0, r0, r3
 2902 0134 0238     		subs	r0, r0, #2
 2903 0136 80B2     		uxth	r0, r0
 957:./Hardware/MQTT/MqttKit.c **** 			*payload = MQTT_MallocBuffer(*payload_len + 1);
 2904              		.loc 1 957 17 view .LVU943
 2905 0138 0C9B     		ldr	r3, [sp, #48]
 2906 013a 1880     		strh	r0, [r3]	@ movhi
 958:./Hardware/MQTT/MqttKit.c **** 			if(*payload == NULL)								//如果失败
 2907              		.loc 1 958 4 is_stmt 1 view .LVU944
 958:./Hardware/MQTT/MqttKit.c **** 			if(*payload == NULL)								//如果失败
 2908              		.loc 1 958 15 is_stmt 0 view .LVU945
 2909 013c 0130     		adds	r0, r0, #1
 2910 013e FFF7FEFF 		bl	malloc
 2911              	.LVL279:
 958:./Hardware/MQTT/MqttKit.c **** 			if(*payload == NULL)								//如果失败
 2912              		.loc 1 958 13 view .LVU946
 2913 0142 C8F80000 		str	r0, [r8]
 959:./Hardware/MQTT/MqttKit.c **** 			{
 2914              		.loc 1 959 4 is_stmt 1 view .LVU947
 959:./Hardware/MQTT/MqttKit.c **** 			{
 2915              		.loc 1 959 6 is_stmt 0 view .LVU948
 2916 0146 78B1     		cbz	r0, .L174
 965:./Hardware/MQTT/MqttKit.c **** 			memcpy(*payload, (int8 *)msgPtr + 2 + *topic_len, *payload_len);
 2917              		.loc 1 965 4 is_stmt 1 view .LVU949
 965:./Hardware/MQTT/MqttKit.c **** 			memcpy(*payload, (int8 *)msgPtr + 2 + *topic_len, *payload_len);
 2918              		.loc 1 965 24 is_stmt 0 view .LVU950
 2919 0148 0C9B     		ldr	r3, [sp, #48]
 2920 014a 1A88     		ldrh	r2, [r3]
 965:./Hardware/MQTT/MqttKit.c **** 			memcpy(*payload, (int8 *)msgPtr + 2 + *topic_len, *payload_len);
 2921              		.loc 1 965 4 view .LVU951
 2922 014c 0132     		adds	r2, r2, #1
 2923 014e 0021     		movs	r1, #0
 2924 0150 FFF7FEFF 		bl	memset
 2925              	.LVL280:
 966:./Hardware/MQTT/MqttKit.c **** 			
 2926              		.loc 1 966 4 is_stmt 1 view .LVU952
 966:./Hardware/MQTT/MqttKit.c **** 			
 2927              		.loc 1 966 42 is_stmt 0 view .LVU953
 2928 0154 2988     		ldrh	r1, [r5]
 966:./Hardware/MQTT/MqttKit.c **** 			
 2929              		.loc 1 966 40 view .LVU954
 2930 0156 0231     		adds	r1, r1, #2
 966:./Hardware/MQTT/MqttKit.c **** 			
 2931              		.loc 1 966 4 view .LVU955
ARM GAS  /tmp/ccYLmkow.s 			page 77


 2932 0158 0C9B     		ldr	r3, [sp, #48]
 2933 015a 1A88     		ldrh	r2, [r3]
 2934 015c 4944     		add	r1, r1, r9
 2935 015e D8F80000 		ldr	r0, [r8]
 2936 0162 FFF7FEFF 		bl	memcpy
 2937              	.LVL281:
 968:./Hardware/MQTT/MqttKit.c **** 
 2938              		.loc 1 968 3 is_stmt 1 view .LVU956
 2939 0166 C1E7     		b	.L157
 2940              	.L174:
 961:./Hardware/MQTT/MqttKit.c **** 				return 255;
 2941              		.loc 1 961 5 view .LVU957
 2942 0168 3868     		ldr	r0, [r7]
 2943 016a FFF7FEFF 		bl	free
 2944              	.LVL282:
 962:./Hardware/MQTT/MqttKit.c **** 			}
 2945              		.loc 1 962 5 view .LVU958
 962:./Hardware/MQTT/MqttKit.c **** 			}
 2946              		.loc 1 962 12 is_stmt 0 view .LVU959
 2947 016e FF24     		movs	r4, #255
 2948 0170 0BE0     		b	.L153
 2949              	.L173:
 991:./Hardware/MQTT/MqttKit.c **** 				return 255;
 2950              		.loc 1 991 5 is_stmt 1 view .LVU960
 2951 0172 3868     		ldr	r0, [r7]
 2952 0174 FFF7FEFF 		bl	free
 2953              	.LVL283:
 992:./Hardware/MQTT/MqttKit.c **** 			}
 2954              		.loc 1 992 5 view .LVU961
 992:./Hardware/MQTT/MqttKit.c **** 			}
 2955              		.loc 1 992 12 is_stmt 0 view .LVU962
 2956 0178 FF24     		movs	r4, #255
 2957 017a 06E0     		b	.L153
 2958              	.LVL284:
 2959              	.L159:
 934:./Hardware/MQTT/MqttKit.c **** 	
 2960              		.loc 1 934 10 view .LVU963
 2961 017c FF24     		movs	r4, #255
 2962              	.LVL285:
 934:./Hardware/MQTT/MqttKit.c **** 	
 2963              		.loc 1 934 10 view .LVU964
 2964 017e 04E0     		b	.L153
 2965              	.L160:
 2966 0180 FF24     		movs	r4, #255
 2967 0182 02E0     		b	.L153
 2968              	.LVL286:
 2969              	.L161:
 938:./Hardware/MQTT/MqttKit.c **** 	
 2970              		.loc 1 938 10 view .LVU965
 2971 0184 FF24     		movs	r4, #255
 2972 0186 00E0     		b	.L153
 2973              	.L162:
 941:./Hardware/MQTT/MqttKit.c **** 	
 2974              		.loc 1 941 10 view .LVU966
 2975 0188 0F24     		movs	r4, #15
 2976              	.L153:
1006:./Hardware/MQTT/MqttKit.c **** 
ARM GAS  /tmp/ccYLmkow.s 			page 78


1007:./Hardware/MQTT/MqttKit.c **** 	return 0;
1008:./Hardware/MQTT/MqttKit.c **** 
1009:./Hardware/MQTT/MqttKit.c **** }
 2977              		.loc 1 1009 1 view .LVU967
 2978 018a 2046     		mov	r0, r4
 2979 018c 03B0     		add	sp, sp, #12
 2980              	.LCFI35:
 2981              		.cfi_remember_state
 2982              		.cfi_def_cfa_offset 36
 2983              		@ sp needed
 2984 018e BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 2985              	.LVL287:
 2986              	.L172:
 2987              	.LCFI36:
 2988              		.cfi_restore_state
 943:./Hardware/MQTT/MqttKit.c **** 	{
 2989              		.loc 1 943 2 view .LVU968
 2990 0192 FF24     		movs	r4, #255
 2991 0194 F9E7     		b	.L153
 2992              	.L164:
 948:./Hardware/MQTT/MqttKit.c **** 
 2993              		.loc 1 948 12 view .LVU969
 2994 0196 FF24     		movs	r4, #255
 2995 0198 F7E7     		b	.L153
 2996              	.L165:
 952:./Hardware/MQTT/MqttKit.c **** 			
 2997              		.loc 1 952 12 view .LVU970
 2998 019a FF24     		movs	r4, #255
 2999 019c F5E7     		b	.L153
 3000              	.L166:
 978:./Hardware/MQTT/MqttKit.c **** 			
 3001              		.loc 1 978 12 view .LVU971
 3002 019e FF24     		movs	r4, #255
 3003 01a0 F3E7     		b	.L153
 3004              	.L167:
 982:./Hardware/MQTT/MqttKit.c **** 			
 3005              		.loc 1 982 12 view .LVU972
 3006 01a2 FF24     		movs	r4, #255
 3007 01a4 F1E7     		b	.L153
 3008              	.L168:
1005:./Hardware/MQTT/MqttKit.c **** 
 3009              		.loc 1 1005 10 view .LVU973
 3010 01a6 FF24     		movs	r4, #255
 3011 01a8 EFE7     		b	.L153
 3012              	.L176:
 3013 01aa 00BF     		.align	2
 3014              	.L175:
 3015 01ac 00000000 		.word	.LC0
 3016              		.cfi_endproc
 3017              	.LFE16:
 3019              		.section	.text.MQTT_PacketPublishAck,"ax",%progbits
 3020              		.align	1
 3021              		.global	MQTT_PacketPublishAck
 3022              		.syntax unified
 3023              		.thumb
 3024              		.thumb_func
 3025              		.fpu softvfp
ARM GAS  /tmp/ccYLmkow.s 			page 79


 3027              	MQTT_PacketPublishAck:
 3028              	.LVL288:
 3029              	.LFB17:
1010:./Hardware/MQTT/MqttKit.c **** 
1011:./Hardware/MQTT/MqttKit.c **** //==========================================================
1012:./Hardware/MQTT/MqttKit.c **** //	函数名称：	MQTT_PacketPublishAck
1013:./Hardware/MQTT/MqttKit.c **** //
1014:./Hardware/MQTT/MqttKit.c **** //	函数功能：	Publish Ack消息组包
1015:./Hardware/MQTT/MqttKit.c **** //
1016:./Hardware/MQTT/MqttKit.c **** //	入口参数：	pkt_id：packet id
1017:./Hardware/MQTT/MqttKit.c **** //				mqttPacket：包指针
1018:./Hardware/MQTT/MqttKit.c **** //
1019:./Hardware/MQTT/MqttKit.c **** //	返回参数：	0-成功		1-失败原因
1020:./Hardware/MQTT/MqttKit.c **** //
1021:./Hardware/MQTT/MqttKit.c **** //	说明：		当收到的Publish消息的QoS等级为1时，需要Ack回复
1022:./Hardware/MQTT/MqttKit.c **** //==========================================================
1023:./Hardware/MQTT/MqttKit.c **** uint1 MQTT_PacketPublishAck(uint16 pkt_id, MQTT_PACKET_STRUCTURE *mqttPacket)
1024:./Hardware/MQTT/MqttKit.c **** {
 3030              		.loc 1 1024 1 is_stmt 1 view -0
 3031              		.cfi_startproc
 3032              		@ args = 0, pretend = 0, frame = 0
 3033              		@ frame_needed = 0, uses_anonymous_args = 0
 3034              		.loc 1 1024 1 is_stmt 0 view .LVU975
 3035 0000 38B5     		push	{r3, r4, r5, lr}
 3036              	.LCFI37:
 3037              		.cfi_def_cfa_offset 16
 3038              		.cfi_offset 3, -16
 3039              		.cfi_offset 4, -12
 3040              		.cfi_offset 5, -8
 3041              		.cfi_offset 14, -4
 3042 0002 0546     		mov	r5, r0
 3043 0004 0C46     		mov	r4, r1
1025:./Hardware/MQTT/MqttKit.c **** 
1026:./Hardware/MQTT/MqttKit.c **** 	MQTT_NewBuffer(mqttPacket, 4);
 3044              		.loc 1 1026 2 is_stmt 1 view .LVU976
 3045 0006 0421     		movs	r1, #4
 3046              	.LVL289:
 3047              		.loc 1 1026 2 is_stmt 0 view .LVU977
 3048 0008 2046     		mov	r0, r4
 3049              	.LVL290:
 3050              		.loc 1 1026 2 view .LVU978
 3051 000a FFF7FEFF 		bl	MQTT_NewBuffer
 3052              	.LVL291:
1027:./Hardware/MQTT/MqttKit.c **** 	if(mqttPacket->_data == NULL)
 3053              		.loc 1 1027 2 is_stmt 1 view .LVU979
 3054              		.loc 1 1027 15 is_stmt 0 view .LVU980
 3055 000e 2368     		ldr	r3, [r4]
 3056              		.loc 1 1027 4 view .LVU981
 3057 0010 BBB1     		cbz	r3, .L179
1028:./Hardware/MQTT/MqttKit.c **** 		return 1;
1029:./Hardware/MQTT/MqttKit.c **** 	
1030:./Hardware/MQTT/MqttKit.c **** /*************************************固定头部***********************************************/
1031:./Hardware/MQTT/MqttKit.c **** 	
1032:./Hardware/MQTT/MqttKit.c **** 	//固定头部----------------------头部消息-------------------------------------------------
1033:./Hardware/MQTT/MqttKit.c **** 	mqttPacket->_data[mqttPacket->_len++] = MQTT_PKT_PUBACK << 4;
 3058              		.loc 1 1033 2 is_stmt 1 view .LVU982
 3059              		.loc 1 1033 30 is_stmt 0 view .LVU983
ARM GAS  /tmp/ccYLmkow.s 			page 80


 3060 0012 6268     		ldr	r2, [r4, #4]
 3061              		.loc 1 1033 36 view .LVU984
 3062 0014 511C     		adds	r1, r2, #1
 3063 0016 6160     		str	r1, [r4, #4]
 3064              		.loc 1 1033 40 view .LVU985
 3065 0018 4021     		movs	r1, #64
 3066 001a 9954     		strb	r1, [r3, r2]
1034:./Hardware/MQTT/MqttKit.c **** 	
1035:./Hardware/MQTT/MqttKit.c **** 	//固定头部----------------------剩余长度-------------------------------------------------
1036:./Hardware/MQTT/MqttKit.c **** 	mqttPacket->_data[mqttPacket->_len++] = 2;
 3067              		.loc 1 1036 2 is_stmt 1 view .LVU986
 3068              		.loc 1 1036 12 is_stmt 0 view .LVU987
 3069 001c 2268     		ldr	r2, [r4]
 3070              		.loc 1 1036 30 view .LVU988
 3071 001e 6368     		ldr	r3, [r4, #4]
 3072              		.loc 1 1036 36 view .LVU989
 3073 0020 591C     		adds	r1, r3, #1
 3074 0022 6160     		str	r1, [r4, #4]
 3075              		.loc 1 1036 40 view .LVU990
 3076 0024 0221     		movs	r1, #2
 3077 0026 D154     		strb	r1, [r2, r3]
1037:./Hardware/MQTT/MqttKit.c **** 	
1038:./Hardware/MQTT/MqttKit.c **** /*************************************可变头部***********************************************/
1039:./Hardware/MQTT/MqttKit.c **** 	
1040:./Hardware/MQTT/MqttKit.c **** 	//可变头部----------------------pkt_id长度-----------------------------------------------
1041:./Hardware/MQTT/MqttKit.c **** 	mqttPacket->_data[mqttPacket->_len++] = pkt_id >> 8;
 3078              		.loc 1 1041 2 is_stmt 1 view .LVU991
 3079              		.loc 1 1041 12 is_stmt 0 view .LVU992
 3080 0028 2268     		ldr	r2, [r4]
 3081              		.loc 1 1041 30 view .LVU993
 3082 002a 6368     		ldr	r3, [r4, #4]
 3083              		.loc 1 1041 36 view .LVU994
 3084 002c 591C     		adds	r1, r3, #1
 3085 002e 6160     		str	r1, [r4, #4]
 3086              		.loc 1 1041 40 view .LVU995
 3087 0030 290A     		lsrs	r1, r5, #8
 3088 0032 D154     		strb	r1, [r2, r3]
1042:./Hardware/MQTT/MqttKit.c **** 	mqttPacket->_data[mqttPacket->_len++] = pkt_id & 0xff;
 3089              		.loc 1 1042 2 is_stmt 1 view .LVU996
 3090              		.loc 1 1042 12 is_stmt 0 view .LVU997
 3091 0034 2268     		ldr	r2, [r4]
 3092              		.loc 1 1042 30 view .LVU998
 3093 0036 6368     		ldr	r3, [r4, #4]
 3094              		.loc 1 1042 36 view .LVU999
 3095 0038 591C     		adds	r1, r3, #1
 3096 003a 6160     		str	r1, [r4, #4]
 3097              		.loc 1 1042 40 view .LVU1000
 3098 003c D554     		strb	r5, [r2, r3]
1043:./Hardware/MQTT/MqttKit.c **** 	
1044:./Hardware/MQTT/MqttKit.c **** 	return 0;
 3099              		.loc 1 1044 2 is_stmt 1 view .LVU1001
 3100              		.loc 1 1044 9 is_stmt 0 view .LVU1002
 3101 003e 0020     		movs	r0, #0
 3102              	.L178:
1045:./Hardware/MQTT/MqttKit.c **** 
1046:./Hardware/MQTT/MqttKit.c **** }
 3103              		.loc 1 1046 1 view .LVU1003
ARM GAS  /tmp/ccYLmkow.s 			page 81


 3104 0040 38BD     		pop	{r3, r4, r5, pc}
 3105              	.LVL292:
 3106              	.L179:
1028:./Hardware/MQTT/MqttKit.c **** 	
 3107              		.loc 1 1028 10 view .LVU1004
 3108 0042 0120     		movs	r0, #1
 3109 0044 FCE7     		b	.L178
 3110              		.cfi_endproc
 3111              	.LFE17:
 3113              		.section	.text.MQTT_UnPacketPublishAck,"ax",%progbits
 3114              		.align	1
 3115              		.global	MQTT_UnPacketPublishAck
 3116              		.syntax unified
 3117              		.thumb
 3118              		.thumb_func
 3119              		.fpu softvfp
 3121              	MQTT_UnPacketPublishAck:
 3122              	.LVL293:
 3123              	.LFB18:
1047:./Hardware/MQTT/MqttKit.c **** 
1048:./Hardware/MQTT/MqttKit.c **** //==========================================================
1049:./Hardware/MQTT/MqttKit.c **** //	函数名称：	MQTT_UnPacketPublishAck
1050:./Hardware/MQTT/MqttKit.c **** //
1051:./Hardware/MQTT/MqttKit.c **** //	函数功能：	Publish Ack消息解包
1052:./Hardware/MQTT/MqttKit.c **** //
1053:./Hardware/MQTT/MqttKit.c **** //	入口参数：	rev_data：收到的数据
1054:./Hardware/MQTT/MqttKit.c **** //
1055:./Hardware/MQTT/MqttKit.c **** //	返回参数：	0-成功		1-失败原因
1056:./Hardware/MQTT/MqttKit.c **** //
1057:./Hardware/MQTT/MqttKit.c **** //	说明：		
1058:./Hardware/MQTT/MqttKit.c **** //==========================================================
1059:./Hardware/MQTT/MqttKit.c **** uint1 MQTT_UnPacketPublishAck(uint8 *rev_data)
1060:./Hardware/MQTT/MqttKit.c **** {
 3124              		.loc 1 1060 1 is_stmt 1 view -0
 3125              		.cfi_startproc
 3126              		@ args = 0, pretend = 0, frame = 0
 3127              		@ frame_needed = 0, uses_anonymous_args = 0
 3128              		@ link register save eliminated.
1061:./Hardware/MQTT/MqttKit.c **** 
1062:./Hardware/MQTT/MqttKit.c **** 	if(rev_data[1] != 2)
 3129              		.loc 1 1062 2 view .LVU1006
 3130              		.loc 1 1062 13 is_stmt 0 view .LVU1007
 3131 0000 4378     		ldrb	r3, [r0, #1]	@ zero_extendqisi2
 3132              		.loc 1 1062 4 view .LVU1008
 3133 0002 022B     		cmp	r3, #2
 3134 0004 06D1     		bne	.L183
1063:./Hardware/MQTT/MqttKit.c **** 		return 1;
1064:./Hardware/MQTT/MqttKit.c **** 
1065:./Hardware/MQTT/MqttKit.c **** 	if(rev_data[2] == MOSQ_MSB(MQTT_PUBLISH_ID) && rev_data[3] == MOSQ_LSB(MQTT_PUBLISH_ID))
 3135              		.loc 1 1065 2 is_stmt 1 view .LVU1009
 3136              		.loc 1 1065 13 is_stmt 0 view .LVU1010
 3137 0006 8378     		ldrb	r3, [r0, #2]	@ zero_extendqisi2
 3138              		.loc 1 1065 4 view .LVU1011
 3139 0008 33B9     		cbnz	r3, .L184
 3140              		.loc 1 1065 57 discriminator 1 view .LVU1012
 3141 000a C378     		ldrb	r3, [r0, #3]	@ zero_extendqisi2
 3142              		.loc 1 1065 46 discriminator 1 view .LVU1013
ARM GAS  /tmp/ccYLmkow.s 			page 82


 3143 000c 0A2B     		cmp	r3, #10
 3144 000e 05D0     		beq	.L185
1066:./Hardware/MQTT/MqttKit.c **** 		return 0;
1067:./Hardware/MQTT/MqttKit.c **** 	else
1068:./Hardware/MQTT/MqttKit.c **** 		return 1;
 3145              		.loc 1 1068 10 view .LVU1014
 3146 0010 0120     		movs	r0, #1
 3147              	.LVL294:
 3148              		.loc 1 1068 10 view .LVU1015
 3149 0012 7047     		bx	lr
 3150              	.LVL295:
 3151              	.L183:
1063:./Hardware/MQTT/MqttKit.c **** 		return 1;
 3152              		.loc 1 1063 10 view .LVU1016
 3153 0014 0120     		movs	r0, #1
 3154              	.LVL296:
1063:./Hardware/MQTT/MqttKit.c **** 		return 1;
 3155              		.loc 1 1063 10 view .LVU1017
 3156 0016 7047     		bx	lr
 3157              	.LVL297:
 3158              	.L184:
 3159              		.loc 1 1068 10 view .LVU1018
 3160 0018 0120     		movs	r0, #1
 3161              	.LVL298:
 3162              		.loc 1 1068 10 view .LVU1019
 3163 001a 7047     		bx	lr
 3164              	.LVL299:
 3165              	.L185:
1066:./Hardware/MQTT/MqttKit.c **** 		return 0;
 3166              		.loc 1 1066 10 view .LVU1020
 3167 001c 0020     		movs	r0, #0
 3168              	.LVL300:
1069:./Hardware/MQTT/MqttKit.c **** 
1070:./Hardware/MQTT/MqttKit.c **** }
 3169              		.loc 1 1070 1 view .LVU1021
 3170 001e 7047     		bx	lr
 3171              		.cfi_endproc
 3172              	.LFE18:
 3174              		.section	.text.MQTT_PacketPublishRec,"ax",%progbits
 3175              		.align	1
 3176              		.global	MQTT_PacketPublishRec
 3177              		.syntax unified
 3178              		.thumb
 3179              		.thumb_func
 3180              		.fpu softvfp
 3182              	MQTT_PacketPublishRec:
 3183              	.LVL301:
 3184              	.LFB19:
1071:./Hardware/MQTT/MqttKit.c **** 
1072:./Hardware/MQTT/MqttKit.c **** //==========================================================
1073:./Hardware/MQTT/MqttKit.c **** //	函数名称：	MQTT_PacketPublishRec
1074:./Hardware/MQTT/MqttKit.c **** //
1075:./Hardware/MQTT/MqttKit.c **** //	函数功能：	Publish Rec消息组包
1076:./Hardware/MQTT/MqttKit.c **** //
1077:./Hardware/MQTT/MqttKit.c **** //	入口参数：	pkt_id：packet id
1078:./Hardware/MQTT/MqttKit.c **** //				mqttPacket：包指针
1079:./Hardware/MQTT/MqttKit.c **** //
ARM GAS  /tmp/ccYLmkow.s 			page 83


1080:./Hardware/MQTT/MqttKit.c **** //	返回参数：	0-成功		1-失败原因
1081:./Hardware/MQTT/MqttKit.c **** //
1082:./Hardware/MQTT/MqttKit.c **** //	说明：		当收到的Publish消息的QoS等级为2时，先收到rec
1083:./Hardware/MQTT/MqttKit.c **** //==========================================================
1084:./Hardware/MQTT/MqttKit.c **** uint1 MQTT_PacketPublishRec(uint16 pkt_id, MQTT_PACKET_STRUCTURE *mqttPacket)
1085:./Hardware/MQTT/MqttKit.c **** {
 3185              		.loc 1 1085 1 is_stmt 1 view -0
 3186              		.cfi_startproc
 3187              		@ args = 0, pretend = 0, frame = 0
 3188              		@ frame_needed = 0, uses_anonymous_args = 0
 3189              		.loc 1 1085 1 is_stmt 0 view .LVU1023
 3190 0000 38B5     		push	{r3, r4, r5, lr}
 3191              	.LCFI38:
 3192              		.cfi_def_cfa_offset 16
 3193              		.cfi_offset 3, -16
 3194              		.cfi_offset 4, -12
 3195              		.cfi_offset 5, -8
 3196              		.cfi_offset 14, -4
 3197 0002 0546     		mov	r5, r0
 3198 0004 0C46     		mov	r4, r1
1086:./Hardware/MQTT/MqttKit.c **** 
1087:./Hardware/MQTT/MqttKit.c **** 	MQTT_NewBuffer(mqttPacket, 4);
 3199              		.loc 1 1087 2 is_stmt 1 view .LVU1024
 3200 0006 0421     		movs	r1, #4
 3201              	.LVL302:
 3202              		.loc 1 1087 2 is_stmt 0 view .LVU1025
 3203 0008 2046     		mov	r0, r4
 3204              	.LVL303:
 3205              		.loc 1 1087 2 view .LVU1026
 3206 000a FFF7FEFF 		bl	MQTT_NewBuffer
 3207              	.LVL304:
1088:./Hardware/MQTT/MqttKit.c **** 	if(mqttPacket->_data == NULL)
 3208              		.loc 1 1088 2 is_stmt 1 view .LVU1027
 3209              		.loc 1 1088 15 is_stmt 0 view .LVU1028
 3210 000e 2368     		ldr	r3, [r4]
 3211              		.loc 1 1088 4 view .LVU1029
 3212 0010 BBB1     		cbz	r3, .L188
1089:./Hardware/MQTT/MqttKit.c **** 		return 1;
1090:./Hardware/MQTT/MqttKit.c **** 	
1091:./Hardware/MQTT/MqttKit.c **** /*************************************固定头部***********************************************/
1092:./Hardware/MQTT/MqttKit.c **** 	
1093:./Hardware/MQTT/MqttKit.c **** 	//固定头部----------------------头部消息-------------------------------------------------
1094:./Hardware/MQTT/MqttKit.c **** 	mqttPacket->_data[mqttPacket->_len++] = MQTT_PKT_PUBREC << 4;
 3213              		.loc 1 1094 2 is_stmt 1 view .LVU1030
 3214              		.loc 1 1094 30 is_stmt 0 view .LVU1031
 3215 0012 6268     		ldr	r2, [r4, #4]
 3216              		.loc 1 1094 36 view .LVU1032
 3217 0014 511C     		adds	r1, r2, #1
 3218 0016 6160     		str	r1, [r4, #4]
 3219              		.loc 1 1094 40 view .LVU1033
 3220 0018 5021     		movs	r1, #80
 3221 001a 9954     		strb	r1, [r3, r2]
1095:./Hardware/MQTT/MqttKit.c **** 	
1096:./Hardware/MQTT/MqttKit.c **** 	//固定头部----------------------剩余长度-------------------------------------------------
1097:./Hardware/MQTT/MqttKit.c **** 	mqttPacket->_data[mqttPacket->_len++] = 2;
 3222              		.loc 1 1097 2 is_stmt 1 view .LVU1034
 3223              		.loc 1 1097 12 is_stmt 0 view .LVU1035
ARM GAS  /tmp/ccYLmkow.s 			page 84


 3224 001c 2268     		ldr	r2, [r4]
 3225              		.loc 1 1097 30 view .LVU1036
 3226 001e 6368     		ldr	r3, [r4, #4]
 3227              		.loc 1 1097 36 view .LVU1037
 3228 0020 591C     		adds	r1, r3, #1
 3229 0022 6160     		str	r1, [r4, #4]
 3230              		.loc 1 1097 40 view .LVU1038
 3231 0024 0221     		movs	r1, #2
 3232 0026 D154     		strb	r1, [r2, r3]
1098:./Hardware/MQTT/MqttKit.c **** 	
1099:./Hardware/MQTT/MqttKit.c **** /*************************************可变头部***********************************************/
1100:./Hardware/MQTT/MqttKit.c **** 	
1101:./Hardware/MQTT/MqttKit.c **** 	//可变头部----------------------pkt_id长度-----------------------------------------------
1102:./Hardware/MQTT/MqttKit.c **** 	mqttPacket->_data[mqttPacket->_len++] = pkt_id >> 8;
 3233              		.loc 1 1102 2 is_stmt 1 view .LVU1039
 3234              		.loc 1 1102 12 is_stmt 0 view .LVU1040
 3235 0028 2268     		ldr	r2, [r4]
 3236              		.loc 1 1102 30 view .LVU1041
 3237 002a 6368     		ldr	r3, [r4, #4]
 3238              		.loc 1 1102 36 view .LVU1042
 3239 002c 591C     		adds	r1, r3, #1
 3240 002e 6160     		str	r1, [r4, #4]
 3241              		.loc 1 1102 40 view .LVU1043
 3242 0030 290A     		lsrs	r1, r5, #8
 3243 0032 D154     		strb	r1, [r2, r3]
1103:./Hardware/MQTT/MqttKit.c **** 	mqttPacket->_data[mqttPacket->_len++] = pkt_id & 0xff;
 3244              		.loc 1 1103 2 is_stmt 1 view .LVU1044
 3245              		.loc 1 1103 12 is_stmt 0 view .LVU1045
 3246 0034 2268     		ldr	r2, [r4]
 3247              		.loc 1 1103 30 view .LVU1046
 3248 0036 6368     		ldr	r3, [r4, #4]
 3249              		.loc 1 1103 36 view .LVU1047
 3250 0038 591C     		adds	r1, r3, #1
 3251 003a 6160     		str	r1, [r4, #4]
 3252              		.loc 1 1103 40 view .LVU1048
 3253 003c D554     		strb	r5, [r2, r3]
1104:./Hardware/MQTT/MqttKit.c **** 	
1105:./Hardware/MQTT/MqttKit.c **** 	return 0;
 3254              		.loc 1 1105 2 is_stmt 1 view .LVU1049
 3255              		.loc 1 1105 9 is_stmt 0 view .LVU1050
 3256 003e 0020     		movs	r0, #0
 3257              	.L187:
1106:./Hardware/MQTT/MqttKit.c **** 
1107:./Hardware/MQTT/MqttKit.c **** }
 3258              		.loc 1 1107 1 view .LVU1051
 3259 0040 38BD     		pop	{r3, r4, r5, pc}
 3260              	.LVL305:
 3261              	.L188:
1089:./Hardware/MQTT/MqttKit.c **** 	
 3262              		.loc 1 1089 10 view .LVU1052
 3263 0042 0120     		movs	r0, #1
 3264 0044 FCE7     		b	.L187
 3265              		.cfi_endproc
 3266              	.LFE19:
 3268              		.section	.text.MQTT_UnPacketPublishRec,"ax",%progbits
 3269              		.align	1
 3270              		.global	MQTT_UnPacketPublishRec
ARM GAS  /tmp/ccYLmkow.s 			page 85


 3271              		.syntax unified
 3272              		.thumb
 3273              		.thumb_func
 3274              		.fpu softvfp
 3276              	MQTT_UnPacketPublishRec:
 3277              	.LVL306:
 3278              	.LFB20:
1108:./Hardware/MQTT/MqttKit.c **** 
1109:./Hardware/MQTT/MqttKit.c **** //==========================================================
1110:./Hardware/MQTT/MqttKit.c **** //	函数名称：	MQTT_UnPacketPublishRec
1111:./Hardware/MQTT/MqttKit.c **** //
1112:./Hardware/MQTT/MqttKit.c **** //	函数功能：	Publish Rec消息解包
1113:./Hardware/MQTT/MqttKit.c **** //
1114:./Hardware/MQTT/MqttKit.c **** //	入口参数：	rev_data：接收到的数据
1115:./Hardware/MQTT/MqttKit.c **** //
1116:./Hardware/MQTT/MqttKit.c **** //	返回参数：	0-成功		1-失败
1117:./Hardware/MQTT/MqttKit.c **** //
1118:./Hardware/MQTT/MqttKit.c **** //	说明：		
1119:./Hardware/MQTT/MqttKit.c **** //==========================================================
1120:./Hardware/MQTT/MqttKit.c **** uint1 MQTT_UnPacketPublishRec(uint8 *rev_data)
1121:./Hardware/MQTT/MqttKit.c **** {
 3279              		.loc 1 1121 1 is_stmt 1 view -0
 3280              		.cfi_startproc
 3281              		@ args = 0, pretend = 0, frame = 0
 3282              		@ frame_needed = 0, uses_anonymous_args = 0
 3283              		@ link register save eliminated.
1122:./Hardware/MQTT/MqttKit.c **** 
1123:./Hardware/MQTT/MqttKit.c **** 	if(rev_data[1] != 2)
 3284              		.loc 1 1123 2 view .LVU1054
 3285              		.loc 1 1123 13 is_stmt 0 view .LVU1055
 3286 0000 4378     		ldrb	r3, [r0, #1]	@ zero_extendqisi2
 3287              		.loc 1 1123 4 view .LVU1056
 3288 0002 022B     		cmp	r3, #2
 3289 0004 06D1     		bne	.L192
1124:./Hardware/MQTT/MqttKit.c **** 		return 1;
1125:./Hardware/MQTT/MqttKit.c **** 
1126:./Hardware/MQTT/MqttKit.c **** 	if(rev_data[2] == MOSQ_MSB(MQTT_PUBLISH_ID) && rev_data[3] == MOSQ_LSB(MQTT_PUBLISH_ID))
 3290              		.loc 1 1126 2 is_stmt 1 view .LVU1057
 3291              		.loc 1 1126 13 is_stmt 0 view .LVU1058
 3292 0006 8378     		ldrb	r3, [r0, #2]	@ zero_extendqisi2
 3293              		.loc 1 1126 4 view .LVU1059
 3294 0008 33B9     		cbnz	r3, .L193
 3295              		.loc 1 1126 57 discriminator 1 view .LVU1060
 3296 000a C378     		ldrb	r3, [r0, #3]	@ zero_extendqisi2
 3297              		.loc 1 1126 46 discriminator 1 view .LVU1061
 3298 000c 0A2B     		cmp	r3, #10
 3299 000e 05D0     		beq	.L194
1127:./Hardware/MQTT/MqttKit.c **** 		return 0;
1128:./Hardware/MQTT/MqttKit.c **** 	else
1129:./Hardware/MQTT/MqttKit.c **** 		return 1;
 3300              		.loc 1 1129 10 view .LVU1062
 3301 0010 0120     		movs	r0, #1
 3302              	.LVL307:
 3303              		.loc 1 1129 10 view .LVU1063
 3304 0012 7047     		bx	lr
 3305              	.LVL308:
 3306              	.L192:
ARM GAS  /tmp/ccYLmkow.s 			page 86


1124:./Hardware/MQTT/MqttKit.c **** 		return 1;
 3307              		.loc 1 1124 10 view .LVU1064
 3308 0014 0120     		movs	r0, #1
 3309              	.LVL309:
1124:./Hardware/MQTT/MqttKit.c **** 		return 1;
 3310              		.loc 1 1124 10 view .LVU1065
 3311 0016 7047     		bx	lr
 3312              	.LVL310:
 3313              	.L193:
 3314              		.loc 1 1129 10 view .LVU1066
 3315 0018 0120     		movs	r0, #1
 3316              	.LVL311:
 3317              		.loc 1 1129 10 view .LVU1067
 3318 001a 7047     		bx	lr
 3319              	.LVL312:
 3320              	.L194:
1127:./Hardware/MQTT/MqttKit.c **** 		return 0;
 3321              		.loc 1 1127 10 view .LVU1068
 3322 001c 0020     		movs	r0, #0
 3323              	.LVL313:
1130:./Hardware/MQTT/MqttKit.c **** 
1131:./Hardware/MQTT/MqttKit.c **** }
 3324              		.loc 1 1131 1 view .LVU1069
 3325 001e 7047     		bx	lr
 3326              		.cfi_endproc
 3327              	.LFE20:
 3329              		.section	.text.MQTT_PacketPublishRel,"ax",%progbits
 3330              		.align	1
 3331              		.global	MQTT_PacketPublishRel
 3332              		.syntax unified
 3333              		.thumb
 3334              		.thumb_func
 3335              		.fpu softvfp
 3337              	MQTT_PacketPublishRel:
 3338              	.LVL314:
 3339              	.LFB21:
1132:./Hardware/MQTT/MqttKit.c **** 
1133:./Hardware/MQTT/MqttKit.c **** //==========================================================
1134:./Hardware/MQTT/MqttKit.c **** //	函数名称：	MQTT_PacketPublishRel
1135:./Hardware/MQTT/MqttKit.c **** //
1136:./Hardware/MQTT/MqttKit.c **** //	函数功能：	Publish Rel消息组包
1137:./Hardware/MQTT/MqttKit.c **** //
1138:./Hardware/MQTT/MqttKit.c **** //	入口参数：	pkt_id：packet id
1139:./Hardware/MQTT/MqttKit.c **** //				mqttPacket：包指针
1140:./Hardware/MQTT/MqttKit.c **** //
1141:./Hardware/MQTT/MqttKit.c **** //	返回参数：	0-成功		1-失败原因
1142:./Hardware/MQTT/MqttKit.c **** //
1143:./Hardware/MQTT/MqttKit.c **** //	说明：		当收到的Publish消息的QoS等级为2时，先收到rec，再回复rel
1144:./Hardware/MQTT/MqttKit.c **** //==========================================================
1145:./Hardware/MQTT/MqttKit.c **** uint1 MQTT_PacketPublishRel(uint16 pkt_id, MQTT_PACKET_STRUCTURE *mqttPacket)
1146:./Hardware/MQTT/MqttKit.c **** {
 3340              		.loc 1 1146 1 is_stmt 1 view -0
 3341              		.cfi_startproc
 3342              		@ args = 0, pretend = 0, frame = 0
 3343              		@ frame_needed = 0, uses_anonymous_args = 0
 3344              		.loc 1 1146 1 is_stmt 0 view .LVU1071
 3345 0000 38B5     		push	{r3, r4, r5, lr}
ARM GAS  /tmp/ccYLmkow.s 			page 87


 3346              	.LCFI39:
 3347              		.cfi_def_cfa_offset 16
 3348              		.cfi_offset 3, -16
 3349              		.cfi_offset 4, -12
 3350              		.cfi_offset 5, -8
 3351              		.cfi_offset 14, -4
 3352 0002 0546     		mov	r5, r0
 3353 0004 0C46     		mov	r4, r1
1147:./Hardware/MQTT/MqttKit.c **** 
1148:./Hardware/MQTT/MqttKit.c **** 	MQTT_NewBuffer(mqttPacket, 4);
 3354              		.loc 1 1148 2 is_stmt 1 view .LVU1072
 3355 0006 0421     		movs	r1, #4
 3356              	.LVL315:
 3357              		.loc 1 1148 2 is_stmt 0 view .LVU1073
 3358 0008 2046     		mov	r0, r4
 3359              	.LVL316:
 3360              		.loc 1 1148 2 view .LVU1074
 3361 000a FFF7FEFF 		bl	MQTT_NewBuffer
 3362              	.LVL317:
1149:./Hardware/MQTT/MqttKit.c **** 	if(mqttPacket->_data == NULL)
 3363              		.loc 1 1149 2 is_stmt 1 view .LVU1075
 3364              		.loc 1 1149 15 is_stmt 0 view .LVU1076
 3365 000e 2368     		ldr	r3, [r4]
 3366              		.loc 1 1149 4 view .LVU1077
 3367 0010 BBB1     		cbz	r3, .L197
1150:./Hardware/MQTT/MqttKit.c **** 		return 1;
1151:./Hardware/MQTT/MqttKit.c **** 	
1152:./Hardware/MQTT/MqttKit.c **** /*************************************固定头部***********************************************/
1153:./Hardware/MQTT/MqttKit.c **** 	
1154:./Hardware/MQTT/MqttKit.c **** 	//固定头部----------------------头部消息-------------------------------------------------
1155:./Hardware/MQTT/MqttKit.c **** 	mqttPacket->_data[mqttPacket->_len++] = MQTT_PKT_PUBREL << 4 | 0x02;
 3368              		.loc 1 1155 2 is_stmt 1 view .LVU1078
 3369              		.loc 1 1155 30 is_stmt 0 view .LVU1079
 3370 0012 6268     		ldr	r2, [r4, #4]
 3371              		.loc 1 1155 36 view .LVU1080
 3372 0014 511C     		adds	r1, r2, #1
 3373 0016 6160     		str	r1, [r4, #4]
 3374              		.loc 1 1155 40 view .LVU1081
 3375 0018 6221     		movs	r1, #98
 3376 001a 9954     		strb	r1, [r3, r2]
1156:./Hardware/MQTT/MqttKit.c **** 	
1157:./Hardware/MQTT/MqttKit.c **** 	//固定头部----------------------剩余长度-------------------------------------------------
1158:./Hardware/MQTT/MqttKit.c **** 	mqttPacket->_data[mqttPacket->_len++] = 2;
 3377              		.loc 1 1158 2 is_stmt 1 view .LVU1082
 3378              		.loc 1 1158 12 is_stmt 0 view .LVU1083
 3379 001c 2268     		ldr	r2, [r4]
 3380              		.loc 1 1158 30 view .LVU1084
 3381 001e 6368     		ldr	r3, [r4, #4]
 3382              		.loc 1 1158 36 view .LVU1085
 3383 0020 591C     		adds	r1, r3, #1
 3384 0022 6160     		str	r1, [r4, #4]
 3385              		.loc 1 1158 40 view .LVU1086
 3386 0024 0221     		movs	r1, #2
 3387 0026 D154     		strb	r1, [r2, r3]
1159:./Hardware/MQTT/MqttKit.c **** 	
1160:./Hardware/MQTT/MqttKit.c **** /*************************************可变头部***********************************************/
1161:./Hardware/MQTT/MqttKit.c **** 	
ARM GAS  /tmp/ccYLmkow.s 			page 88


1162:./Hardware/MQTT/MqttKit.c **** 	//可变头部----------------------pkt_id长度-----------------------------------------------
1163:./Hardware/MQTT/MqttKit.c **** 	mqttPacket->_data[mqttPacket->_len++] = pkt_id >> 8;
 3388              		.loc 1 1163 2 is_stmt 1 view .LVU1087
 3389              		.loc 1 1163 12 is_stmt 0 view .LVU1088
 3390 0028 2268     		ldr	r2, [r4]
 3391              		.loc 1 1163 30 view .LVU1089
 3392 002a 6368     		ldr	r3, [r4, #4]
 3393              		.loc 1 1163 36 view .LVU1090
 3394 002c 591C     		adds	r1, r3, #1
 3395 002e 6160     		str	r1, [r4, #4]
 3396              		.loc 1 1163 40 view .LVU1091
 3397 0030 290A     		lsrs	r1, r5, #8
 3398 0032 D154     		strb	r1, [r2, r3]
1164:./Hardware/MQTT/MqttKit.c **** 	mqttPacket->_data[mqttPacket->_len++] = pkt_id & 0xff;
 3399              		.loc 1 1164 2 is_stmt 1 view .LVU1092
 3400              		.loc 1 1164 12 is_stmt 0 view .LVU1093
 3401 0034 2268     		ldr	r2, [r4]
 3402              		.loc 1 1164 30 view .LVU1094
 3403 0036 6368     		ldr	r3, [r4, #4]
 3404              		.loc 1 1164 36 view .LVU1095
 3405 0038 591C     		adds	r1, r3, #1
 3406 003a 6160     		str	r1, [r4, #4]
 3407              		.loc 1 1164 40 view .LVU1096
 3408 003c D554     		strb	r5, [r2, r3]
1165:./Hardware/MQTT/MqttKit.c **** 	
1166:./Hardware/MQTT/MqttKit.c **** 	return 0;
 3409              		.loc 1 1166 2 is_stmt 1 view .LVU1097
 3410              		.loc 1 1166 9 is_stmt 0 view .LVU1098
 3411 003e 0020     		movs	r0, #0
 3412              	.L196:
1167:./Hardware/MQTT/MqttKit.c **** 
1168:./Hardware/MQTT/MqttKit.c **** }
 3413              		.loc 1 1168 1 view .LVU1099
 3414 0040 38BD     		pop	{r3, r4, r5, pc}
 3415              	.LVL318:
 3416              	.L197:
1150:./Hardware/MQTT/MqttKit.c **** 	
 3417              		.loc 1 1150 10 view .LVU1100
 3418 0042 0120     		movs	r0, #1
 3419 0044 FCE7     		b	.L196
 3420              		.cfi_endproc
 3421              	.LFE21:
 3423              		.section	.text.MQTT_UnPacketPublishRel,"ax",%progbits
 3424              		.align	1
 3425              		.global	MQTT_UnPacketPublishRel
 3426              		.syntax unified
 3427              		.thumb
 3428              		.thumb_func
 3429              		.fpu softvfp
 3431              	MQTT_UnPacketPublishRel:
 3432              	.LVL319:
 3433              	.LFB22:
1169:./Hardware/MQTT/MqttKit.c **** 
1170:./Hardware/MQTT/MqttKit.c **** //==========================================================
1171:./Hardware/MQTT/MqttKit.c **** //	函数名称：	MQTT_UnPacketPublishRel
1172:./Hardware/MQTT/MqttKit.c **** //
1173:./Hardware/MQTT/MqttKit.c **** //	函数功能：	Publish Rel消息解包
ARM GAS  /tmp/ccYLmkow.s 			page 89


1174:./Hardware/MQTT/MqttKit.c **** //
1175:./Hardware/MQTT/MqttKit.c **** //	入口参数：	rev_data：接收到的数据
1176:./Hardware/MQTT/MqttKit.c **** //
1177:./Hardware/MQTT/MqttKit.c **** //	返回参数：	0-成功		1-失败
1178:./Hardware/MQTT/MqttKit.c **** //
1179:./Hardware/MQTT/MqttKit.c **** //	说明：		
1180:./Hardware/MQTT/MqttKit.c **** //==========================================================
1181:./Hardware/MQTT/MqttKit.c **** uint1 MQTT_UnPacketPublishRel(uint8 *rev_data, uint16 pkt_id)
1182:./Hardware/MQTT/MqttKit.c **** {
 3434              		.loc 1 1182 1 is_stmt 1 view -0
 3435              		.cfi_startproc
 3436              		@ args = 0, pretend = 0, frame = 0
 3437              		@ frame_needed = 0, uses_anonymous_args = 0
 3438              		@ link register save eliminated.
1183:./Hardware/MQTT/MqttKit.c **** 
1184:./Hardware/MQTT/MqttKit.c **** 	if(rev_data[1] != 2)
 3439              		.loc 1 1184 2 view .LVU1102
 3440              		.loc 1 1184 13 is_stmt 0 view .LVU1103
 3441 0000 4378     		ldrb	r3, [r0, #1]	@ zero_extendqisi2
 3442              		.loc 1 1184 4 view .LVU1104
 3443 0002 022B     		cmp	r3, #2
 3444 0004 09D1     		bne	.L201
1185:./Hardware/MQTT/MqttKit.c **** 		return 1;
1186:./Hardware/MQTT/MqttKit.c **** 
1187:./Hardware/MQTT/MqttKit.c **** 	if(rev_data[2] == MOSQ_MSB(pkt_id) && rev_data[3] == MOSQ_LSB(pkt_id))
 3445              		.loc 1 1187 2 is_stmt 1 view .LVU1105
 3446              		.loc 1 1187 13 is_stmt 0 view .LVU1106
 3447 0006 8378     		ldrb	r3, [r0, #2]	@ zero_extendqisi2
 3448              		.loc 1 1187 4 view .LVU1107
 3449 0008 B3EB112F 		cmp	r3, r1, lsr #8
 3450 000c 07D1     		bne	.L202
 3451              		.loc 1 1187 48 discriminator 1 view .LVU1108
 3452 000e C378     		ldrb	r3, [r0, #3]	@ zero_extendqisi2
 3453              		.loc 1 1187 52 discriminator 1 view .LVU1109
 3454 0010 C9B2     		uxtb	r1, r1
 3455              	.LVL320:
 3456              		.loc 1 1187 37 discriminator 1 view .LVU1110
 3457 0012 8B42     		cmp	r3, r1
 3458 0014 05D0     		beq	.L203
1188:./Hardware/MQTT/MqttKit.c **** 		return 0;
1189:./Hardware/MQTT/MqttKit.c **** 	else
1190:./Hardware/MQTT/MqttKit.c **** 		return 1;
 3459              		.loc 1 1190 10 view .LVU1111
 3460 0016 0120     		movs	r0, #1
 3461              	.LVL321:
 3462              		.loc 1 1190 10 view .LVU1112
 3463 0018 7047     		bx	lr
 3464              	.LVL322:
 3465              	.L201:
1185:./Hardware/MQTT/MqttKit.c **** 		return 1;
 3466              		.loc 1 1185 10 view .LVU1113
 3467 001a 0120     		movs	r0, #1
 3468              	.LVL323:
1185:./Hardware/MQTT/MqttKit.c **** 		return 1;
 3469              		.loc 1 1185 10 view .LVU1114
 3470 001c 7047     		bx	lr
 3471              	.LVL324:
ARM GAS  /tmp/ccYLmkow.s 			page 90


 3472              	.L202:
 3473              		.loc 1 1190 10 view .LVU1115
 3474 001e 0120     		movs	r0, #1
 3475              	.LVL325:
 3476              		.loc 1 1190 10 view .LVU1116
 3477 0020 7047     		bx	lr
 3478              	.LVL326:
 3479              	.L203:
1188:./Hardware/MQTT/MqttKit.c **** 		return 0;
 3480              		.loc 1 1188 10 view .LVU1117
 3481 0022 0020     		movs	r0, #0
 3482              	.LVL327:
1191:./Hardware/MQTT/MqttKit.c **** 
1192:./Hardware/MQTT/MqttKit.c **** }
 3483              		.loc 1 1192 1 view .LVU1118
 3484 0024 7047     		bx	lr
 3485              		.cfi_endproc
 3486              	.LFE22:
 3488              		.section	.text.MQTT_PacketPublishComp,"ax",%progbits
 3489              		.align	1
 3490              		.global	MQTT_PacketPublishComp
 3491              		.syntax unified
 3492              		.thumb
 3493              		.thumb_func
 3494              		.fpu softvfp
 3496              	MQTT_PacketPublishComp:
 3497              	.LVL328:
 3498              	.LFB23:
1193:./Hardware/MQTT/MqttKit.c **** 
1194:./Hardware/MQTT/MqttKit.c **** //==========================================================
1195:./Hardware/MQTT/MqttKit.c **** //	函数名称：	MQTT_PacketPublishComp
1196:./Hardware/MQTT/MqttKit.c **** //
1197:./Hardware/MQTT/MqttKit.c **** //	函数功能：	Publish Comp消息组包
1198:./Hardware/MQTT/MqttKit.c **** //
1199:./Hardware/MQTT/MqttKit.c **** //	入口参数：	pkt_id：packet id
1200:./Hardware/MQTT/MqttKit.c **** //				mqttPacket：包指针
1201:./Hardware/MQTT/MqttKit.c **** //
1202:./Hardware/MQTT/MqttKit.c **** //	返回参数：	0-成功		1-失败原因
1203:./Hardware/MQTT/MqttKit.c **** //
1204:./Hardware/MQTT/MqttKit.c **** //	说明：		当收到的Publish消息的QoS等级为2时，先收到rec，再回复rel
1205:./Hardware/MQTT/MqttKit.c **** //==========================================================
1206:./Hardware/MQTT/MqttKit.c **** uint1 MQTT_PacketPublishComp(uint16 pkt_id, MQTT_PACKET_STRUCTURE *mqttPacket)
1207:./Hardware/MQTT/MqttKit.c **** {
 3499              		.loc 1 1207 1 is_stmt 1 view -0
 3500              		.cfi_startproc
 3501              		@ args = 0, pretend = 0, frame = 0
 3502              		@ frame_needed = 0, uses_anonymous_args = 0
 3503              		.loc 1 1207 1 is_stmt 0 view .LVU1120
 3504 0000 38B5     		push	{r3, r4, r5, lr}
 3505              	.LCFI40:
 3506              		.cfi_def_cfa_offset 16
 3507              		.cfi_offset 3, -16
 3508              		.cfi_offset 4, -12
 3509              		.cfi_offset 5, -8
 3510              		.cfi_offset 14, -4
 3511 0002 0546     		mov	r5, r0
 3512 0004 0C46     		mov	r4, r1
ARM GAS  /tmp/ccYLmkow.s 			page 91


1208:./Hardware/MQTT/MqttKit.c **** 
1209:./Hardware/MQTT/MqttKit.c **** 	MQTT_NewBuffer(mqttPacket, 4);
 3513              		.loc 1 1209 2 is_stmt 1 view .LVU1121
 3514 0006 0421     		movs	r1, #4
 3515              	.LVL329:
 3516              		.loc 1 1209 2 is_stmt 0 view .LVU1122
 3517 0008 2046     		mov	r0, r4
 3518              	.LVL330:
 3519              		.loc 1 1209 2 view .LVU1123
 3520 000a FFF7FEFF 		bl	MQTT_NewBuffer
 3521              	.LVL331:
1210:./Hardware/MQTT/MqttKit.c **** 	if(mqttPacket->_data == NULL)
 3522              		.loc 1 1210 2 is_stmt 1 view .LVU1124
 3523              		.loc 1 1210 15 is_stmt 0 view .LVU1125
 3524 000e 2368     		ldr	r3, [r4]
 3525              		.loc 1 1210 4 view .LVU1126
 3526 0010 BBB1     		cbz	r3, .L206
1211:./Hardware/MQTT/MqttKit.c **** 		return 1;
1212:./Hardware/MQTT/MqttKit.c **** 	
1213:./Hardware/MQTT/MqttKit.c **** /*************************************固定头部***********************************************/
1214:./Hardware/MQTT/MqttKit.c **** 	
1215:./Hardware/MQTT/MqttKit.c **** 	//固定头部----------------------头部消息-------------------------------------------------
1216:./Hardware/MQTT/MqttKit.c **** 	mqttPacket->_data[mqttPacket->_len++] = MQTT_PKT_PUBCOMP << 4;
 3527              		.loc 1 1216 2 is_stmt 1 view .LVU1127
 3528              		.loc 1 1216 30 is_stmt 0 view .LVU1128
 3529 0012 6268     		ldr	r2, [r4, #4]
 3530              		.loc 1 1216 36 view .LVU1129
 3531 0014 511C     		adds	r1, r2, #1
 3532 0016 6160     		str	r1, [r4, #4]
 3533              		.loc 1 1216 40 view .LVU1130
 3534 0018 7021     		movs	r1, #112
 3535 001a 9954     		strb	r1, [r3, r2]
1217:./Hardware/MQTT/MqttKit.c **** 	
1218:./Hardware/MQTT/MqttKit.c **** 	//固定头部----------------------剩余长度-------------------------------------------------
1219:./Hardware/MQTT/MqttKit.c **** 	mqttPacket->_data[mqttPacket->_len++] = 2;
 3536              		.loc 1 1219 2 is_stmt 1 view .LVU1131
 3537              		.loc 1 1219 12 is_stmt 0 view .LVU1132
 3538 001c 2268     		ldr	r2, [r4]
 3539              		.loc 1 1219 30 view .LVU1133
 3540 001e 6368     		ldr	r3, [r4, #4]
 3541              		.loc 1 1219 36 view .LVU1134
 3542 0020 591C     		adds	r1, r3, #1
 3543 0022 6160     		str	r1, [r4, #4]
 3544              		.loc 1 1219 40 view .LVU1135
 3545 0024 0221     		movs	r1, #2
 3546 0026 D154     		strb	r1, [r2, r3]
1220:./Hardware/MQTT/MqttKit.c **** 	
1221:./Hardware/MQTT/MqttKit.c **** /*************************************可变头部***********************************************/
1222:./Hardware/MQTT/MqttKit.c **** 	
1223:./Hardware/MQTT/MqttKit.c **** 	//可变头部----------------------pkt_id长度-----------------------------------------------
1224:./Hardware/MQTT/MqttKit.c **** 	mqttPacket->_data[mqttPacket->_len++] = pkt_id >> 8;
 3547              		.loc 1 1224 2 is_stmt 1 view .LVU1136
 3548              		.loc 1 1224 12 is_stmt 0 view .LVU1137
 3549 0028 2268     		ldr	r2, [r4]
 3550              		.loc 1 1224 30 view .LVU1138
 3551 002a 6368     		ldr	r3, [r4, #4]
 3552              		.loc 1 1224 36 view .LVU1139
ARM GAS  /tmp/ccYLmkow.s 			page 92


 3553 002c 591C     		adds	r1, r3, #1
 3554 002e 6160     		str	r1, [r4, #4]
 3555              		.loc 1 1224 40 view .LVU1140
 3556 0030 290A     		lsrs	r1, r5, #8
 3557 0032 D154     		strb	r1, [r2, r3]
1225:./Hardware/MQTT/MqttKit.c **** 	mqttPacket->_data[mqttPacket->_len++] = pkt_id & 0xff;
 3558              		.loc 1 1225 2 is_stmt 1 view .LVU1141
 3559              		.loc 1 1225 12 is_stmt 0 view .LVU1142
 3560 0034 2268     		ldr	r2, [r4]
 3561              		.loc 1 1225 30 view .LVU1143
 3562 0036 6368     		ldr	r3, [r4, #4]
 3563              		.loc 1 1225 36 view .LVU1144
 3564 0038 591C     		adds	r1, r3, #1
 3565 003a 6160     		str	r1, [r4, #4]
 3566              		.loc 1 1225 40 view .LVU1145
 3567 003c D554     		strb	r5, [r2, r3]
1226:./Hardware/MQTT/MqttKit.c **** 	
1227:./Hardware/MQTT/MqttKit.c **** 	return 0;
 3568              		.loc 1 1227 2 is_stmt 1 view .LVU1146
 3569              		.loc 1 1227 9 is_stmt 0 view .LVU1147
 3570 003e 0020     		movs	r0, #0
 3571              	.L205:
1228:./Hardware/MQTT/MqttKit.c **** 
1229:./Hardware/MQTT/MqttKit.c **** }
 3572              		.loc 1 1229 1 view .LVU1148
 3573 0040 38BD     		pop	{r3, r4, r5, pc}
 3574              	.LVL332:
 3575              	.L206:
1211:./Hardware/MQTT/MqttKit.c **** 	
 3576              		.loc 1 1211 10 view .LVU1149
 3577 0042 0120     		movs	r0, #1
 3578 0044 FCE7     		b	.L205
 3579              		.cfi_endproc
 3580              	.LFE23:
 3582              		.section	.text.MQTT_UnPacketPublishComp,"ax",%progbits
 3583              		.align	1
 3584              		.global	MQTT_UnPacketPublishComp
 3585              		.syntax unified
 3586              		.thumb
 3587              		.thumb_func
 3588              		.fpu softvfp
 3590              	MQTT_UnPacketPublishComp:
 3591              	.LVL333:
 3592              	.LFB24:
1230:./Hardware/MQTT/MqttKit.c **** 
1231:./Hardware/MQTT/MqttKit.c **** //==========================================================
1232:./Hardware/MQTT/MqttKit.c **** //	函数名称：	MQTT_UnPacketPublishComp
1233:./Hardware/MQTT/MqttKit.c **** //
1234:./Hardware/MQTT/MqttKit.c **** //	函数功能：	Publish Comp消息解包
1235:./Hardware/MQTT/MqttKit.c **** //
1236:./Hardware/MQTT/MqttKit.c **** //	入口参数：	rev_data：接收到的数据
1237:./Hardware/MQTT/MqttKit.c **** //
1238:./Hardware/MQTT/MqttKit.c **** //	返回参数：	0-成功		1-失败
1239:./Hardware/MQTT/MqttKit.c **** //
1240:./Hardware/MQTT/MqttKit.c **** //	说明：		
1241:./Hardware/MQTT/MqttKit.c **** //==========================================================
1242:./Hardware/MQTT/MqttKit.c **** uint1 MQTT_UnPacketPublishComp(uint8 *rev_data)
ARM GAS  /tmp/ccYLmkow.s 			page 93


1243:./Hardware/MQTT/MqttKit.c **** {
 3593              		.loc 1 1243 1 is_stmt 1 view -0
 3594              		.cfi_startproc
 3595              		@ args = 0, pretend = 0, frame = 0
 3596              		@ frame_needed = 0, uses_anonymous_args = 0
 3597              		@ link register save eliminated.
1244:./Hardware/MQTT/MqttKit.c **** 
1245:./Hardware/MQTT/MqttKit.c **** 	if(rev_data[1] != 2)
 3598              		.loc 1 1245 2 view .LVU1151
 3599              		.loc 1 1245 13 is_stmt 0 view .LVU1152
 3600 0000 4378     		ldrb	r3, [r0, #1]	@ zero_extendqisi2
 3601              		.loc 1 1245 4 view .LVU1153
 3602 0002 022B     		cmp	r3, #2
 3603 0004 06D1     		bne	.L210
1246:./Hardware/MQTT/MqttKit.c **** 		return 1;
1247:./Hardware/MQTT/MqttKit.c **** 
1248:./Hardware/MQTT/MqttKit.c **** 	if(rev_data[2] == MOSQ_MSB(MQTT_PUBLISH_ID) && rev_data[3] == MOSQ_LSB(MQTT_PUBLISH_ID))
 3604              		.loc 1 1248 2 is_stmt 1 view .LVU1154
 3605              		.loc 1 1248 13 is_stmt 0 view .LVU1155
 3606 0006 8378     		ldrb	r3, [r0, #2]	@ zero_extendqisi2
 3607              		.loc 1 1248 4 view .LVU1156
 3608 0008 33B9     		cbnz	r3, .L211
 3609              		.loc 1 1248 57 discriminator 1 view .LVU1157
 3610 000a C378     		ldrb	r3, [r0, #3]	@ zero_extendqisi2
 3611              		.loc 1 1248 46 discriminator 1 view .LVU1158
 3612 000c 0A2B     		cmp	r3, #10
 3613 000e 05D0     		beq	.L212
1249:./Hardware/MQTT/MqttKit.c **** 		return 0;
1250:./Hardware/MQTT/MqttKit.c **** 	else
1251:./Hardware/MQTT/MqttKit.c **** 		return 1;
 3614              		.loc 1 1251 10 view .LVU1159
 3615 0010 0120     		movs	r0, #1
 3616              	.LVL334:
 3617              		.loc 1 1251 10 view .LVU1160
 3618 0012 7047     		bx	lr
 3619              	.LVL335:
 3620              	.L210:
1246:./Hardware/MQTT/MqttKit.c **** 		return 1;
 3621              		.loc 1 1246 10 view .LVU1161
 3622 0014 0120     		movs	r0, #1
 3623              	.LVL336:
1246:./Hardware/MQTT/MqttKit.c **** 		return 1;
 3624              		.loc 1 1246 10 view .LVU1162
 3625 0016 7047     		bx	lr
 3626              	.LVL337:
 3627              	.L211:
 3628              		.loc 1 1251 10 view .LVU1163
 3629 0018 0120     		movs	r0, #1
 3630              	.LVL338:
 3631              		.loc 1 1251 10 view .LVU1164
 3632 001a 7047     		bx	lr
 3633              	.LVL339:
 3634              	.L212:
1249:./Hardware/MQTT/MqttKit.c **** 		return 0;
 3635              		.loc 1 1249 10 view .LVU1165
 3636 001c 0020     		movs	r0, #0
 3637              	.LVL340:
ARM GAS  /tmp/ccYLmkow.s 			page 94


1252:./Hardware/MQTT/MqttKit.c **** 
1253:./Hardware/MQTT/MqttKit.c **** }
 3638              		.loc 1 1253 1 view .LVU1166
 3639 001e 7047     		bx	lr
 3640              		.cfi_endproc
 3641              	.LFE24:
 3643              		.section	.text.MQTT_PacketPing,"ax",%progbits
 3644              		.align	1
 3645              		.global	MQTT_PacketPing
 3646              		.syntax unified
 3647              		.thumb
 3648              		.thumb_func
 3649              		.fpu softvfp
 3651              	MQTT_PacketPing:
 3652              	.LVL341:
 3653              	.LFB25:
1254:./Hardware/MQTT/MqttKit.c **** 
1255:./Hardware/MQTT/MqttKit.c **** //==========================================================
1256:./Hardware/MQTT/MqttKit.c **** //	函数名称：	MQTT_PacketPing
1257:./Hardware/MQTT/MqttKit.c **** //
1258:./Hardware/MQTT/MqttKit.c **** //	函数功能：	心跳请求组包
1259:./Hardware/MQTT/MqttKit.c **** //
1260:./Hardware/MQTT/MqttKit.c **** //	入口参数：	mqttPacket：包指针
1261:./Hardware/MQTT/MqttKit.c **** //
1262:./Hardware/MQTT/MqttKit.c **** //	返回参数：	0-成功		1-失败
1263:./Hardware/MQTT/MqttKit.c **** //
1264:./Hardware/MQTT/MqttKit.c **** //	说明：		
1265:./Hardware/MQTT/MqttKit.c **** //==========================================================
1266:./Hardware/MQTT/MqttKit.c **** uint1 MQTT_PacketPing(MQTT_PACKET_STRUCTURE *mqttPacket)
1267:./Hardware/MQTT/MqttKit.c **** {
 3654              		.loc 1 1267 1 is_stmt 1 view -0
 3655              		.cfi_startproc
 3656              		@ args = 0, pretend = 0, frame = 0
 3657              		@ frame_needed = 0, uses_anonymous_args = 0
 3658              		.loc 1 1267 1 is_stmt 0 view .LVU1168
 3659 0000 10B5     		push	{r4, lr}
 3660              	.LCFI41:
 3661              		.cfi_def_cfa_offset 8
 3662              		.cfi_offset 4, -8
 3663              		.cfi_offset 14, -4
 3664 0002 0446     		mov	r4, r0
1268:./Hardware/MQTT/MqttKit.c **** 
1269:./Hardware/MQTT/MqttKit.c **** 	MQTT_NewBuffer(mqttPacket, 2);
 3665              		.loc 1 1269 2 is_stmt 1 view .LVU1169
 3666 0004 0221     		movs	r1, #2
 3667 0006 FFF7FEFF 		bl	MQTT_NewBuffer
 3668              	.LVL342:
1270:./Hardware/MQTT/MqttKit.c **** 	if(mqttPacket->_data == NULL)
 3669              		.loc 1 1270 2 view .LVU1170
 3670              		.loc 1 1270 15 is_stmt 0 view .LVU1171
 3671 000a 2368     		ldr	r3, [r4]
 3672              		.loc 1 1270 4 view .LVU1172
 3673 000c 5BB1     		cbz	r3, .L215
1271:./Hardware/MQTT/MqttKit.c **** 		return 1;
1272:./Hardware/MQTT/MqttKit.c **** 	
1273:./Hardware/MQTT/MqttKit.c **** /*************************************固定头部***********************************************/
1274:./Hardware/MQTT/MqttKit.c **** 	
ARM GAS  /tmp/ccYLmkow.s 			page 95


1275:./Hardware/MQTT/MqttKit.c **** 	//固定头部----------------------头部消息-------------------------------------------------
1276:./Hardware/MQTT/MqttKit.c **** 	mqttPacket->_data[mqttPacket->_len++] = MQTT_PKT_PINGREQ << 4;
 3674              		.loc 1 1276 2 is_stmt 1 view .LVU1173
 3675              		.loc 1 1276 30 is_stmt 0 view .LVU1174
 3676 000e 6268     		ldr	r2, [r4, #4]
 3677              		.loc 1 1276 36 view .LVU1175
 3678 0010 511C     		adds	r1, r2, #1
 3679 0012 6160     		str	r1, [r4, #4]
 3680              		.loc 1 1276 40 view .LVU1176
 3681 0014 C021     		movs	r1, #192
 3682 0016 9954     		strb	r1, [r3, r2]
1277:./Hardware/MQTT/MqttKit.c **** 	
1278:./Hardware/MQTT/MqttKit.c **** 	//固定头部----------------------剩余长度-------------------------------------------------
1279:./Hardware/MQTT/MqttKit.c **** 	mqttPacket->_data[mqttPacket->_len++] = 0;
 3683              		.loc 1 1279 2 is_stmt 1 view .LVU1177
 3684              		.loc 1 1279 12 is_stmt 0 view .LVU1178
 3685 0018 2268     		ldr	r2, [r4]
 3686              		.loc 1 1279 30 view .LVU1179
 3687 001a 6368     		ldr	r3, [r4, #4]
 3688              		.loc 1 1279 36 view .LVU1180
 3689 001c 591C     		adds	r1, r3, #1
 3690 001e 6160     		str	r1, [r4, #4]
 3691              		.loc 1 1279 40 view .LVU1181
 3692 0020 0020     		movs	r0, #0
 3693 0022 D054     		strb	r0, [r2, r3]
1280:./Hardware/MQTT/MqttKit.c **** 	
1281:./Hardware/MQTT/MqttKit.c **** 	return 0;
 3694              		.loc 1 1281 2 is_stmt 1 view .LVU1182
 3695              	.L214:
1282:./Hardware/MQTT/MqttKit.c **** 
1283:./Hardware/MQTT/MqttKit.c **** }
 3696              		.loc 1 1283 1 is_stmt 0 view .LVU1183
 3697 0024 10BD     		pop	{r4, pc}
 3698              	.LVL343:
 3699              	.L215:
1271:./Hardware/MQTT/MqttKit.c **** 	
 3700              		.loc 1 1271 10 view .LVU1184
 3701 0026 0120     		movs	r0, #1
 3702 0028 FCE7     		b	.L214
 3703              		.cfi_endproc
 3704              	.LFE25:
 3706              		.text
 3707              	.Letext0:
 3708              		.file 2 "./Hardware/Common/common.h"
 3709              		.file 3 "./Hardware/MQTT/MqttKit.h"
 3710              		.file 4 "/home/hao/Documents/gcc-arm-none-eabi/arm-none-eabi/include/string.h"
 3711              		.file 5 "/home/hao/Documents/gcc-arm-none-eabi/arm-none-eabi/include/stdlib.h"
 3712              		.file 6 "<built-in>"
ARM GAS  /tmp/ccYLmkow.s 			page 96


DEFINED SYMBOLS
                            *ABS*:0000000000000000 MqttKit.c
     /tmp/ccYLmkow.s:16     .text.MQTT_NewBuffer:0000000000000000 $t
     /tmp/ccYLmkow.s:24     .text.MQTT_NewBuffer:0000000000000000 MQTT_NewBuffer
     /tmp/ccYLmkow.s:145    .text.MQTT_DeleteBuffer:0000000000000000 $t
     /tmp/ccYLmkow.s:152    .text.MQTT_DeleteBuffer:0000000000000000 MQTT_DeleteBuffer
     /tmp/ccYLmkow.s:202    .text.MQTT_DumpLength:0000000000000000 $t
     /tmp/ccYLmkow.s:209    .text.MQTT_DumpLength:0000000000000000 MQTT_DumpLength
     /tmp/ccYLmkow.s:265    .text.MQTT_ReadLength:0000000000000000 $t
     /tmp/ccYLmkow.s:272    .text.MQTT_ReadLength:0000000000000000 MQTT_ReadLength
     /tmp/ccYLmkow.s:368    .rodata.MQTT_UnPacketRecv.str1.4:0000000000000000 $d
     /tmp/ccYLmkow.s:372    .text.MQTT_UnPacketRecv:0000000000000000 $t
     /tmp/ccYLmkow.s:379    .text.MQTT_UnPacketRecv:0000000000000000 MQTT_UnPacketRecv
     /tmp/ccYLmkow.s:508    .text.MQTT_UnPacketRecv:0000000000000064 $d
     /tmp/ccYLmkow.s:513    .rodata.MQTT_PacketConnect.str1.4:0000000000000000 $d
     /tmp/ccYLmkow.s:517    .text.MQTT_PacketConnect:0000000000000000 $t
     /tmp/ccYLmkow.s:524    .text.MQTT_PacketConnect:0000000000000000 MQTT_PacketConnect
     /tmp/ccYLmkow.s:1163   .text.MQTT_PacketConnect:00000000000002ac $d
     /tmp/ccYLmkow.s:1168   .text.MQTT_PacketDisConnect:0000000000000000 $t
     /tmp/ccYLmkow.s:1175   .text.MQTT_PacketDisConnect:0000000000000000 MQTT_PacketDisConnect
     /tmp/ccYLmkow.s:1231   .text.MQTT_UnPacketConnectAck:0000000000000000 $t
     /tmp/ccYLmkow.s:1238   .text.MQTT_UnPacketConnectAck:0000000000000000 MQTT_UnPacketConnectAck
     /tmp/ccYLmkow.s:1282   .text.MQTT_UnPacketCmd:0000000000000000 $t
     /tmp/ccYLmkow.s:1289   .text.MQTT_UnPacketCmd:0000000000000000 MQTT_UnPacketCmd
     /tmp/ccYLmkow.s:1457   .text.MQTT_PacketSubscribe:0000000000000000 $t
     /tmp/ccYLmkow.s:1464   .text.MQTT_PacketSubscribe:0000000000000000 MQTT_PacketSubscribe
     /tmp/ccYLmkow.s:1713   .text.MQTT_UnPacketSubscribe:0000000000000000 $t
     /tmp/ccYLmkow.s:1720   .text.MQTT_UnPacketSubscribe:0000000000000000 MQTT_UnPacketSubscribe
     /tmp/ccYLmkow.s:1777   .text.MQTT_PacketUnSubscribe:0000000000000000 $t
     /tmp/ccYLmkow.s:1784   .text.MQTT_PacketUnSubscribe:0000000000000000 MQTT_PacketUnSubscribe
     /tmp/ccYLmkow.s:2041   .text.MQTT_UnPacketUnSubscribe:0000000000000000 $t
     /tmp/ccYLmkow.s:2048   .text.MQTT_UnPacketUnSubscribe:0000000000000000 MQTT_UnPacketUnSubscribe
     /tmp/ccYLmkow.s:2091   .text.MQTT_PacketPublish:0000000000000000 $t
     /tmp/ccYLmkow.s:2098   .text.MQTT_PacketPublish:0000000000000000 MQTT_PacketPublish
     /tmp/ccYLmkow.s:2395   .rodata.MQTT_PacketSaveData.str1.4:0000000000000000 $d
     /tmp/ccYLmkow.s:2399   .text.MQTT_PacketSaveData:0000000000000000 $t
     /tmp/ccYLmkow.s:2406   .text.MQTT_PacketSaveData:0000000000000000 MQTT_PacketSaveData
     /tmp/ccYLmkow.s:2501   .text.MQTT_PacketSaveData:000000000000004c $d
     /tmp/ccYLmkow.s:2506   .rodata.MQTT_PacketCmdResp.str1.4:0000000000000000 $d
     /tmp/ccYLmkow.s:2510   .text.MQTT_PacketCmdResp:0000000000000000 $t
     /tmp/ccYLmkow.s:2517   .text.MQTT_PacketCmdResp:0000000000000000 MQTT_PacketCmdResp
     /tmp/ccYLmkow.s:2634   .text.MQTT_PacketCmdResp:0000000000000074 $d
     /tmp/ccYLmkow.s:2639   .text.MQTT_UnPacketPublish:0000000000000000 $t
     /tmp/ccYLmkow.s:2646   .text.MQTT_UnPacketPublish:0000000000000000 MQTT_UnPacketPublish
     /tmp/ccYLmkow.s:3015   .text.MQTT_UnPacketPublish:00000000000001ac $d
     /tmp/ccYLmkow.s:3020   .text.MQTT_PacketPublishAck:0000000000000000 $t
     /tmp/ccYLmkow.s:3027   .text.MQTT_PacketPublishAck:0000000000000000 MQTT_PacketPublishAck
     /tmp/ccYLmkow.s:3114   .text.MQTT_UnPacketPublishAck:0000000000000000 $t
     /tmp/ccYLmkow.s:3121   .text.MQTT_UnPacketPublishAck:0000000000000000 MQTT_UnPacketPublishAck
     /tmp/ccYLmkow.s:3175   .text.MQTT_PacketPublishRec:0000000000000000 $t
     /tmp/ccYLmkow.s:3182   .text.MQTT_PacketPublishRec:0000000000000000 MQTT_PacketPublishRec
     /tmp/ccYLmkow.s:3269   .text.MQTT_UnPacketPublishRec:0000000000000000 $t
     /tmp/ccYLmkow.s:3276   .text.MQTT_UnPacketPublishRec:0000000000000000 MQTT_UnPacketPublishRec
     /tmp/ccYLmkow.s:3330   .text.MQTT_PacketPublishRel:0000000000000000 $t
     /tmp/ccYLmkow.s:3337   .text.MQTT_PacketPublishRel:0000000000000000 MQTT_PacketPublishRel
     /tmp/ccYLmkow.s:3424   .text.MQTT_UnPacketPublishRel:0000000000000000 $t
     /tmp/ccYLmkow.s:3431   .text.MQTT_UnPacketPublishRel:0000000000000000 MQTT_UnPacketPublishRel
ARM GAS  /tmp/ccYLmkow.s 			page 97


     /tmp/ccYLmkow.s:3489   .text.MQTT_PacketPublishComp:0000000000000000 $t
     /tmp/ccYLmkow.s:3496   .text.MQTT_PacketPublishComp:0000000000000000 MQTT_PacketPublishComp
     /tmp/ccYLmkow.s:3583   .text.MQTT_UnPacketPublishComp:0000000000000000 $t
     /tmp/ccYLmkow.s:3590   .text.MQTT_UnPacketPublishComp:0000000000000000 MQTT_UnPacketPublishComp
     /tmp/ccYLmkow.s:3644   .text.MQTT_PacketPing:0000000000000000 $t
     /tmp/ccYLmkow.s:3651   .text.MQTT_PacketPing:0000000000000000 MQTT_PacketPing

UNDEFINED SYMBOLS
malloc
free
strstr
strlen
memset
strncat
strchr
memcpy
